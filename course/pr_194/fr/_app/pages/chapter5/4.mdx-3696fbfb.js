import{S as Ai,i as zi,s as Di,e as l,k as d,w as v,t as a,M as Pi,c as o,d as t,m,a as i,x as g,h as n,b as c,F as s,g as u,y as b,q as _,o as x,B as $,v as Ci}from"../../chunks/vendor-1e8b365d.js";import{T as Vt}from"../../chunks/Tip-62b14c6e.js";import{Y as ki}from"../../chunks/Youtube-c2a8cc39.js";import{I as un}from"../../chunks/IconCopyLink-483c28ba.js";import{C as A}from"../../chunks/CodeBlock-e5764662.js";import{D as Ii}from"../../chunks/DocNotebookDropdown-37d928d3.js";function Ti(K){let p,I,h,w,C,f,z,D,y,j,q,k,N,T,E,O,B;return{c(){p=l("p"),I=a("\u270E Par d\xE9faut, \u{1F917} "),h=l("em"),w=a("Datasets"),C=a(" d\xE9compresse les fichiers n\xE9cessaires pour charger un jeu de donn\xE9es. Si vous souhaitez conserver de l\u2019espace sur le disque dur, vous pouvez passer "),f=l("code"),z=a("DownloadConfig(delete_extracted=True)"),D=a(" \xE0 l\u2019argument "),y=l("code"),j=a("download_config"),q=a(" de "),k=l("code"),N=a("load_dataset()"),T=a(". Voir la "),E=l("a"),O=a("documentation"),B=a(" pour plus de d\xE9tails."),this.h()},l(S){p=o(S,"P",{});var P=i(p);I=n(P,"\u270E Par d\xE9faut, \u{1F917} "),h=o(P,"EM",{});var M=i(h);w=n(M,"Datasets"),M.forEach(t),C=n(P," d\xE9compresse les fichiers n\xE9cessaires pour charger un jeu de donn\xE9es. Si vous souhaitez conserver de l\u2019espace sur le disque dur, vous pouvez passer "),f=o(P,"CODE",{});var se=i(f);z=n(se,"DownloadConfig(delete_extracted=True)"),se.forEach(t),D=n(P," \xE0 l\u2019argument "),y=o(P,"CODE",{});var me=i(y);j=n(me,"download_config"),me.forEach(t),q=n(P," de "),k=o(P,"CODE",{});var ce=i(k);N=n(ce,"load_dataset()"),ce.forEach(t),T=n(P,". Voir la "),E=o(P,"A",{href:!0,rel:!0});var te=i(E);O=n(te,"documentation"),te.forEach(t),B=n(P," pour plus de d\xE9tails."),P.forEach(t),this.h()},h(){c(E,"href","https://huggingface.co/docs/datasets/package_reference/builder_classes.html?#datasets.utils.DownloadConfig"),c(E,"rel","nofollow")},m(S,P){u(S,p,P),s(p,I),s(p,h),s(h,w),s(p,C),s(p,f),s(f,z),s(p,D),s(p,y),s(y,j),s(p,q),s(p,k),s(k,N),s(p,T),s(p,E),s(E,O),s(p,B)},d(S){S&&t(p)}}}function Mi(K){let p,I,h,w,C,f,z,D,y,j,q,k,N,T,E,O,B,S;return{c(){p=l("p"),I=a("\u270F\uFE0F "),h=l("strong"),w=a("Essayez !"),C=a(" Choisissez l\u2019un des "),f=l("a"),z=a("sous-ensembles"),D=a(" de "),y=l("em"),j=a("The Pile"),q=a(" qui est plus grand que la RAM de votre ordinateur portable ou de bureau. Chargez-le avec \u{1F917} "),k=l("em"),N=a("Datasets"),T=a(" et mesurez la quantit\xE9 de RAM utilis\xE9e. Notez que pour obtenir une mesure pr\xE9cise, vous devrez le faire dans un nouveau processus. Vous pouvez trouver les tailles d\xE9compress\xE9es de chaque sous-ensemble dans le tableau 1 du papier de "),E=l("a"),O=l("em"),B=a("The Pile"),S=a("."),this.h()},l(P){p=o(P,"P",{});var M=i(p);I=n(M,"\u270F\uFE0F "),h=o(M,"STRONG",{});var se=i(h);w=n(se,"Essayez !"),se.forEach(t),C=n(M," Choisissez l\u2019un des "),f=o(M,"A",{href:!0,rel:!0});var me=i(f);z=n(me,"sous-ensembles"),me.forEach(t),D=n(M," de "),y=o(M,"EM",{});var ce=i(y);j=n(ce,"The Pile"),ce.forEach(t),q=n(M," qui est plus grand que la RAM de votre ordinateur portable ou de bureau. Chargez-le avec \u{1F917} "),k=o(M,"EM",{});var te=i(k);N=n(te,"Datasets"),te.forEach(t),T=n(M," et mesurez la quantit\xE9 de RAM utilis\xE9e. Notez que pour obtenir une mesure pr\xE9cise, vous devrez le faire dans un nouveau processus. Vous pouvez trouver les tailles d\xE9compress\xE9es de chaque sous-ensemble dans le tableau 1 du papier de "),E=o(M,"A",{href:!0,rel:!0});var U=i(E);O=o(U,"EM",{});var ws=i(O);B=n(ws,"The Pile"),ws.forEach(t),U.forEach(t),S=n(M,"."),M.forEach(t),this.h()},h(){c(f,"href","https://mystic.the-eye.eu/public/AI/pile_preliminary_components/"),c(f,"rel","nofollow"),c(E,"href","https://arxiv.org/abs/2101.00027"),c(E,"rel","nofollow")},m(P,M){u(P,p,M),s(p,I),s(p,h),s(h,w),s(p,C),s(p,f),s(f,z),s(p,D),s(p,y),s(y,j),s(p,q),s(p,k),s(k,N),s(p,T),s(p,E),s(E,O),s(O,B),s(p,S)},d(P){P&&t(p)}}}function Oi(K){let p,I,h,w,C,f,z,D,y;return{c(){p=l("p"),I=a("\u{1F4A1} Dans les "),h=l("em"),w=a("notebooks"),C=a(" Jupyter, vous pouvez \xE9galement chronom\xE9trer les cellules \xE0 l\u2019aide de la fonction magique "),f=l("a"),z=l("code"),D=a("%%timeit"),y=a("."),this.h()},l(j){p=o(j,"P",{});var q=i(p);I=n(q,"\u{1F4A1} Dans les "),h=o(q,"EM",{});var k=i(h);w=n(k,"notebooks"),k.forEach(t),C=n(q," Jupyter, vous pouvez \xE9galement chronom\xE9trer les cellules \xE0 l\u2019aide de la fonction magique "),f=o(q,"A",{href:!0,rel:!0});var N=i(f);z=o(N,"CODE",{});var T=i(z);D=n(T,"%%timeit"),T.forEach(t),N.forEach(t),y=n(q,"."),q.forEach(t),this.h()},h(){c(f,"href","https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-timeit"),c(f,"rel","nofollow")},m(j,q){u(j,p,q),s(p,I),s(p,h),s(h,w),s(p,C),s(p,f),s(f,z),s(z,D),s(p,y)},d(j){j&&t(p)}}}function Ri(K){let p,I,h,w,C,f,z,D;return{c(){p=l("p"),I=a("\u{1F4A1} Pour acc\xE9l\xE9rer la tokenisation avec le streaming, vous pouvez passer "),h=l("code"),w=a("batched=True"),C=a(", comme nous l\u2019avons vu dans la derni\xE8re section. Il traitera les exemples batch par batch. La taille de batch par d\xE9faut est de 1 000 et peut \xEAtre sp\xE9cifi\xE9e avec l\u2019argument "),f=l("code"),z=a("batch_size"),D=a(".")},l(y){p=o(y,"P",{});var j=i(p);I=n(j,"\u{1F4A1} Pour acc\xE9l\xE9rer la tokenisation avec le streaming, vous pouvez passer "),h=o(j,"CODE",{});var q=i(h);w=n(q,"batched=True"),q.forEach(t),C=n(j,", comme nous l\u2019avons vu dans la derni\xE8re section. Il traitera les exemples batch par batch. La taille de batch par d\xE9faut est de 1 000 et peut \xEAtre sp\xE9cifi\xE9e avec l\u2019argument "),f=o(j,"CODE",{});var k=i(f);z=n(k,"batch_size"),k.forEach(t),D=n(j,"."),j.forEach(t)},m(y,j){u(y,p,j),s(p,I),s(p,h),s(h,w),s(p,C),s(p,f),s(f,z),s(p,D)},d(y){y&&t(p)}}}function Ni(K){let p,I,h,w,C,f,z,D,y,j,q,k,N;return{c(){p=l("p"),I=a("\u270F\uFE0F "),h=l("strong"),w=a("Essayez !"),C=a(" Utilisez l\u2019un des grands corpus Common Crawl comme "),f=l("a"),z=l("code"),D=a("mc4"),y=a(" ou "),j=l("a"),q=l("code"),k=a("oscar"),N=a(" pour cr\xE9er en streaming un jeu de donn\xE9es multilingue repr\xE9sentant les proportions de langues parl\xE9es dans un pays de votre choix. Par exemple, les quatre langues nationales en Suisse sont l\u2019allemand, le fran\xE7ais, l\u2019italien et le romanche. Vous pouvez donc essayer de cr\xE9er un corpus suisse en \xE9chantillonnant les sous-ensembles Oscar en fonction de leur proportion parl\xE9e."),this.h()},l(T){p=o(T,"P",{});var E=i(p);I=n(E,"\u270F\uFE0F "),h=o(E,"STRONG",{});var O=i(h);w=n(O,"Essayez !"),O.forEach(t),C=n(E," Utilisez l\u2019un des grands corpus Common Crawl comme "),f=o(E,"A",{href:!0,rel:!0});var B=i(f);z=o(B,"CODE",{});var S=i(z);D=n(S,"mc4"),S.forEach(t),B.forEach(t),y=n(E," ou "),j=o(E,"A",{href:!0,rel:!0});var P=i(j);q=o(P,"CODE",{});var M=i(q);k=n(M,"oscar"),M.forEach(t),P.forEach(t),N=n(E," pour cr\xE9er en streaming un jeu de donn\xE9es multilingue repr\xE9sentant les proportions de langues parl\xE9es dans un pays de votre choix. Par exemple, les quatre langues nationales en Suisse sont l\u2019allemand, le fran\xE7ais, l\u2019italien et le romanche. Vous pouvez donc essayer de cr\xE9er un corpus suisse en \xE9chantillonnant les sous-ensembles Oscar en fonction de leur proportion parl\xE9e."),E.forEach(t),this.h()},h(){c(f,"href","https://huggingface.co/datasets/mc4"),c(f,"rel","nofollow"),c(j,"href","https://huggingface.co/datasets/oscar"),c(j,"rel","nofollow")},m(T,E){u(T,p,E),s(p,I),s(p,h),s(h,w),s(p,C),s(p,f),s(f,z),s(z,D),s(p,y),s(p,j),s(j,q),s(q,k),s(p,N)},d(T){T&&t(p)}}}function Si(K){let p,I,h,w,C,f,z,D,y,j,q,k,N,T,E,O,B,S,P,M,se,me,ce,te,U,ws,Gs,pn,dn,Hs,mn,cn,Us,fn,hn,Ft,Ie,Jt,ae,vn,Bs,gn,bn,Te,Vs,_n,xn,Wt,fe,ge,Fs,Me,$n,Oe,jn,Js,En,yn,Kt,R,Ws,qn,wn,Re,An,zn,Ne,Dn,Pn,Se,Cn,kn,Ks,In,Tn,Le,Mn,On,Ge,Rn,Nn,Ys,Sn,Ln,Yt,He,Zt,be,Gn,As,Hn,Un,Qt,Ue,Xt,Be,ea,zs,Bn,sa,_e,ta,Ds,Vn,aa,Ve,na,Fe,ra,Ps,Fn,la,he,xe,Zs,Je,Jn,Cs,Wn,Qs,Kn,oa,ne,Yn,We,Xs,Zn,Qn,et,Xn,er,ia,Ke,ua,$e,sr,st,tr,ar,pa,Ye,da,Ze,ma,Y,nr,tt,rr,lr,at,or,ir,nt,ur,pr,ca,Qe,fa,Xe,ha,ks,dr,va,je,ga,V,mr,es,cr,fr,rt,hr,vr,lt,gr,br,ss,_r,xr,ba,G,$r,ot,jr,Er,ts,yr,qr,as,it,wr,Ar,ns,zr,Dr,ut,Pr,Cr,_a,rs,xa,ls,$a,F,kr,pt,Ir,Tr,dt,Mr,Or,mt,Rr,Nr,ct,Sr,Lr,ja,Ee,Ea,ve,ye,ft,os,Gr,ht,Hr,ya,Z,Ur,vt,Br,Vr,gt,Fr,Jr,bt,Wr,Kr,qa,is,wa,J,Yr,_t,Zr,Qr,xt,Xr,el,$t,sl,tl,jt,al,nl,Aa,us,za,ps,Da,re,rl,Et,ll,ol,Is,il,ul,Pa,ds,Ca,ms,ka,qe,Ia,Q,pl,yt,dl,ml,qt,cl,fl,wt,hl,vl,Ta,cs,Ma,fs,Oa,W,gl,At,bl,_l,zt,xl,$l,Dt,jl,El,Pt,yl,ql,Ra,hs,Na,vs,Sa,we,wl,Ct,Al,zl,La,gs,Ga,H,Dl,kt,Pl,Cl,It,kl,Il,Tt,Tl,Ml,Mt,Ol,Rl,Ot,Nl,Sl,Ha,bs,Ua,_s,Ba,le,Ll,Rt,Gl,Hl,Nt,Ul,Bl,Va,xs,Fa,$s,Ja,oe,Vl,St,Fl,Jl,Lt,Wl,Kl,Wa,Ae,Yl,Gt,Zl,Ql,Ka,js,Ya,Es,Za,ze,Qa,Ts,Xl,Xa;return f=new un({}),T=new Ii({props:{classNames:"absolute z-10 right-0 top-0",options:[{label:"Google Colab",value:"https://colab.research.google.com/github/huggingface/notebooks/blob/master/course/chapter5/section4.ipynb"},{label:"Aws Studio",value:"https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/master/course/chapter5/section4.ipynb"}]}}),Ie=new ki({props:{id:"JwISwTCPPWo"}}),Me=new un({}),He=new A({props:{code:"!pip install zstandard",highlighted:"!pip install zstandard"}}),Ue=new A({props:{code:`from datasets import load_dataset

# Cela prend quelques minutes \xE0 ex\xE9cuter, alors allez prendre un th\xE9 ou un caf\xE9 en attendant :)
data_files = "https://mystic.the-eye.eu/public/AI/pile_preliminary_components/PUBMED_title_abstracts_2019_baseline.jsonl.zst"
pubmed_dataset = load_dataset("json", data_files=data_files, split="train")
pubmed_dataset`,highlighted:`<span class="hljs-keyword">from</span> datasets <span class="hljs-keyword">import</span> load_dataset

<span class="hljs-comment"># Cela prend quelques minutes \xE0 ex\xE9cuter, alors allez prendre un th\xE9 ou un caf\xE9 en attendant :)</span>
data_files = <span class="hljs-string">&quot;https://mystic.the-eye.eu/public/AI/pile_preliminary_components/PUBMED_title_abstracts_2019_baseline.jsonl.zst&quot;</span>
pubmed_dataset = load_dataset(<span class="hljs-string">&quot;json&quot;</span>, data_files=data_files, split=<span class="hljs-string">&quot;train&quot;</span>)
pubmed_dataset`}}),Be=new A({props:{code:`Dataset({
    features: ['meta', 'text'],
    num_rows: 15518009
})`,highlighted:`Dataset({
    features: [<span class="hljs-string">&#x27;meta&#x27;</span>, <span class="hljs-string">&#x27;text&#x27;</span>],
    num_rows: <span class="hljs-number">15518009</span>
})`}}),_e=new Vt({props:{$$slots:{default:[Ti]},$$scope:{ctx:K}}}),Ve=new A({props:{code:"pubmed_dataset[0]",highlighted:'pubmed_dataset[<span class="hljs-number">0</span>]'}}),Fe=new A({props:{code:`{'meta': {'pmid': 11409574, 'language': 'eng'},
 'text': 'Epidemiology of hypoxaemia in children with acute lower respiratory infection.\\nTo determine the prevalence of hypoxaemia in children aged under 5 years suffering acute lower respiratory infections (ALRI), the risk factors for hypoxaemia in children under 5 years of age with ALRI, and the association of hypoxaemia with an increased risk of dying in children of the same age ...'
# \xC9pid\xE9miologie de l'hypox\xE9mie chez les enfants souffrant d'une infection aigu\xEB des voies respiratoires inf\xE9rieures. D\xE9terminer la pr\xE9valence de l'hypox\xE9mie chez les enfants de moins de 5 ans souffrant d'une infection aigu\xEB des voies respiratoires inf\xE9rieures (IAVI), les facteurs de risque de l'hypox\xE9mie chez les enfants de moins de 5 ans souffrant d'une IAVI, et l'association de l'hypox\xE9mie \xE0 un risque accru de d\xE9c\xE8s chez les enfants du m\xEAme \xE2ge ...
}`,highlighted:`{<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11409574</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
 <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;Epidemiology of hypoxaemia in children with acute lower respiratory infection.\\nTo determine the prevalence of hypoxaemia in children aged under 5 years suffering acute lower respiratory infections (ALRI), the risk factors for hypoxaemia in children under 5 years of age with ALRI, and the association of hypoxaemia with an increased risk of dying in children of the same age ...&#x27;</span>
<span class="hljs-comment"># \xC9pid\xE9miologie de l&#x27;hypox\xE9mie chez les enfants souffrant d&#x27;une infection aigu\xEB des voies respiratoires inf\xE9rieures. D\xE9terminer la pr\xE9valence de l&#x27;hypox\xE9mie chez les enfants de moins de 5 ans souffrant d&#x27;une infection aigu\xEB des voies respiratoires inf\xE9rieures (IAVI), les facteurs de risque de l&#x27;hypox\xE9mie chez les enfants de moins de 5 ans souffrant d&#x27;une IAVI, et l&#x27;association de l&#x27;hypox\xE9mie \xE0 un risque accru de d\xE9c\xE8s chez les enfants du m\xEAme \xE2ge ...</span>
}`}}),Je=new un({}),Ke=new A({props:{code:"!pip install psutil",highlighted:"!pip install psutil"}}),Ye=new A({props:{code:`import psutil

# Process.memory_info est exprim\xE9 en octets, donc convertir en m\xE9gaoctets
print(f"RAM used: {psutil.Process().memory_info().rss / (1024 * 1024):.2f} MB")`,highlighted:`<span class="hljs-keyword">import</span> psutil

<span class="hljs-comment"># Process.memory_info est exprim\xE9 en octets, donc convertir en m\xE9gaoctets</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;RAM used: <span class="hljs-subst">{psutil.Process().memory_info().rss / (<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>):<span class="hljs-number">.2</span>f}</span> MB&quot;</span>)`}}),Ze=new A({props:{code:"RAM used: 5678.33 MB",highlighted:'RAM used: <span class="hljs-number">5678.33</span> MB'}}),Qe=new A({props:{code:`print(f"Number of files in dataset : {pubmed_dataset.dataset_size}")
size_gb = pubmed_dataset.dataset_size / (1024**3)
print(f"Dataset size (cache file) : {size_gb:.2f} GB")`,highlighted:`<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Number of files in dataset : <span class="hljs-subst">{pubmed_dataset.dataset_size}</span>&quot;</span>)
size_gb = pubmed_dataset.dataset_size / (<span class="hljs-number">1024</span>**<span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Dataset size (cache file) : <span class="hljs-subst">{size_gb:<span class="hljs-number">.2</span>f}</span> GB&quot;</span>)`}}),Xe=new A({props:{code:`Number of files in dataset : 20979437051
Dataset size (cache file) : 19.54 GB`,highlighted:`Number of files <span class="hljs-keyword">in</span> dataset : <span class="hljs-number">20979437051</span>
Dataset size (cache file) : <span class="hljs-number">19.54</span> GB`}}),je=new Vt({props:{$$slots:{default:[Mi]},$$scope:{ctx:K}}}),rs=new A({props:{code:`import timeit

code_snippet = """batch_size = 1000

for idx in range(0, len(pubmed_dataset), batch_size):
    _ = pubmed_dataset[idx:idx + batch_size]
"""

time = timeit.timeit(stmt=code_snippet, number=1, globals=globals())
print(
    f"Iterated over {len(pubmed_dataset)} examples (about {size_gb:.1f} GB) in "
    f"{time:.1f}s, i.e. {size_gb/time:.3f} GB/s"
)`,highlighted:`<span class="hljs-keyword">import</span> timeit

code_snippet = <span class="hljs-string">&quot;&quot;&quot;batch_size = 1000

for idx in range(0, len(pubmed_dataset), batch_size):
    _ = pubmed_dataset[idx:idx + batch_size]
&quot;&quot;&quot;</span>

time = timeit.timeit(stmt=code_snippet, number=<span class="hljs-number">1</span>, <span class="hljs-built_in">globals</span>=<span class="hljs-built_in">globals</span>())
<span class="hljs-built_in">print</span>(
    <span class="hljs-string">f&quot;Iterated over <span class="hljs-subst">{<span class="hljs-built_in">len</span>(pubmed_dataset)}</span> examples (about <span class="hljs-subst">{size_gb:<span class="hljs-number">.1</span>f}</span> GB) in &quot;</span>
    <span class="hljs-string">f&quot;<span class="hljs-subst">{time:<span class="hljs-number">.1</span>f}</span>s, i.e. <span class="hljs-subst">{size_gb/time:<span class="hljs-number">.3</span>f}</span> GB/s&quot;</span>
)`}}),ls=new A({props:{code:"'Iterated over 15518009 examples (about 19.5 GB) in 64.2s, i.e. 0.304 GB/s'",highlighted:'<span class="hljs-string">&#x27;Iterated over 15518009 examples (about 19.5 GB) in 64.2s, i.e. 0.304 GB/s&#x27;</span>'}}),Ee=new Vt({props:{$$slots:{default:[Oi]},$$scope:{ctx:K}}}),os=new un({}),is=new A({props:{code:`pubmed_dataset_streamed = load_dataset(
    "json", data_files=data_files, split="train", streaming=True
)`,highlighted:`pubmed_dataset_streamed = load_dataset(
    <span class="hljs-string">&quot;json&quot;</span>, data_files=data_files, split=<span class="hljs-string">&quot;train&quot;</span>, streaming=<span class="hljs-literal">True</span>
)`}}),us=new A({props:{code:"next(iter(pubmed_dataset_streamed))",highlighted:'<span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(pubmed_dataset_streamed))'}}),ps=new A({props:{code:`{'meta': {'pmid': 11409574, 'language': 'eng'},
 'text': 'Epidemiology of hypoxaemia in children with acute lower respiratory infection.\\nTo determine the prevalence of hypoxaemia in children aged under 5 years suffering acute lower respiratory infections (ALRI), the risk factors for hypoxaemia in children under 5 years of age with ALRI, and the association of hypoxaemia with an increased risk of dying in children of the same age ...'}`,highlighted:`{<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11409574</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
 <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;Epidemiology of hypoxaemia in children with acute lower respiratory infection.\\nTo determine the prevalence of hypoxaemia in children aged under 5 years suffering acute lower respiratory infections (ALRI), the risk factors for hypoxaemia in children under 5 years of age with ALRI, and the association of hypoxaemia with an increased risk of dying in children of the same age ...&#x27;</span>}`}}),ds=new A({props:{code:`from transformers import AutoTokenizer

tokenizer = AutoTokenizer.from_pretrained("distilbert-base-uncased")
tokenized_dataset = pubmed_dataset_streamed.map(lambda x: tokenizer(x["text"]))
next(iter(tokenized_dataset))`,highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer

tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;distilbert-base-uncased&quot;</span>)
tokenized_dataset = pubmed_dataset_streamed.<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: tokenizer(x[<span class="hljs-string">&quot;text&quot;</span>]))
<span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(tokenized_dataset))`}}),ms=new A({props:{code:"{'input_ids': [101, 4958, 5178, 4328, 6779, ...], 'attention_mask': [1, 1, 1, 1, 1, ...]}",highlighted:'{<span class="hljs-string">&#x27;input_ids&#x27;</span>: [<span class="hljs-number">101</span>, <span class="hljs-number">4958</span>, <span class="hljs-number">5178</span>, <span class="hljs-number">4328</span>, <span class="hljs-number">6779</span>, ...], <span class="hljs-string">&#x27;attention_mask&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, ...]}'}}),qe=new Vt({props:{$$slots:{default:[Ri]},$$scope:{ctx:K}}}),cs=new A({props:{code:`shuffled_dataset = pubmed_dataset_streamed.shuffle(buffer_size=10_000, seed=42)
next(iter(shuffled_dataset))`,highlighted:`shuffled_dataset = pubmed_dataset_streamed.shuffle(buffer_size=<span class="hljs-number">10_000</span>, seed=<span class="hljs-number">42</span>)
<span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(shuffled_dataset))`}}),fs=new A({props:{code:`{'meta': {'pmid': 11410799, 'language': 'eng'},
 'text': 'Randomized study of dose or schedule modification of granulocyte colony-stimulating factor in platinum-based chemotherapy for elderly patients with lung cancer ...'
# \xC9tude randomis\xE9e sur la modification de la dose ou du calendrier d'administration du facteur de stimulation des colonies de granulocytes dans le cadre d'une chimioth\xE9rapie \xE0 base de platine chez les patients \xE2g\xE9s atteints de cancer du poumon ...
}`,highlighted:`{<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11410799</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
 <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;Randomized study of dose or schedule modification of granulocyte colony-stimulating factor in platinum-based chemotherapy for elderly patients with lung cancer ...&#x27;</span>
<span class="hljs-comment"># \xC9tude randomis\xE9e sur la modification de la dose ou du calendrier d&#x27;administration du facteur de stimulation des colonies de granulocytes dans le cadre d&#x27;une chimioth\xE9rapie \xE0 base de platine chez les patients \xE2g\xE9s atteints de cancer du poumon ...</span>
}`}}),hs=new A({props:{code:`dataset_head = pubmed_dataset_streamed.take(5)
list(dataset_head)`,highlighted:`dataset_head = pubmed_dataset_streamed.take(<span class="hljs-number">5</span>)
<span class="hljs-built_in">list</span>(dataset_head)`}}),vs=new A({props:{code:`[{'meta': {'pmid': 11409574, 'language': 'eng'},
  'text': 'Epidemiology of hypoxaemia in children with acute lower respiratory infection ...'
# \xC9pid\xE9miologie de l'hypox\xE9mie chez les enfants atteints d'une infection aigu\xEB des voies respiratoires inf\xE9rieures ...},
 {'meta': {'pmid': 11409575, 'language': 'eng'},
  'text': 'Clinical signs of hypoxaemia in children with acute lower respiratory infection: indicators of oxygen therapy ...'
# Signes cliniques d'hypox\xE9mie chez les enfants atteints d'une infection aigu\xEB des voies respiratoires inf\xE9rieures : indicateurs de l'oxyg\xE9noth\xE9rapie ...},
 {'meta': {'pmid': 11409576, 'language': 'eng'},
  'text': "Hypoxaemia in children with severe pneumonia in Papua New Guinea ..."
# Hypox\xE9mie chez les enfants atteints de pneumonie grave en Papouasie-Nouvelle-Guin\xE9e ...},
 {'meta': {'pmid': 11409577, 'language': 'eng'},
  'text': 'Oxygen concentrators and cylinders ...'
# Concentrateurs et bouteilles d'oxyg\xE8ne...},
 {'meta': {'pmid': 11409578, 'language': 'eng'},
  'text': 'Oxygen supply in rural africa: a personal experience ...'
# L'approvisionnement en oxyg\xE8ne dans les zones rurales africaines : une exp\xE9rience personnelle ...}]`,highlighted:`[{<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11409574</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
  <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;Epidemiology of hypoxaemia in children with acute lower respiratory infection ...&#x27;</span>
<span class="hljs-comment"># \xC9pid\xE9miologie de l&#x27;hypox\xE9mie chez les enfants atteints d&#x27;une infection aigu\xEB des voies respiratoires inf\xE9rieures ...},</span>
 {<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11409575</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
  <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;Clinical signs of hypoxaemia in children with acute lower respiratory infection: indicators of oxygen therapy ...&#x27;</span>
<span class="hljs-comment"># Signes cliniques d&#x27;hypox\xE9mie chez les enfants atteints d&#x27;une infection aigu\xEB des voies respiratoires inf\xE9rieures : indicateurs de l&#x27;oxyg\xE9noth\xE9rapie ...},</span>
 {<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11409576</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
  <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&quot;Hypoxaemia in children with severe pneumonia in Papua New Guinea ...&quot;</span>
<span class="hljs-comment"># Hypox\xE9mie chez les enfants atteints de pneumonie grave en Papouasie-Nouvelle-Guin\xE9e ...},</span>
 {<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11409577</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
  <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;Oxygen concentrators and cylinders ...&#x27;</span>
<span class="hljs-comment"># Concentrateurs et bouteilles d&#x27;oxyg\xE8ne...},</span>
 {<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11409578</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
  <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;Oxygen supply in rural africa: a personal experience ...&#x27;</span>
<span class="hljs-comment"># L&#x27;approvisionnement en oxyg\xE8ne dans les zones rurales africaines : une exp\xE9rience personnelle ...}]</span>`}}),gs=new A({props:{code:`# Ignorer les 1 000 premiers exemples et inclure le reste dans l'ensemble d'apprentissage.
train_dataset = shuffled_dataset.skip(1000)
# Prendre les 1 000 premiers exemples pour l'ensemble de validation.
validation_dataset = shuffled_dataset.take(1000)`,highlighted:`<span class="hljs-comment"># Ignorer les 1 000 premiers exemples et inclure le reste dans l&#x27;ensemble d&#x27;apprentissage.</span>
train_dataset = shuffled_dataset.skip(<span class="hljs-number">1000</span>)
<span class="hljs-comment"># Prendre les 1 000 premiers exemples pour l&#x27;ensemble de validation.</span>
validation_dataset = shuffled_dataset.take(<span class="hljs-number">1000</span>)`}}),bs=new A({props:{code:`law_dataset_streamed = load_dataset(
    "json",
    data_files="https://mystic.the-eye.eu/public/AI/pile_preliminary_components/FreeLaw_Opinions.jsonl.zst",
    split="train",
    streaming=True,
)
next(iter(law_dataset_streamed))`,highlighted:`law_dataset_streamed = load_dataset(
    <span class="hljs-string">&quot;json&quot;</span>,
    data_files=<span class="hljs-string">&quot;https://mystic.the-eye.eu/public/AI/pile_preliminary_components/FreeLaw_Opinions.jsonl.zst&quot;</span>,
    split=<span class="hljs-string">&quot;train&quot;</span>,
    streaming=<span class="hljs-literal">True</span>,
)
<span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(law_dataset_streamed))`}}),_s=new A({props:{code:`{'meta': {'case_ID': '110921.json',
  'case_jurisdiction': 'scotus.tar.gz',
  'date_created': '2010-04-28T17:12:49Z'},
 'text': '\\n461 U.S. 238 (1983)\\nOLIM ET AL.\\nv.\\nWAKINEKONA\\nNo. 81-1581.\\nSupreme Court of United States.\\nArgued January 19, 1983.\\nDecided April 26, 1983.\\nCERTIORARI TO THE UNITED STATES COURT OF APPEALS FOR THE NINTH CIRCUIT\\n*239 Michael A. Lilly, First Deputy Attorney General of Hawaii, argued the cause for petitioners. With him on the brief was James H. Dannenberg, Deputy Attorney General...'}`,highlighted:`{<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;case_ID&#x27;</span>: <span class="hljs-string">&#x27;110921.json&#x27;</span>,
  <span class="hljs-string">&#x27;case_jurisdiction&#x27;</span>: <span class="hljs-string">&#x27;scotus.tar.gz&#x27;</span>,
  <span class="hljs-string">&#x27;date_created&#x27;</span>: <span class="hljs-string">&#x27;2010-04-28T17:12:49Z&#x27;</span>},
 <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;\\n461 U.S. 238 (1983)\\nOLIM ET AL.\\nv.\\nWAKINEKONA\\nNo. 81-1581.\\nSupreme Court of United States.\\nArgued January 19, 1983.\\nDecided April 26, 1983.\\nCERTIORARI TO THE UNITED STATES COURT OF APPEALS FOR THE NINTH CIRCUIT\\n*239 Michael A. Lilly, First Deputy Attorney General of Hawaii, argued the cause for petitioners. With him on the brief was James H. Dannenberg, Deputy Attorney General...&#x27;</span>}`}}),xs=new A({props:{code:`from itertools import islice
from datasets import interleave_datasets

combined_dataset = interleave_datasets([pubmed_dataset_streamed, law_dataset_streamed])
list(islice(combined_dataset, 2))`,highlighted:`<span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> islice
<span class="hljs-keyword">from</span> datasets <span class="hljs-keyword">import</span> interleave_datasets

combined_dataset = interleave_datasets([pubmed_dataset_streamed, law_dataset_streamed])
<span class="hljs-built_in">list</span>(islice(combined_dataset, <span class="hljs-number">2</span>))`}}),$s=new A({props:{code:`[{'meta': {'pmid': 11409574, 'language': 'eng'},
  'text': 'Epidemiology of hypoxaemia in children with acute lower respiratory infection ...'},
 {'meta': {'case_ID': '110921.json',
   'case_jurisdiction': 'scotus.tar.gz',
   'date_created': '2010-04-28T17:12:49Z'},
  'text': '\\n461 U.S. 238 (1983)\\nOLIM ET AL.\\nv.\\nWAKINEKONA\\nNo. 81-1581.\\nSupreme Court of United States.\\nArgued January 19, 1983.\\nDecided April 26, 1983.\\nCERTIORARI TO THE UNITED STATES COURT OF APPEALS FOR THE NINTH CIRCUIT\\n*239 Michael A. Lilly, First Deputy Attorney General of Hawaii, argued the cause for petitioners. With him on the brief was James H. Dannenberg, Deputy Attorney General...'}]`,highlighted:`[{<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pmid&#x27;</span>: <span class="hljs-number">11409574</span>, <span class="hljs-string">&#x27;language&#x27;</span>: <span class="hljs-string">&#x27;eng&#x27;</span>},
  <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;Epidemiology of hypoxaemia in children with acute lower respiratory infection ...&#x27;</span>},
 {<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;case_ID&#x27;</span>: <span class="hljs-string">&#x27;110921.json&#x27;</span>,
   <span class="hljs-string">&#x27;case_jurisdiction&#x27;</span>: <span class="hljs-string">&#x27;scotus.tar.gz&#x27;</span>,
   <span class="hljs-string">&#x27;date_created&#x27;</span>: <span class="hljs-string">&#x27;2010-04-28T17:12:49Z&#x27;</span>},
  <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;\\n461 U.S. 238 (1983)\\nOLIM ET AL.\\nv.\\nWAKINEKONA\\nNo. 81-1581.\\nSupreme Court of United States.\\nArgued January 19, 1983.\\nDecided April 26, 1983.\\nCERTIORARI TO THE UNITED STATES COURT OF APPEALS FOR THE NINTH CIRCUIT\\n*239 Michael A. Lilly, First Deputy Attorney General of Hawaii, argued the cause for petitioners. With him on the brief was James H. Dannenberg, Deputy Attorney General...&#x27;</span>}]`}}),js=new A({props:{code:`base_url = "https://mystic.the-eye.eu/public/AI/pile/"
data_files = {
    "train": [base_url + "train/" + f"{idx:02d}.jsonl.zst" for idx in range(30)],
    "validation": base_url + "val.jsonl.zst",
    "test": base_url + "test.jsonl.zst",
}
pile_dataset = load_dataset("json", data_files=data_files, streaming=True)
next(iter(pile_dataset["train"]))`,highlighted:`base_url = <span class="hljs-string">&quot;https://mystic.the-eye.eu/public/AI/pile/&quot;</span>
data_files = {
    <span class="hljs-string">&quot;train&quot;</span>: [base_url + <span class="hljs-string">&quot;train/&quot;</span> + <span class="hljs-string">f&quot;<span class="hljs-subst">{idx:02d}</span>.jsonl.zst&quot;</span> <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">30</span>)],
    <span class="hljs-string">&quot;validation&quot;</span>: base_url + <span class="hljs-string">&quot;val.jsonl.zst&quot;</span>,
    <span class="hljs-string">&quot;test&quot;</span>: base_url + <span class="hljs-string">&quot;test.jsonl.zst&quot;</span>,
}
pile_dataset = load_dataset(<span class="hljs-string">&quot;json&quot;</span>, data_files=data_files, streaming=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(pile_dataset[<span class="hljs-string">&quot;train&quot;</span>]))`}}),Es=new A({props:{code:`{'meta': {'pile_set_name': 'Pile-CC'},
 'text': 'It is done, and submitted. You can play \u201CSurvival of the Tastiest\u201D on Android, and on the web...'}`,highlighted:`{<span class="hljs-string">&#x27;meta&#x27;</span>: {<span class="hljs-string">&#x27;pile_set_name&#x27;</span>: <span class="hljs-string">&#x27;Pile-CC&#x27;</span>},
 <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;It is done, and submitted. You can play \u201CSurvival of the Tastiest\u201D on Android, and on the web...&#x27;</span>}`}}),ze=new Vt({props:{$$slots:{default:[Ni]},$$scope:{ctx:K}}}),{c(){p=l("meta"),I=d(),h=l("h1"),w=l("a"),C=l("span"),v(f.$$.fragment),z=d(),D=l("span"),y=a("Donn\xE9es massives ? \u{1F917} "),j=l("i"),q=a("Datasets"),k=a(" \xE0 la rescousse !"),N=d(),v(T.$$.fragment),E=d(),O=l("p"),B=a("De nos jours, il n\u2019est pas rare de travailler avec des jeux de donn\xE9es de plusieurs gigaoctets surtout si vous envisagez de pr\xE9-entra\xEEner un "),S=l("em"),P=a("transformer"),M=a(" comme BERT ou GPT-2 \xE0 partir de z\xE9ro. Dans ces cas, m\xEAme "),se=l("em"),me=a("charger"),ce=a(" les donn\xE9es peut \xEAtre un d\xE9fi. Par exemple, le corpus WebText utilis\xE9 pour pr\xE9-entra\xEEner GPT-2 se compose de plus de 8 millions de documents et de 40 Go de texte. Le charger dans la RAM de votre ordinateur portable est susceptible de lui donner une crise cardiaque !"),te=d(),U=l("p"),ws=a("Heureusement, \u{1F917} "),Gs=l("em"),pn=a("Datasets"),dn=a(" a \xE9t\xE9 con\xE7u pour surmonter ces limitations. Il vous lib\xE8re des probl\xE8mes de gestion de la m\xE9moire en traitant les jeux de donn\xE9es comme des fichiers "),Hs=l("em"),mn=a("mapp\xE9s en m\xE9moire"),cn=a(", ainsi que des limites du disque dur en faisant du "),Us=l("em"),fn=a("streaming"),hn=a(" sur les entr\xE9es dans un corpus."),Ft=d(),v(Ie.$$.fragment),Jt=d(),ae=l("p"),vn=a("Dans cette section, nous allons explorer ces fonctionnalit\xE9s de \u{1F917} "),Bs=l("em"),gn=a("Datasets"),bn=a(" avec un \xE9norme corpus de 825 Go connu sous le nom de "),Te=l("a"),Vs=l("em"),_n=a("The Pile"),xn=a(". Commen\xE7ons !"),Wt=d(),fe=l("h2"),ge=l("a"),Fs=l("span"),v(Me.$$.fragment),$n=d(),Oe=l("span"),jn=a("Qu'est-ce que "),Js=l("i"),En=a("The Pile"),yn=a(" ?"),Kt=d(),R=l("p"),Ws=l("em"),qn=a("The Pile"),wn=a(" est un corpus de texte en anglais cr\xE9\xE9 par "),Re=l("a"),An=a("EleutherAI"),zn=a(" pour entra\xEEner des mod\xE8les de langage \xE0 grande \xE9chelle. Il comprend une gamme vari\xE9e de jeux de donn\xE9es, couvrant des articles scientifiques, des r\xE9f\xE9rentiels de code GitHub et du texte Web filtr\xE9. Le corpus d\u2019entra\xEEnement est disponible en "),Ne=l("a"),Dn=a("morceaux de 14 Go"),Pn=a(" et vous pouvez aussi t\xE9l\xE9charger plusieurs des "),Se=l("a"),Cn=a("composants individuels"),kn=a(". Commen\xE7ons par jeter un coup d\u2019\u0153il au jeu de donn\xE9es "),Ks=l("em"),In=a("PubMed Abstracts"),Tn=a(", qui est un corpus de r\xE9sum\xE9s de 15 millions de publications biom\xE9dicales sur "),Le=l("a"),Mn=a("PubMed"),On=a(". Le jeu de donn\xE9es est au "),Ge=l("a"),Rn=a("format JSON Lines"),Nn=a(" et est compress\xE9 \xE0 l\u2019aide de la biblioth\xE8que "),Ys=l("code"),Sn=a("zstandard"),Ln=a(". Nous devons donc d\u2019abord installer cette biblioth\xE8que :"),Yt=d(),v(He.$$.fragment),Zt=d(),be=l("p"),Gn=a("Ensuite, nous pouvons charger le jeu de donn\xE9es en utilisant la m\xE9thode pour les fichiers distants que nous avons apprise dans "),As=l("a"),Hn=a("section 2"),Un=a(" :"),Qt=d(),v(Ue.$$.fragment),Xt=d(),v(Be.$$.fragment),ea=d(),zs=l("p"),Bn=a("Nous pouvons voir qu\u2019il y a 15 518 009 lignes et 2 colonnes dans notre jeu de donn\xE9es. C\u2019est beaucoup !"),sa=d(),v(_e.$$.fragment),ta=d(),Ds=l("p"),Vn=a("Inspectons le contenu du premier exemple :"),aa=d(),v(Ve.$$.fragment),na=d(),v(Fe.$$.fragment),ra=d(),Ps=l("p"),Fn=a("Cela ressemble au r\xE9sum\xE9 d\u2019un article m\xE9dical. Voyons maintenant combien de RAM nous avons utilis\xE9 pour charger le jeu de donn\xE9es !"),la=d(),he=l("h2"),xe=l("a"),Zs=l("span"),v(Je.$$.fragment),Jn=d(),Cs=l("span"),Wn=a("La magie du "),Qs=l("i"),Kn=a("memory mapping"),oa=d(),ne=l("p"),Yn=a("Un moyen simple de mesurer l\u2019utilisation de la m\xE9moire dans Python consiste \xE0 utiliser la biblioth\xE8que "),We=l("a"),Xs=l("code"),Zn=a("psutil"),Qn=a(" qui peut \xEAtre install\xE9e avec "),et=l("code"),Xn=a("pip"),er=a(" comme suit :"),ia=d(),v(Ke.$$.fragment),ua=d(),$e=l("p"),sr=a("Elle fournit une classe "),st=l("code"),tr=a("Process"),ar=a(" qui permet de v\xE9rifier l\u2019utilisation de la m\xE9moire du processus en cours :"),pa=d(),v(Ye.$$.fragment),da=d(),v(Ze.$$.fragment),ma=d(),Y=l("p"),nr=a("Ici, l\u2019attribut "),tt=l("code"),rr=a("rss"),lr=a(" fait r\xE9f\xE9rence \xE0 la "),at=l("em"),or=a("taille de l\u2019ensemble r\xE9sident"),ir=a(", qui est la fraction de m\xE9moire qu\u2019un processus occupe dans la RAM. Cette mesure inclut \xE9galement la m\xE9moire utilis\xE9e par l\u2019interpr\xE9teur Python et les biblioth\xE8ques que nous avons charg\xE9es, de sorte que la quantit\xE9 r\xE9elle de m\xE9moire utilis\xE9e pour charger le jeu de donn\xE9es est un peu plus petite. \xC0 titre de comparaison, voyons la taille du jeu de donn\xE9es sur le disque en utilisant l\u2019attribut "),nt=l("code"),ur=a("dataset_size"),pr=a(". Comme le r\xE9sultat est exprim\xE9 en octets comme pr\xE9c\xE9demment, nous devons le convertir manuellement en gigaoctets :"),ca=d(),v(Qe.$$.fragment),fa=d(),v(Xe.$$.fragment),ha=d(),ks=l("p"),dr=a("Malgr\xE9 sa taille de pr\xE8s de 20 Go, nous pouvons charger et acc\xE9der au jeu de donn\xE9es avec beaucoup moins de RAM !"),va=d(),v(je.$$.fragment),ga=d(),V=l("p"),mr=a("Si vous \xEAtes familier avec Pandas, ce r\xE9sultat pourrait surprendre en raison de la c\xE9l\xE8bre "),es=l("a"),cr=a("r\xE8gle d\u2019or"),fr=a(" de Wes Kinney selon laquelle vous avez g\xE9n\xE9ralement besoin de 5 \xE0 10 fois plus de RAM que la taille de votre jeu de donn\xE9es. Alors, comment \u{1F917} "),rt=l("em"),hr=a("Datasets"),vr=a(" r\xE9sout-il ce probl\xE8me de gestion de la m\xE9moire ? \u{1F917} "),lt=l("em"),gr=a("Datasets"),br=a(" traite chaque jeu de donn\xE9es comme un "),ss=l("a"),_r=a("fichier mapp\xE9 en m\xE9moire"),xr=a(". Cela fournit un mappage entre la RAM et le stockage du syst\xE8me de fichiers permettant \xE0 la biblioth\xE8que d\u2019acc\xE9der et d\u2019op\xE9rer sur des \xE9l\xE9ments du jeu de donn\xE9es sans avoir besoin de le charger enti\xE8rement en m\xE9moire."),ba=d(),G=l("p"),$r=a("Les fichiers mapp\xE9s en m\xE9moire peuvent \xE9galement \xEAtre partag\xE9s entre plusieurs processus ce qui permet de parall\xE9liser des m\xE9thodes telles que "),ot=l("code"),jr=a("Dataset.map()"),Er=a(" sans avoir \xE0 d\xE9placer ou copier le jeu de donn\xE9es. Sous le capot, ces capacit\xE9s sont toutes r\xE9alis\xE9es par le format de m\xE9moire "),ts=l("a"),yr=a("Apache Arrow"),qr=a(" et "),as=l("a"),it=l("code"),wr=a("pyarrow"),Ar=a(", qui acc\xE9l\xE8rent le chargement et le traitement des donn\xE9es. (Pour plus de d\xE9tails sur Apache Arrow et les comparaisons avec Pandas, consultez "),ns=l("a"),zr=a("l\u2019article de blog de Dejan Simic"),Dr=a("). Pour voir ceci en action, effectuons un petit test de vitesse en it\xE9rant sur tous les \xE9l\xE9ments du jeu de donn\xE9es "),ut=l("em"),Pr=a("PubMed Abstracts"),Cr=a(" :"),_a=d(),v(rs.$$.fragment),xa=d(),v(ls.$$.fragment),$a=d(),F=l("p"),kr=a("Ici, nous avons utilis\xE9 le module "),pt=l("code"),Ir=a("timeit"),Tr=a(" de Python pour mesurer le temps d\u2019ex\xE9cution pris par "),dt=l("code"),Mr=a("code_snippet"),Or=a(". Vous pourrez g\xE9n\xE9ralement it\xE9rer sur un jeu de donn\xE9es \xE0 une vitesse de quelques dixi\xE8mes de Go/s \xE0 plusieurs Go/s. Cela fonctionne tr\xE8s bien pour la grande majorit\xE9 des applications, mais vous devrez parfois travailler avec un jeu de donn\xE9es trop volumineux pour \xEAtre m\xEAme stock\xE9 sur le disque dur de votre ordinateur portable. Par exemple, si nous essayions de t\xE9l\xE9charger "),mt=l("em"),Rr=a("The Pile"),Nr=a(" dans son int\xE9gralit\xE9, nous aurions besoin de 825 Go d\u2019espace disque libre ! Pour g\xE9rer ces cas, \u{1F917} "),ct=l("em"),Sr=a("Datasets"),Lr=a(" fournit une fonctionnalit\xE9 de streaming qui nous permet de t\xE9l\xE9charger et d\u2019acc\xE9der aux \xE9l\xE9ments \xE0 la vol\xE9e, sans avoir besoin de t\xE9l\xE9charger l\u2019int\xE9gralit\xE9 du jeu de donn\xE9es. Voyons comment cela fonctionne."),ja=d(),v(Ee.$$.fragment),Ea=d(),ve=l("h2"),ye=l("a"),ft=l("span"),v(os.$$.fragment),Gr=d(),ht=l("span"),Hr=a("Jeux de donn\xE9es en continu"),ya=d(),Z=l("p"),Ur=a("Pour activer le streaming du jeu de donn\xE9es, il vous suffit de passer l\u2019argument "),vt=l("code"),Br=a("streaming=True"),Vr=a(" \xE0 la fonction "),gt=l("code"),Fr=a("load_dataset()"),Jr=a(". Par exemple, chargeons \xE0 nouveau le jeu de donn\xE9es "),bt=l("em"),Wr=a("PubMed Abstracts"),Kr=a(" mais en mode streaming :"),qa=d(),v(is.$$.fragment),wa=d(),J=l("p"),Yr=a("Au lieu du familier "),_t=l("code"),Zr=a("Dataset"),Qr=a(" que nous avons rencontr\xE9 ailleurs dans ce chapitre, l\u2019objet retourn\xE9 avec "),xt=l("code"),Xr=a("streaming=True"),el=a(" est un "),$t=l("code"),sl=a("IterableDataset"),tl=a(". Comme son nom l\u2019indique, pour acc\xE9der aux \xE9l\xE9ments d\u2019un "),jt=l("code"),al=a("IterableDataset"),nl=a(", nous devons parcourir celui-ci. Nous pouvons acc\xE9der au premier \xE9l\xE9ment de notre jeu de donn\xE9es diffus\xE9 comme suit :"),Aa=d(),v(us.$$.fragment),za=d(),v(ps.$$.fragment),Da=d(),re=l("p"),rl=a("Les \xE9l\xE9ments d\u2019un jeu de donn\xE9es diffus\xE9 en continu peuvent \xEAtre trait\xE9s \xE0 la vol\xE9e \xE0 l\u2019aide de "),Et=l("code"),ll=a("IterableDataset.map()"),ol=a(", ce qui est utile pendant l\u2019entra\xEEnement si vous avez besoin de tokeniser les entr\xE9es. Le processus est exactement le m\xEAme que celui que nous avons utilis\xE9 pour tokeniser notre jeu de donn\xE9es dans le "),Is=l("a"),il=a("chapitre 3"),ul=a(", \xE0 la seule diff\xE9rence que les sorties sont renvoy\xE9es une par une :"),Pa=d(),v(ds.$$.fragment),Ca=d(),v(ms.$$.fragment),ka=d(),v(qe.$$.fragment),Ia=d(),Q=l("p"),pl=a("Vous pouvez \xE9galement m\xE9langer un jeu de donn\xE9es diffus\xE9 en continu \xE0 l\u2019aide de "),yt=l("code"),dl=a("IterableDataset.shuffle()"),ml=a(", mais contrairement \xE0 "),qt=l("code"),cl=a("Dataset.shuffle()"),fl=a(", cela ne m\xE9lange que les \xE9l\xE9ments dans un "),wt=l("code"),hl=a("buffer_size"),vl=a(" pr\xE9d\xE9fini :"),Ta=d(),v(cs.$$.fragment),Ma=d(),v(fs.$$.fragment),Oa=d(),W=l("p"),gl=a("Dans cet exemple, nous avons s\xE9lectionn\xE9 un exemple al\xE9atoire parmi les 10 000 premiers exemples du tampon. Une fois qu\u2019un exemple est acc\xE9d\xE9, sa place dans le tampon est remplie avec l\u2019exemple suivant dans le corpus (c\u2019est-\xE0-dire le 10 001e exemple dans le cas ci-dessus). Vous pouvez \xE9galement s\xE9lectionner des \xE9l\xE9ments d\u2019un jeu de donn\xE9es diffus\xE9 en continu \xE0 l\u2019aide des fonctions "),At=l("code"),bl=a("IterableDataset.take()"),_l=a(" et "),zt=l("code"),xl=a("IterableDataset.skip()"),$l=a(", qui agissent de la m\xEAme mani\xE8re que "),Dt=l("code"),jl=a("Dataset.select()"),El=a(". Par exemple, pour s\xE9lectionner les 5 premiers exemples dans le jeu de donn\xE9es "),Pt=l("em"),yl=a("PubMed Abstracts"),ql=a(", nous pouvons proc\xE9der comme suit :"),Ra=d(),v(hs.$$.fragment),Na=d(),v(vs.$$.fragment),Sa=d(),we=l("p"),wl=a("De m\xEAme, vous pouvez utiliser la fonction "),Ct=l("code"),Al=a("IterableDataset.skip()"),zl=a(" pour cr\xE9er des fractionnements d\u2019entra\xEEnement et de validation \xE0 partir d\u2019un jeu de donn\xE9es m\xE9lang\xE9 comme suit :"),La=d(),v(gs.$$.fragment),Ga=d(),H=l("p"),Dl=a("Terminons notre exploration du streaming des jeux de donn\xE9es avec une application commune : combiner plusieurs jeux de donn\xE9es pour cr\xE9er un seul corpus. \u{1F917} "),kt=l("em"),Pl=a("Datasets"),Cl=a(" fournit une fonction "),It=l("code"),kl=a("interleave_datasets()"),Il=a(" qui convertit une liste d\u2019objets "),Tt=l("code"),Tl=a("IterableDataset"),Ml=a(" en un seul "),Mt=l("code"),Ol=a("IterableDataset"),Rl=a(", o\xF9 les \xE9l\xE9ments du nouveau jeu de donn\xE9es sont obtenus en alternant entre les exemples source. Cette fonction est particuli\xE8rement utile lorsque vous essayez de combiner de grands jeux de donn\xE9es. Par exemple, streamons FreeLaw, un sous-ensemble de "),Ot=l("em"),Nl=a("The Pile"),Sl=a(" et qui est un jeu de donn\xE9es de 51 Go d\u2019avis juridiques de tribunaux am\xE9ricains :"),Ha=d(),v(bs.$$.fragment),Ua=d(),v(_s.$$.fragment),Ba=d(),le=l("p"),Ll=a("Ce jeu de donn\xE9es est suffisamment volumineux pour solliciter la RAM de la plupart des ordinateurs portables, mais nous avons pu le charger et y acc\xE9der sans transpirer ! Combinons maintenant les jeux de donn\xE9es FreeLaw et "),Rt=l("em"),Gl=a("PubMed Abstracts"),Hl=a(" avec la fonction "),Nt=l("code"),Ul=a("interleave_datasets()"),Bl=a(" :"),Va=d(),v(xs.$$.fragment),Fa=d(),v($s.$$.fragment),Ja=d(),oe=l("p"),Vl=a("Ici, nous avons utilis\xE9 la fonction "),St=l("code"),Fl=a("islice()"),Jl=a(" du module "),Lt=l("code"),Wl=a("itertools"),Kl=a(" de Python pour s\xE9lectionner les deux premiers exemples du jeu de donn\xE9es combin\xE9. Nous pouvons voir qu\u2019ils correspondent aux premiers exemples de chacun des deux jeux de donn\xE9es source."),Wa=d(),Ae=l("p"),Yl=a("Enfin, si vous souhaitez streamer "),Gt=l("em"),Zl=a("The Pile"),Ql=a(" dans son int\xE9gralit\xE9 de 825 Go, vous pouvez r\xE9cup\xE9rer tous les fichiers pr\xE9par\xE9s comme suit :"),Ka=d(),v(js.$$.fragment),Ya=d(),v(Es.$$.fragment),Za=d(),v(ze.$$.fragment),Qa=d(),Ts=l("p"),Xl=a("Vous disposez maintenant de tous les outils dont vous avez besoin pour charger et traiter des jeux de donn\xE9es de toutes formes et tailles. Cependant \xE0 moins que vous ne soyez exceptionnellement chanceux, il arrivera un moment dans votre cheminement en traitement du langage naturel o\xF9 vous devrez r\xE9ellement cr\xE9er un jeu de donn\xE9es pour r\xE9soudre un probl\xE8me donn\xE9. C\u2019est le sujet de la section suivante !"),this.h()},l(e){const r=Pi('[data-svelte="svelte-1phssyn"]',document.head);p=o(r,"META",{name:!0,content:!0}),r.forEach(t),I=m(e),h=o(e,"H1",{class:!0});var ys=i(h);w=o(ys,"A",{id:!0,class:!0,href:!0});var Ht=i(w);C=o(Ht,"SPAN",{});var Ut=i(C);g(f.$$.fragment,Ut),Ut.forEach(t),Ht.forEach(t),z=m(ys),D=o(ys,"SPAN",{});var qs=i(D);y=n(qs,"Donn\xE9es massives ? \u{1F917} "),j=o(qs,"I",{});var Bt=i(j);q=n(Bt,"Datasets"),Bt.forEach(t),k=n(qs," \xE0 la rescousse !"),qs.forEach(t),ys.forEach(t),N=m(e),g(T.$$.fragment,e),E=m(e),O=o(e,"P",{});var Ms=i(O);B=n(Ms,"De nos jours, il n\u2019est pas rare de travailler avec des jeux de donn\xE9es de plusieurs gigaoctets surtout si vous envisagez de pr\xE9-entra\xEEner un "),S=o(Ms,"EM",{});var so=i(S);P=n(so,"transformer"),so.forEach(t),M=n(Ms," comme BERT ou GPT-2 \xE0 partir de z\xE9ro. Dans ces cas, m\xEAme "),se=o(Ms,"EM",{});var to=i(se);me=n(to,"charger"),to.forEach(t),ce=n(Ms," les donn\xE9es peut \xEAtre un d\xE9fi. Par exemple, le corpus WebText utilis\xE9 pour pr\xE9-entra\xEEner GPT-2 se compose de plus de 8 millions de documents et de 40 Go de texte. Le charger dans la RAM de votre ordinateur portable est susceptible de lui donner une crise cardiaque !"),Ms.forEach(t),te=m(e),U=o(e,"P",{});var De=i(U);ws=n(De,"Heureusement, \u{1F917} "),Gs=o(De,"EM",{});var ao=i(Gs);pn=n(ao,"Datasets"),ao.forEach(t),dn=n(De," a \xE9t\xE9 con\xE7u pour surmonter ces limitations. Il vous lib\xE8re des probl\xE8mes de gestion de la m\xE9moire en traitant les jeux de donn\xE9es comme des fichiers "),Hs=o(De,"EM",{});var no=i(Hs);mn=n(no,"mapp\xE9s en m\xE9moire"),no.forEach(t),cn=n(De,", ainsi que des limites du disque dur en faisant du "),Us=o(De,"EM",{});var ro=i(Us);fn=n(ro,"streaming"),ro.forEach(t),hn=n(De," sur les entr\xE9es dans un corpus."),De.forEach(t),Ft=m(e),g(Ie.$$.fragment,e),Jt=m(e),ae=o(e,"P",{});var Os=i(ae);vn=n(Os,"Dans cette section, nous allons explorer ces fonctionnalit\xE9s de \u{1F917} "),Bs=o(Os,"EM",{});var lo=i(Bs);gn=n(lo,"Datasets"),lo.forEach(t),bn=n(Os," avec un \xE9norme corpus de 825 Go connu sous le nom de "),Te=o(Os,"A",{href:!0,rel:!0});var oo=i(Te);Vs=o(oo,"EM",{});var io=i(Vs);_n=n(io,"The Pile"),io.forEach(t),oo.forEach(t),xn=n(Os,". Commen\xE7ons !"),Os.forEach(t),Wt=m(e),fe=o(e,"H2",{class:!0});var en=i(fe);ge=o(en,"A",{id:!0,class:!0,href:!0});var uo=i(ge);Fs=o(uo,"SPAN",{});var po=i(Fs);g(Me.$$.fragment,po),po.forEach(t),uo.forEach(t),$n=m(en),Oe=o(en,"SPAN",{});var sn=i(Oe);jn=n(sn,"Qu'est-ce que "),Js=o(sn,"I",{});var mo=i(Js);En=n(mo,"The Pile"),mo.forEach(t),yn=n(sn," ?"),sn.forEach(t),en.forEach(t),Kt=m(e),R=o(e,"P",{});var L=i(R);Ws=o(L,"EM",{});var co=i(Ws);qn=n(co,"The Pile"),co.forEach(t),wn=n(L," est un corpus de texte en anglais cr\xE9\xE9 par "),Re=o(L,"A",{href:!0,rel:!0});var fo=i(Re);An=n(fo,"EleutherAI"),fo.forEach(t),zn=n(L," pour entra\xEEner des mod\xE8les de langage \xE0 grande \xE9chelle. Il comprend une gamme vari\xE9e de jeux de donn\xE9es, couvrant des articles scientifiques, des r\xE9f\xE9rentiels de code GitHub et du texte Web filtr\xE9. Le corpus d\u2019entra\xEEnement est disponible en "),Ne=o(L,"A",{href:!0,rel:!0});var ho=i(Ne);Dn=n(ho,"morceaux de 14 Go"),ho.forEach(t),Pn=n(L," et vous pouvez aussi t\xE9l\xE9charger plusieurs des "),Se=o(L,"A",{href:!0,rel:!0});var vo=i(Se);Cn=n(vo,"composants individuels"),vo.forEach(t),kn=n(L,". Commen\xE7ons par jeter un coup d\u2019\u0153il au jeu de donn\xE9es "),Ks=o(L,"EM",{});var go=i(Ks);In=n(go,"PubMed Abstracts"),go.forEach(t),Tn=n(L,", qui est un corpus de r\xE9sum\xE9s de 15 millions de publications biom\xE9dicales sur "),Le=o(L,"A",{href:!0,rel:!0});var bo=i(Le);Mn=n(bo,"PubMed"),bo.forEach(t),On=n(L,". Le jeu de donn\xE9es est au "),Ge=o(L,"A",{href:!0,rel:!0});var _o=i(Ge);Rn=n(_o,"format JSON Lines"),_o.forEach(t),Nn=n(L," et est compress\xE9 \xE0 l\u2019aide de la biblioth\xE8que "),Ys=o(L,"CODE",{});var xo=i(Ys);Sn=n(xo,"zstandard"),xo.forEach(t),Ln=n(L,". Nous devons donc d\u2019abord installer cette biblioth\xE8que :"),L.forEach(t),Yt=m(e),g(He.$$.fragment,e),Zt=m(e),be=o(e,"P",{});var tn=i(be);Gn=n(tn,"Ensuite, nous pouvons charger le jeu de donn\xE9es en utilisant la m\xE9thode pour les fichiers distants que nous avons apprise dans "),As=o(tn,"A",{href:!0});var $o=i(As);Hn=n($o,"section 2"),$o.forEach(t),Un=n(tn," :"),tn.forEach(t),Qt=m(e),g(Ue.$$.fragment,e),Xt=m(e),g(Be.$$.fragment,e),ea=m(e),zs=o(e,"P",{});var jo=i(zs);Bn=n(jo,"Nous pouvons voir qu\u2019il y a 15 518 009 lignes et 2 colonnes dans notre jeu de donn\xE9es. C\u2019est beaucoup !"),jo.forEach(t),sa=m(e),g(_e.$$.fragment,e),ta=m(e),Ds=o(e,"P",{});var Eo=i(Ds);Vn=n(Eo,"Inspectons le contenu du premier exemple :"),Eo.forEach(t),aa=m(e),g(Ve.$$.fragment,e),na=m(e),g(Fe.$$.fragment,e),ra=m(e),Ps=o(e,"P",{});var yo=i(Ps);Fn=n(yo,"Cela ressemble au r\xE9sum\xE9 d\u2019un article m\xE9dical. Voyons maintenant combien de RAM nous avons utilis\xE9 pour charger le jeu de donn\xE9es !"),yo.forEach(t),la=m(e),he=o(e,"H2",{class:!0});var an=i(he);xe=o(an,"A",{id:!0,class:!0,href:!0});var qo=i(xe);Zs=o(qo,"SPAN",{});var wo=i(Zs);g(Je.$$.fragment,wo),wo.forEach(t),qo.forEach(t),Jn=m(an),Cs=o(an,"SPAN",{});var eo=i(Cs);Wn=n(eo,"La magie du "),Qs=o(eo,"I",{});var Ao=i(Qs);Kn=n(Ao,"memory mapping"),Ao.forEach(t),eo.forEach(t),an.forEach(t),oa=m(e),ne=o(e,"P",{});var Rs=i(ne);Yn=n(Rs,"Un moyen simple de mesurer l\u2019utilisation de la m\xE9moire dans Python consiste \xE0 utiliser la biblioth\xE8que "),We=o(Rs,"A",{href:!0,rel:!0});var zo=i(We);Xs=o(zo,"CODE",{});var Do=i(Xs);Zn=n(Do,"psutil"),Do.forEach(t),zo.forEach(t),Qn=n(Rs," qui peut \xEAtre install\xE9e avec "),et=o(Rs,"CODE",{});var Po=i(et);Xn=n(Po,"pip"),Po.forEach(t),er=n(Rs," comme suit :"),Rs.forEach(t),ia=m(e),g(Ke.$$.fragment,e),ua=m(e),$e=o(e,"P",{});var nn=i($e);sr=n(nn,"Elle fournit une classe "),st=o(nn,"CODE",{});var Co=i(st);tr=n(Co,"Process"),Co.forEach(t),ar=n(nn," qui permet de v\xE9rifier l\u2019utilisation de la m\xE9moire du processus en cours :"),nn.forEach(t),pa=m(e),g(Ye.$$.fragment,e),da=m(e),g(Ze.$$.fragment,e),ma=m(e),Y=o(e,"P",{});var Pe=i(Y);nr=n(Pe,"Ici, l\u2019attribut "),tt=o(Pe,"CODE",{});var ko=i(tt);rr=n(ko,"rss"),ko.forEach(t),lr=n(Pe," fait r\xE9f\xE9rence \xE0 la "),at=o(Pe,"EM",{});var Io=i(at);or=n(Io,"taille de l\u2019ensemble r\xE9sident"),Io.forEach(t),ir=n(Pe,", qui est la fraction de m\xE9moire qu\u2019un processus occupe dans la RAM. Cette mesure inclut \xE9galement la m\xE9moire utilis\xE9e par l\u2019interpr\xE9teur Python et les biblioth\xE8ques que nous avons charg\xE9es, de sorte que la quantit\xE9 r\xE9elle de m\xE9moire utilis\xE9e pour charger le jeu de donn\xE9es est un peu plus petite. \xC0 titre de comparaison, voyons la taille du jeu de donn\xE9es sur le disque en utilisant l\u2019attribut "),nt=o(Pe,"CODE",{});var To=i(nt);ur=n(To,"dataset_size"),To.forEach(t),pr=n(Pe,". Comme le r\xE9sultat est exprim\xE9 en octets comme pr\xE9c\xE9demment, nous devons le convertir manuellement en gigaoctets :"),Pe.forEach(t),ca=m(e),g(Qe.$$.fragment,e),fa=m(e),g(Xe.$$.fragment,e),ha=m(e),ks=o(e,"P",{});var Mo=i(ks);dr=n(Mo,"Malgr\xE9 sa taille de pr\xE8s de 20 Go, nous pouvons charger et acc\xE9der au jeu de donn\xE9es avec beaucoup moins de RAM !"),Mo.forEach(t),va=m(e),g(je.$$.fragment,e),ga=m(e),V=o(e,"P",{});var ie=i(V);mr=n(ie,"Si vous \xEAtes familier avec Pandas, ce r\xE9sultat pourrait surprendre en raison de la c\xE9l\xE8bre "),es=o(ie,"A",{href:!0,rel:!0});var Oo=i(es);cr=n(Oo,"r\xE8gle d\u2019or"),Oo.forEach(t),fr=n(ie," de Wes Kinney selon laquelle vous avez g\xE9n\xE9ralement besoin de 5 \xE0 10 fois plus de RAM que la taille de votre jeu de donn\xE9es. Alors, comment \u{1F917} "),rt=o(ie,"EM",{});var Ro=i(rt);hr=n(Ro,"Datasets"),Ro.forEach(t),vr=n(ie," r\xE9sout-il ce probl\xE8me de gestion de la m\xE9moire ? \u{1F917} "),lt=o(ie,"EM",{});var No=i(lt);gr=n(No,"Datasets"),No.forEach(t),br=n(ie," traite chaque jeu de donn\xE9es comme un "),ss=o(ie,"A",{href:!0,rel:!0});var So=i(ss);_r=n(So,"fichier mapp\xE9 en m\xE9moire"),So.forEach(t),xr=n(ie,". Cela fournit un mappage entre la RAM et le stockage du syst\xE8me de fichiers permettant \xE0 la biblioth\xE8que d\u2019acc\xE9der et d\u2019op\xE9rer sur des \xE9l\xE9ments du jeu de donn\xE9es sans avoir besoin de le charger enti\xE8rement en m\xE9moire."),ie.forEach(t),ba=m(e),G=o(e,"P",{});var X=i(G);$r=n(X,"Les fichiers mapp\xE9s en m\xE9moire peuvent \xE9galement \xEAtre partag\xE9s entre plusieurs processus ce qui permet de parall\xE9liser des m\xE9thodes telles que "),ot=o(X,"CODE",{});var Lo=i(ot);jr=n(Lo,"Dataset.map()"),Lo.forEach(t),Er=n(X," sans avoir \xE0 d\xE9placer ou copier le jeu de donn\xE9es. Sous le capot, ces capacit\xE9s sont toutes r\xE9alis\xE9es par le format de m\xE9moire "),ts=o(X,"A",{href:!0,rel:!0});var Go=i(ts);yr=n(Go,"Apache Arrow"),Go.forEach(t),qr=n(X," et "),as=o(X,"A",{href:!0,rel:!0});var Ho=i(as);it=o(Ho,"CODE",{});var Uo=i(it);wr=n(Uo,"pyarrow"),Uo.forEach(t),Ho.forEach(t),Ar=n(X,", qui acc\xE9l\xE8rent le chargement et le traitement des donn\xE9es. (Pour plus de d\xE9tails sur Apache Arrow et les comparaisons avec Pandas, consultez "),ns=o(X,"A",{href:!0,rel:!0});var Bo=i(ns);zr=n(Bo,"l\u2019article de blog de Dejan Simic"),Bo.forEach(t),Dr=n(X,"). Pour voir ceci en action, effectuons un petit test de vitesse en it\xE9rant sur tous les \xE9l\xE9ments du jeu de donn\xE9es "),ut=o(X,"EM",{});var Vo=i(ut);Pr=n(Vo,"PubMed Abstracts"),Vo.forEach(t),Cr=n(X," :"),X.forEach(t),_a=m(e),g(rs.$$.fragment,e),xa=m(e),g(ls.$$.fragment,e),$a=m(e),F=o(e,"P",{});var ue=i(F);kr=n(ue,"Ici, nous avons utilis\xE9 le module "),pt=o(ue,"CODE",{});var Fo=i(pt);Ir=n(Fo,"timeit"),Fo.forEach(t),Tr=n(ue," de Python pour mesurer le temps d\u2019ex\xE9cution pris par "),dt=o(ue,"CODE",{});var Jo=i(dt);Mr=n(Jo,"code_snippet"),Jo.forEach(t),Or=n(ue,". Vous pourrez g\xE9n\xE9ralement it\xE9rer sur un jeu de donn\xE9es \xE0 une vitesse de quelques dixi\xE8mes de Go/s \xE0 plusieurs Go/s. Cela fonctionne tr\xE8s bien pour la grande majorit\xE9 des applications, mais vous devrez parfois travailler avec un jeu de donn\xE9es trop volumineux pour \xEAtre m\xEAme stock\xE9 sur le disque dur de votre ordinateur portable. Par exemple, si nous essayions de t\xE9l\xE9charger "),mt=o(ue,"EM",{});var Wo=i(mt);Rr=n(Wo,"The Pile"),Wo.forEach(t),Nr=n(ue," dans son int\xE9gralit\xE9, nous aurions besoin de 825 Go d\u2019espace disque libre ! Pour g\xE9rer ces cas, \u{1F917} "),ct=o(ue,"EM",{});var Ko=i(ct);Sr=n(Ko,"Datasets"),Ko.forEach(t),Lr=n(ue," fournit une fonctionnalit\xE9 de streaming qui nous permet de t\xE9l\xE9charger et d\u2019acc\xE9der aux \xE9l\xE9ments \xE0 la vol\xE9e, sans avoir besoin de t\xE9l\xE9charger l\u2019int\xE9gralit\xE9 du jeu de donn\xE9es. Voyons comment cela fonctionne."),ue.forEach(t),ja=m(e),g(Ee.$$.fragment,e),Ea=m(e),ve=o(e,"H2",{class:!0});var rn=i(ve);ye=o(rn,"A",{id:!0,class:!0,href:!0});var Yo=i(ye);ft=o(Yo,"SPAN",{});var Zo=i(ft);g(os.$$.fragment,Zo),Zo.forEach(t),Yo.forEach(t),Gr=m(rn),ht=o(rn,"SPAN",{});var Qo=i(ht);Hr=n(Qo,"Jeux de donn\xE9es en continu"),Qo.forEach(t),rn.forEach(t),ya=m(e),Z=o(e,"P",{});var Ce=i(Z);Ur=n(Ce,"Pour activer le streaming du jeu de donn\xE9es, il vous suffit de passer l\u2019argument "),vt=o(Ce,"CODE",{});var Xo=i(vt);Br=n(Xo,"streaming=True"),Xo.forEach(t),Vr=n(Ce," \xE0 la fonction "),gt=o(Ce,"CODE",{});var ei=i(gt);Fr=n(ei,"load_dataset()"),ei.forEach(t),Jr=n(Ce,". Par exemple, chargeons \xE0 nouveau le jeu de donn\xE9es "),bt=o(Ce,"EM",{});var si=i(bt);Wr=n(si,"PubMed Abstracts"),si.forEach(t),Kr=n(Ce," mais en mode streaming :"),Ce.forEach(t),qa=m(e),g(is.$$.fragment,e),wa=m(e),J=o(e,"P",{});var pe=i(J);Yr=n(pe,"Au lieu du familier "),_t=o(pe,"CODE",{});var ti=i(_t);Zr=n(ti,"Dataset"),ti.forEach(t),Qr=n(pe," que nous avons rencontr\xE9 ailleurs dans ce chapitre, l\u2019objet retourn\xE9 avec "),xt=o(pe,"CODE",{});var ai=i(xt);Xr=n(ai,"streaming=True"),ai.forEach(t),el=n(pe," est un "),$t=o(pe,"CODE",{});var ni=i($t);sl=n(ni,"IterableDataset"),ni.forEach(t),tl=n(pe,". Comme son nom l\u2019indique, pour acc\xE9der aux \xE9l\xE9ments d\u2019un "),jt=o(pe,"CODE",{});var ri=i(jt);al=n(ri,"IterableDataset"),ri.forEach(t),nl=n(pe,", nous devons parcourir celui-ci. Nous pouvons acc\xE9der au premier \xE9l\xE9ment de notre jeu de donn\xE9es diffus\xE9 comme suit :"),pe.forEach(t),Aa=m(e),g(us.$$.fragment,e),za=m(e),g(ps.$$.fragment,e),Da=m(e),re=o(e,"P",{});var Ns=i(re);rl=n(Ns,"Les \xE9l\xE9ments d\u2019un jeu de donn\xE9es diffus\xE9 en continu peuvent \xEAtre trait\xE9s \xE0 la vol\xE9e \xE0 l\u2019aide de "),Et=o(Ns,"CODE",{});var li=i(Et);ll=n(li,"IterableDataset.map()"),li.forEach(t),ol=n(Ns,", ce qui est utile pendant l\u2019entra\xEEnement si vous avez besoin de tokeniser les entr\xE9es. Le processus est exactement le m\xEAme que celui que nous avons utilis\xE9 pour tokeniser notre jeu de donn\xE9es dans le "),Is=o(Ns,"A",{href:!0});var oi=i(Is);il=n(oi,"chapitre 3"),oi.forEach(t),ul=n(Ns,", \xE0 la seule diff\xE9rence que les sorties sont renvoy\xE9es une par une :"),Ns.forEach(t),Pa=m(e),g(ds.$$.fragment,e),Ca=m(e),g(ms.$$.fragment,e),ka=m(e),g(qe.$$.fragment,e),Ia=m(e),Q=o(e,"P",{});var ke=i(Q);pl=n(ke,"Vous pouvez \xE9galement m\xE9langer un jeu de donn\xE9es diffus\xE9 en continu \xE0 l\u2019aide de "),yt=o(ke,"CODE",{});var ii=i(yt);dl=n(ii,"IterableDataset.shuffle()"),ii.forEach(t),ml=n(ke,", mais contrairement \xE0 "),qt=o(ke,"CODE",{});var ui=i(qt);cl=n(ui,"Dataset.shuffle()"),ui.forEach(t),fl=n(ke,", cela ne m\xE9lange que les \xE9l\xE9ments dans un "),wt=o(ke,"CODE",{});var pi=i(wt);hl=n(pi,"buffer_size"),pi.forEach(t),vl=n(ke," pr\xE9d\xE9fini :"),ke.forEach(t),Ta=m(e),g(cs.$$.fragment,e),Ma=m(e),g(fs.$$.fragment,e),Oa=m(e),W=o(e,"P",{});var de=i(W);gl=n(de,"Dans cet exemple, nous avons s\xE9lectionn\xE9 un exemple al\xE9atoire parmi les 10 000 premiers exemples du tampon. Une fois qu\u2019un exemple est acc\xE9d\xE9, sa place dans le tampon est remplie avec l\u2019exemple suivant dans le corpus (c\u2019est-\xE0-dire le 10 001e exemple dans le cas ci-dessus). Vous pouvez \xE9galement s\xE9lectionner des \xE9l\xE9ments d\u2019un jeu de donn\xE9es diffus\xE9 en continu \xE0 l\u2019aide des fonctions "),At=o(de,"CODE",{});var di=i(At);bl=n(di,"IterableDataset.take()"),di.forEach(t),_l=n(de," et "),zt=o(de,"CODE",{});var mi=i(zt);xl=n(mi,"IterableDataset.skip()"),mi.forEach(t),$l=n(de,", qui agissent de la m\xEAme mani\xE8re que "),Dt=o(de,"CODE",{});var ci=i(Dt);jl=n(ci,"Dataset.select()"),ci.forEach(t),El=n(de,". Par exemple, pour s\xE9lectionner les 5 premiers exemples dans le jeu de donn\xE9es "),Pt=o(de,"EM",{});var fi=i(Pt);yl=n(fi,"PubMed Abstracts"),fi.forEach(t),ql=n(de,", nous pouvons proc\xE9der comme suit :"),de.forEach(t),Ra=m(e),g(hs.$$.fragment,e),Na=m(e),g(vs.$$.fragment,e),Sa=m(e),we=o(e,"P",{});var ln=i(we);wl=n(ln,"De m\xEAme, vous pouvez utiliser la fonction "),Ct=o(ln,"CODE",{});var hi=i(Ct);Al=n(hi,"IterableDataset.skip()"),hi.forEach(t),zl=n(ln," pour cr\xE9er des fractionnements d\u2019entra\xEEnement et de validation \xE0 partir d\u2019un jeu de donn\xE9es m\xE9lang\xE9 comme suit :"),ln.forEach(t),La=m(e),g(gs.$$.fragment,e),Ga=m(e),H=o(e,"P",{});var ee=i(H);Dl=n(ee,"Terminons notre exploration du streaming des jeux de donn\xE9es avec une application commune : combiner plusieurs jeux de donn\xE9es pour cr\xE9er un seul corpus. \u{1F917} "),kt=o(ee,"EM",{});var vi=i(kt);Pl=n(vi,"Datasets"),vi.forEach(t),Cl=n(ee," fournit une fonction "),It=o(ee,"CODE",{});var gi=i(It);kl=n(gi,"interleave_datasets()"),gi.forEach(t),Il=n(ee," qui convertit une liste d\u2019objets "),Tt=o(ee,"CODE",{});var bi=i(Tt);Tl=n(bi,"IterableDataset"),bi.forEach(t),Ml=n(ee," en un seul "),Mt=o(ee,"CODE",{});var _i=i(Mt);Ol=n(_i,"IterableDataset"),_i.forEach(t),Rl=n(ee,", o\xF9 les \xE9l\xE9ments du nouveau jeu de donn\xE9es sont obtenus en alternant entre les exemples source. Cette fonction est particuli\xE8rement utile lorsque vous essayez de combiner de grands jeux de donn\xE9es. Par exemple, streamons FreeLaw, un sous-ensemble de "),Ot=o(ee,"EM",{});var xi=i(Ot);Nl=n(xi,"The Pile"),xi.forEach(t),Sl=n(ee," et qui est un jeu de donn\xE9es de 51 Go d\u2019avis juridiques de tribunaux am\xE9ricains :"),ee.forEach(t),Ha=m(e),g(bs.$$.fragment,e),Ua=m(e),g(_s.$$.fragment,e),Ba=m(e),le=o(e,"P",{});var Ss=i(le);Ll=n(Ss,"Ce jeu de donn\xE9es est suffisamment volumineux pour solliciter la RAM de la plupart des ordinateurs portables, mais nous avons pu le charger et y acc\xE9der sans transpirer ! Combinons maintenant les jeux de donn\xE9es FreeLaw et "),Rt=o(Ss,"EM",{});var $i=i(Rt);Gl=n($i,"PubMed Abstracts"),$i.forEach(t),Hl=n(Ss," avec la fonction "),Nt=o(Ss,"CODE",{});var ji=i(Nt);Ul=n(ji,"interleave_datasets()"),ji.forEach(t),Bl=n(Ss," :"),Ss.forEach(t),Va=m(e),g(xs.$$.fragment,e),Fa=m(e),g($s.$$.fragment,e),Ja=m(e),oe=o(e,"P",{});var Ls=i(oe);Vl=n(Ls,"Ici, nous avons utilis\xE9 la fonction "),St=o(Ls,"CODE",{});var Ei=i(St);Fl=n(Ei,"islice()"),Ei.forEach(t),Jl=n(Ls," du module "),Lt=o(Ls,"CODE",{});var yi=i(Lt);Wl=n(yi,"itertools"),yi.forEach(t),Kl=n(Ls," de Python pour s\xE9lectionner les deux premiers exemples du jeu de donn\xE9es combin\xE9. Nous pouvons voir qu\u2019ils correspondent aux premiers exemples de chacun des deux jeux de donn\xE9es source."),Ls.forEach(t),Wa=m(e),Ae=o(e,"P",{});var on=i(Ae);Yl=n(on,"Enfin, si vous souhaitez streamer "),Gt=o(on,"EM",{});var qi=i(Gt);Zl=n(qi,"The Pile"),qi.forEach(t),Ql=n(on," dans son int\xE9gralit\xE9 de 825 Go, vous pouvez r\xE9cup\xE9rer tous les fichiers pr\xE9par\xE9s comme suit :"),on.forEach(t),Ka=m(e),g(js.$$.fragment,e),Ya=m(e),g(Es.$$.fragment,e),Za=m(e),g(ze.$$.fragment,e),Qa=m(e),Ts=o(e,"P",{});var wi=i(Ts);Xl=n(wi,"Vous disposez maintenant de tous les outils dont vous avez besoin pour charger et traiter des jeux de donn\xE9es de toutes formes et tailles. Cependant \xE0 moins que vous ne soyez exceptionnellement chanceux, il arrivera un moment dans votre cheminement en traitement du langage naturel o\xF9 vous devrez r\xE9ellement cr\xE9er un jeu de donn\xE9es pour r\xE9soudre un probl\xE8me donn\xE9. C\u2019est le sujet de la section suivante !"),wi.forEach(t),this.h()},h(){c(p,"name","hf:doc:metadata"),c(p,"content",JSON.stringify(Li)),c(w,"id","donnes-massives-idatasetsi-la-rescousse"),c(w,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(w,"href","#donnes-massives-idatasetsi-la-rescousse"),c(h,"class","relative group"),c(Te,"href","https://pile.eleuther.ai"),c(Te,"rel","nofollow"),c(ge,"id","questce-que-ithe-pilei"),c(ge,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(ge,"href","#questce-que-ithe-pilei"),c(fe,"class","relative group"),c(Re,"href","https://www.eleuther.ai"),c(Re,"rel","nofollow"),c(Ne,"href","https://mystic.the-eye.eu/public/AI/pile/"),c(Ne,"rel","nofollow"),c(Se,"href","https://mystic.the-eye.eu/public/AI/pile_preliminary_components/"),c(Se,"rel","nofollow"),c(Le,"href","https://pubmed.ncbi.nlm.nih.gov/"),c(Le,"rel","nofollow"),c(Ge,"href","https://jsonlines.org"),c(Ge,"rel","nofollow"),c(As,"href","/course/fr/chapter5/2"),c(xe,"id","la-magie-du-imemory-mappingi"),c(xe,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(xe,"href","#la-magie-du-imemory-mappingi"),c(he,"class","relative group"),c(We,"href","https://psutil.readthedocs.io/en/latest/"),c(We,"rel","nofollow"),c(es,"href","https://wesmckinney.com/blog/apache-arrow-pandas-internals/"),c(es,"rel","nofollow"),c(ss,"href","https://en.wikipedia.org/wiki/Memory-mapped_file"),c(ss,"rel","nofollow"),c(ts,"href","https://arrow.apache.org"),c(ts,"rel","nofollow"),c(as,"href","https://arrow.apache.org/docs/python/index.html"),c(as,"rel","nofollow"),c(ns,"href","https://towardsdatascience.com/apache-arrow-read-dataframe-with-zero-memory-69634092b1a"),c(ns,"rel","nofollow"),c(ye,"id","jeux-de-donnes-en-continu"),c(ye,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(ye,"href","#jeux-de-donnes-en-continu"),c(ve,"class","relative group"),c(Is,"href","/course/fr/chapter3")},m(e,r){s(document.head,p),u(e,I,r),u(e,h,r),s(h,w),s(w,C),b(f,C,null),s(h,z),s(h,D),s(D,y),s(D,j),s(j,q),s(D,k),u(e,N,r),b(T,e,r),u(e,E,r),u(e,O,r),s(O,B),s(O,S),s(S,P),s(O,M),s(O,se),s(se,me),s(O,ce),u(e,te,r),u(e,U,r),s(U,ws),s(U,Gs),s(Gs,pn),s(U,dn),s(U,Hs),s(Hs,mn),s(U,cn),s(U,Us),s(Us,fn),s(U,hn),u(e,Ft,r),b(Ie,e,r),u(e,Jt,r),u(e,ae,r),s(ae,vn),s(ae,Bs),s(Bs,gn),s(ae,bn),s(ae,Te),s(Te,Vs),s(Vs,_n),s(ae,xn),u(e,Wt,r),u(e,fe,r),s(fe,ge),s(ge,Fs),b(Me,Fs,null),s(fe,$n),s(fe,Oe),s(Oe,jn),s(Oe,Js),s(Js,En),s(Oe,yn),u(e,Kt,r),u(e,R,r),s(R,Ws),s(Ws,qn),s(R,wn),s(R,Re),s(Re,An),s(R,zn),s(R,Ne),s(Ne,Dn),s(R,Pn),s(R,Se),s(Se,Cn),s(R,kn),s(R,Ks),s(Ks,In),s(R,Tn),s(R,Le),s(Le,Mn),s(R,On),s(R,Ge),s(Ge,Rn),s(R,Nn),s(R,Ys),s(Ys,Sn),s(R,Ln),u(e,Yt,r),b(He,e,r),u(e,Zt,r),u(e,be,r),s(be,Gn),s(be,As),s(As,Hn),s(be,Un),u(e,Qt,r),b(Ue,e,r),u(e,Xt,r),b(Be,e,r),u(e,ea,r),u(e,zs,r),s(zs,Bn),u(e,sa,r),b(_e,e,r),u(e,ta,r),u(e,Ds,r),s(Ds,Vn),u(e,aa,r),b(Ve,e,r),u(e,na,r),b(Fe,e,r),u(e,ra,r),u(e,Ps,r),s(Ps,Fn),u(e,la,r),u(e,he,r),s(he,xe),s(xe,Zs),b(Je,Zs,null),s(he,Jn),s(he,Cs),s(Cs,Wn),s(Cs,Qs),s(Qs,Kn),u(e,oa,r),u(e,ne,r),s(ne,Yn),s(ne,We),s(We,Xs),s(Xs,Zn),s(ne,Qn),s(ne,et),s(et,Xn),s(ne,er),u(e,ia,r),b(Ke,e,r),u(e,ua,r),u(e,$e,r),s($e,sr),s($e,st),s(st,tr),s($e,ar),u(e,pa,r),b(Ye,e,r),u(e,da,r),b(Ze,e,r),u(e,ma,r),u(e,Y,r),s(Y,nr),s(Y,tt),s(tt,rr),s(Y,lr),s(Y,at),s(at,or),s(Y,ir),s(Y,nt),s(nt,ur),s(Y,pr),u(e,ca,r),b(Qe,e,r),u(e,fa,r),b(Xe,e,r),u(e,ha,r),u(e,ks,r),s(ks,dr),u(e,va,r),b(je,e,r),u(e,ga,r),u(e,V,r),s(V,mr),s(V,es),s(es,cr),s(V,fr),s(V,rt),s(rt,hr),s(V,vr),s(V,lt),s(lt,gr),s(V,br),s(V,ss),s(ss,_r),s(V,xr),u(e,ba,r),u(e,G,r),s(G,$r),s(G,ot),s(ot,jr),s(G,Er),s(G,ts),s(ts,yr),s(G,qr),s(G,as),s(as,it),s(it,wr),s(G,Ar),s(G,ns),s(ns,zr),s(G,Dr),s(G,ut),s(ut,Pr),s(G,Cr),u(e,_a,r),b(rs,e,r),u(e,xa,r),b(ls,e,r),u(e,$a,r),u(e,F,r),s(F,kr),s(F,pt),s(pt,Ir),s(F,Tr),s(F,dt),s(dt,Mr),s(F,Or),s(F,mt),s(mt,Rr),s(F,Nr),s(F,ct),s(ct,Sr),s(F,Lr),u(e,ja,r),b(Ee,e,r),u(e,Ea,r),u(e,ve,r),s(ve,ye),s(ye,ft),b(os,ft,null),s(ve,Gr),s(ve,ht),s(ht,Hr),u(e,ya,r),u(e,Z,r),s(Z,Ur),s(Z,vt),s(vt,Br),s(Z,Vr),s(Z,gt),s(gt,Fr),s(Z,Jr),s(Z,bt),s(bt,Wr),s(Z,Kr),u(e,qa,r),b(is,e,r),u(e,wa,r),u(e,J,r),s(J,Yr),s(J,_t),s(_t,Zr),s(J,Qr),s(J,xt),s(xt,Xr),s(J,el),s(J,$t),s($t,sl),s(J,tl),s(J,jt),s(jt,al),s(J,nl),u(e,Aa,r),b(us,e,r),u(e,za,r),b(ps,e,r),u(e,Da,r),u(e,re,r),s(re,rl),s(re,Et),s(Et,ll),s(re,ol),s(re,Is),s(Is,il),s(re,ul),u(e,Pa,r),b(ds,e,r),u(e,Ca,r),b(ms,e,r),u(e,ka,r),b(qe,e,r),u(e,Ia,r),u(e,Q,r),s(Q,pl),s(Q,yt),s(yt,dl),s(Q,ml),s(Q,qt),s(qt,cl),s(Q,fl),s(Q,wt),s(wt,hl),s(Q,vl),u(e,Ta,r),b(cs,e,r),u(e,Ma,r),b(fs,e,r),u(e,Oa,r),u(e,W,r),s(W,gl),s(W,At),s(At,bl),s(W,_l),s(W,zt),s(zt,xl),s(W,$l),s(W,Dt),s(Dt,jl),s(W,El),s(W,Pt),s(Pt,yl),s(W,ql),u(e,Ra,r),b(hs,e,r),u(e,Na,r),b(vs,e,r),u(e,Sa,r),u(e,we,r),s(we,wl),s(we,Ct),s(Ct,Al),s(we,zl),u(e,La,r),b(gs,e,r),u(e,Ga,r),u(e,H,r),s(H,Dl),s(H,kt),s(kt,Pl),s(H,Cl),s(H,It),s(It,kl),s(H,Il),s(H,Tt),s(Tt,Tl),s(H,Ml),s(H,Mt),s(Mt,Ol),s(H,Rl),s(H,Ot),s(Ot,Nl),s(H,Sl),u(e,Ha,r),b(bs,e,r),u(e,Ua,r),b(_s,e,r),u(e,Ba,r),u(e,le,r),s(le,Ll),s(le,Rt),s(Rt,Gl),s(le,Hl),s(le,Nt),s(Nt,Ul),s(le,Bl),u(e,Va,r),b(xs,e,r),u(e,Fa,r),b($s,e,r),u(e,Ja,r),u(e,oe,r),s(oe,Vl),s(oe,St),s(St,Fl),s(oe,Jl),s(oe,Lt),s(Lt,Wl),s(oe,Kl),u(e,Wa,r),u(e,Ae,r),s(Ae,Yl),s(Ae,Gt),s(Gt,Zl),s(Ae,Ql),u(e,Ka,r),b(js,e,r),u(e,Ya,r),b(Es,e,r),u(e,Za,r),b(ze,e,r),u(e,Qa,r),u(e,Ts,r),s(Ts,Xl),Xa=!0},p(e,[r]){const ys={};r&2&&(ys.$$scope={dirty:r,ctx:e}),_e.$set(ys);const Ht={};r&2&&(Ht.$$scope={dirty:r,ctx:e}),je.$set(Ht);const Ut={};r&2&&(Ut.$$scope={dirty:r,ctx:e}),Ee.$set(Ut);const qs={};r&2&&(qs.$$scope={dirty:r,ctx:e}),qe.$set(qs);const Bt={};r&2&&(Bt.$$scope={dirty:r,ctx:e}),ze.$set(Bt)},i(e){Xa||(_(f.$$.fragment,e),_(T.$$.fragment,e),_(Ie.$$.fragment,e),_(Me.$$.fragment,e),_(He.$$.fragment,e),_(Ue.$$.fragment,e),_(Be.$$.fragment,e),_(_e.$$.fragment,e),_(Ve.$$.fragment,e),_(Fe.$$.fragment,e),_(Je.$$.fragment,e),_(Ke.$$.fragment,e),_(Ye.$$.fragment,e),_(Ze.$$.fragment,e),_(Qe.$$.fragment,e),_(Xe.$$.fragment,e),_(je.$$.fragment,e),_(rs.$$.fragment,e),_(ls.$$.fragment,e),_(Ee.$$.fragment,e),_(os.$$.fragment,e),_(is.$$.fragment,e),_(us.$$.fragment,e),_(ps.$$.fragment,e),_(ds.$$.fragment,e),_(ms.$$.fragment,e),_(qe.$$.fragment,e),_(cs.$$.fragment,e),_(fs.$$.fragment,e),_(hs.$$.fragment,e),_(vs.$$.fragment,e),_(gs.$$.fragment,e),_(bs.$$.fragment,e),_(_s.$$.fragment,e),_(xs.$$.fragment,e),_($s.$$.fragment,e),_(js.$$.fragment,e),_(Es.$$.fragment,e),_(ze.$$.fragment,e),Xa=!0)},o(e){x(f.$$.fragment,e),x(T.$$.fragment,e),x(Ie.$$.fragment,e),x(Me.$$.fragment,e),x(He.$$.fragment,e),x(Ue.$$.fragment,e),x(Be.$$.fragment,e),x(_e.$$.fragment,e),x(Ve.$$.fragment,e),x(Fe.$$.fragment,e),x(Je.$$.fragment,e),x(Ke.$$.fragment,e),x(Ye.$$.fragment,e),x(Ze.$$.fragment,e),x(Qe.$$.fragment,e),x(Xe.$$.fragment,e),x(je.$$.fragment,e),x(rs.$$.fragment,e),x(ls.$$.fragment,e),x(Ee.$$.fragment,e),x(os.$$.fragment,e),x(is.$$.fragment,e),x(us.$$.fragment,e),x(ps.$$.fragment,e),x(ds.$$.fragment,e),x(ms.$$.fragment,e),x(qe.$$.fragment,e),x(cs.$$.fragment,e),x(fs.$$.fragment,e),x(hs.$$.fragment,e),x(vs.$$.fragment,e),x(gs.$$.fragment,e),x(bs.$$.fragment,e),x(_s.$$.fragment,e),x(xs.$$.fragment,e),x($s.$$.fragment,e),x(js.$$.fragment,e),x(Es.$$.fragment,e),x(ze.$$.fragment,e),Xa=!1},d(e){t(p),e&&t(I),e&&t(h),$(f),e&&t(N),$(T,e),e&&t(E),e&&t(O),e&&t(te),e&&t(U),e&&t(Ft),$(Ie,e),e&&t(Jt),e&&t(ae),e&&t(Wt),e&&t(fe),$(Me),e&&t(Kt),e&&t(R),e&&t(Yt),$(He,e),e&&t(Zt),e&&t(be),e&&t(Qt),$(Ue,e),e&&t(Xt),$(Be,e),e&&t(ea),e&&t(zs),e&&t(sa),$(_e,e),e&&t(ta),e&&t(Ds),e&&t(aa),$(Ve,e),e&&t(na),$(Fe,e),e&&t(ra),e&&t(Ps),e&&t(la),e&&t(he),$(Je),e&&t(oa),e&&t(ne),e&&t(ia),$(Ke,e),e&&t(ua),e&&t($e),e&&t(pa),$(Ye,e),e&&t(da),$(Ze,e),e&&t(ma),e&&t(Y),e&&t(ca),$(Qe,e),e&&t(fa),$(Xe,e),e&&t(ha),e&&t(ks),e&&t(va),$(je,e),e&&t(ga),e&&t(V),e&&t(ba),e&&t(G),e&&t(_a),$(rs,e),e&&t(xa),$(ls,e),e&&t($a),e&&t(F),e&&t(ja),$(Ee,e),e&&t(Ea),e&&t(ve),$(os),e&&t(ya),e&&t(Z),e&&t(qa),$(is,e),e&&t(wa),e&&t(J),e&&t(Aa),$(us,e),e&&t(za),$(ps,e),e&&t(Da),e&&t(re),e&&t(Pa),$(ds,e),e&&t(Ca),$(ms,e),e&&t(ka),$(qe,e),e&&t(Ia),e&&t(Q),e&&t(Ta),$(cs,e),e&&t(Ma),$(fs,e),e&&t(Oa),e&&t(W),e&&t(Ra),$(hs,e),e&&t(Na),$(vs,e),e&&t(Sa),e&&t(we),e&&t(La),$(gs,e),e&&t(Ga),e&&t(H),e&&t(Ha),$(bs,e),e&&t(Ua),$(_s,e),e&&t(Ba),e&&t(le),e&&t(Va),$(xs,e),e&&t(Fa),$($s,e),e&&t(Ja),e&&t(oe),e&&t(Wa),e&&t(Ae),e&&t(Ka),$(js,e),e&&t(Ya),$(Es,e),e&&t(Za),$(ze,e),e&&t(Qa),e&&t(Ts)}}}const Li={local:"donnes-massives-idatasetsi-la-rescousse",sections:[{local:"questce-que-ithe-pilei",title:"Qu'est-ce que <i>The Pile</i> ?"},{local:"la-magie-du-imemory-mappingi",title:"La magie du <i>memory mapping</i>"},{local:"jeux-de-donnes-en-continu",title:"Jeux de donn\xE9es en continu"}],title:"Donn\xE9es massives ? \u{1F917} <i>Datasets</i> \xE0 la rescousse !"};function Gi(K){return Ci(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class Wi extends Ai{constructor(p){super();zi(this,p,Gi,Si,Di,{})}}export{Wi as default,Li as metadata};
