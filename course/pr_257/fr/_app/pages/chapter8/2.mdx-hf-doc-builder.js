import{S as Qu,i as Vu,s as Fu,e as a,k as p,w as f,t as o,M as Gu,c as l,d as t,m as d,a as i,x as v,h as r,b as m,N as Or,G as s,g as u,y as h,q as _,o as b,B as g,v as Ju}from"../../chunks/vendor-hf-doc-builder.js";import{T as Zl}from"../../chunks/Tip-hf-doc-builder.js";import{Y as ei}from"../../chunks/Youtube-hf-doc-builder.js";import{I as si}from"../../chunks/IconCopyLink-hf-doc-builder.js";import{C as w}from"../../chunks/CodeBlock-hf-doc-builder.js";import{D as Ru}from"../../chunks/DocNotebookDropdown-hf-doc-builder.js";function Bu(ue){let c,S,q,j,M,E,H,O,k,x,C,P,$,X,L,Y,Me;return{c(){c=a("p"),S=o("\u{1F6A8} Vous voyez le cadre bleu autour de \xAB "),q=a("i"),j=o("6 frames"),M=o(" \xBB dans le "),E=a("i"),H=o("traceback"),O=o(" de Google Colab ? Il s\u2019agit d\u2019une fonctionnalit\xE9 sp\xE9ciale de Colab qui compresse le "),k=a("i"),x=o("traceback"),C=o(" en "),P=a("i"),$=o("frames"),X=o(". Si vous ne parvenez pas \xE0 trouver la source d\u2019une erreur, d\xE9roulez le "),L=a("i"),Y=o("traceback"),Me=o(" en cliquant sur ces deux petites fl\xE8ches.")},l(W){c=l(W,"P",{});var D=i(c);S=r(D,"\u{1F6A8} Vous voyez le cadre bleu autour de \xAB "),q=l(D,"I",{});var js=i(q);j=r(js,"6 frames"),js.forEach(t),M=r(D," \xBB dans le "),E=l(D,"I",{});var re=i(E);H=r(re,"traceback"),re.forEach(t),O=r(D," de Google Colab ? Il s\u2019agit d\u2019une fonctionnalit\xE9 sp\xE9ciale de Colab qui compresse le "),k=l(D,"I",{});var ys=i(k);x=r(ys,"traceback"),ys.forEach(t),C=r(D," en "),P=l(D,"I",{});var zs=i(P);$=r(zs,"frames"),zs.forEach(t),X=r(D,". Si vous ne parvenez pas \xE0 trouver la source d\u2019une erreur, d\xE9roulez le "),L=l(D,"I",{});var Oe=i(L);Y=r(Oe,"traceback"),Oe.forEach(t),Me=r(D," en cliquant sur ces deux petites fl\xE8ches."),D.forEach(t)},m(W,D){u(W,c,D),s(c,S),s(c,q),s(q,j),s(c,M),s(c,E),s(E,H),s(c,O),s(c,k),s(k,x),s(c,C),s(c,P),s(P,$),s(c,X),s(c,L),s(L,Y),s(c,Me)},d(W){W&&t(c)}}}function Uu(ue){let c,S,q,j,M,E,H,O,k,x,C;return{c(){c=a("p"),S=o("\u{1F4A1} Si vous rencontrez un message d\u2019erreur difficile \xE0 comprendre, copiez et collez le message dans Google ou sur "),q=a("a"),j=o("Stack Overflow"),M=o(" (oui, vraiment !). Il y a de fortes chances que vous ne soyez pas la premi\xE8re personne \xE0 rencontrer cette erreur et c\u2019est un bon moyen de trouver des solutions que d\u2019autres membres de la communaut\xE9 ont publi\xE9es. Par exemple, en recherchant "),E=a("code"),H=o("OSError : Can't load config for"),O=o(" sur Stack Overflow donne plusieurs "),k=a("a"),x=o("r\xE9ponses"),C=o(" qui peuvent \xEAtre utilis\xE9es comme point de d\xE9part pour r\xE9soudre le probl\xE8me."),this.h()},l(P){c=l(P,"P",{});var $=i(c);S=r($,"\u{1F4A1} Si vous rencontrez un message d\u2019erreur difficile \xE0 comprendre, copiez et collez le message dans Google ou sur "),q=l($,"A",{href:!0,rel:!0});var X=i(q);j=r(X,"Stack Overflow"),X.forEach(t),M=r($," (oui, vraiment !). Il y a de fortes chances que vous ne soyez pas la premi\xE8re personne \xE0 rencontrer cette erreur et c\u2019est un bon moyen de trouver des solutions que d\u2019autres membres de la communaut\xE9 ont publi\xE9es. Par exemple, en recherchant "),E=l($,"CODE",{});var L=i(E);H=r(L,"OSError : Can't load config for"),L.forEach(t),O=r($," sur Stack Overflow donne plusieurs "),k=l($,"A",{href:!0,rel:!0});var Y=i(k);x=r(Y,"r\xE9ponses"),Y.forEach(t),C=r($," qui peuvent \xEAtre utilis\xE9es comme point de d\xE9part pour r\xE9soudre le probl\xE8me."),$.forEach(t),this.h()},h(){m(q,"href","https://stackoverflow.com/"),m(q,"rel","nofollow"),m(k,"href","https://stackoverflow.com/search?q=OSError%3A+Can%27t+load+config+for+"),m(k,"rel","nofollow")},m(P,$){u(P,c,$),s(c,S),s(c,q),s(q,j),s(c,M),s(c,E),s(E,H),s(c,O),s(c,k),s(k,x),s(c,C)},d(P){P&&t(c)}}}function Wu(ue){let c,S,q,j,M,E,H,O;return{c(){c=a("p"),S=o("\u{1F6A8} L\u2019approche que nous adoptons ici n\u2019est pas infaillible puisque notre coll\xE8gue peut avoir modifi\xE9 la configuration de "),q=a("code"),j=o("distilbert-base-uncased"),M=o(" avant de "),E=a("i"),H=o("finetuner"),O=o(" le mod\xE8le. Dans la vie r\xE9elle, nous voudrions v\xE9rifier avec lui d\u2019abord, mais pour les besoins de cette section nous supposerons qu\u2019il a utilis\xE9 la configuration par d\xE9faut.")},l(k){c=l(k,"P",{});var x=i(c);S=r(x,"\u{1F6A8} L\u2019approche que nous adoptons ici n\u2019est pas infaillible puisque notre coll\xE8gue peut avoir modifi\xE9 la configuration de "),q=l(x,"CODE",{});var C=i(q);j=r(C,"distilbert-base-uncased"),C.forEach(t),M=r(x," avant de "),E=l(x,"I",{});var P=i(E);H=r(P,"finetuner"),P.forEach(t),O=r(x," le mod\xE8le. Dans la vie r\xE9elle, nous voudrions v\xE9rifier avec lui d\u2019abord, mais pour les besoins de cette section nous supposerons qu\u2019il a utilis\xE9 la configuration par d\xE9faut."),x.forEach(t)},m(k,x){u(k,c,x),s(c,S),s(c,q),s(q,j),s(c,M),s(c,E),s(E,H),s(c,O)},d(k){k&&t(c)}}}function Xu(ue){let c,S,q,j,M,E,H,O,k,x,C,P,$,X,L,Y,Me,W,D,js,re,ys,zs,Oe,Se,ao,V,Sr,Ie,Ir,Tr,pe,Us,Hr,Lr,Nr,Ws,Qr,Vr,lo,Te,io,Ps,Fr,uo,He,po,de,Gr,Xs,Jr,Rr,co,Le,mo,ce,Br,Ys,Ur,Wr,fo,ne,me,Ks,Ne,Xr,Cs,Yr,Zs,Kr,vo,fe,Zr,et,en,sn,ho,Ds,ae,tn,As,on,rn,st,nn,an,_o,K,ln,tt,un,pn,ot,dn,cn,bo,Qe,go,Ve,qo,F,mn,rt,fn,vn,nt,hn,_n,at,bn,gn,$o,Fe,Ge,ti,Eo,y,qn,lt,$n,En,it,wn,kn,ut,xn,jn,pt,yn,zn,dt,Pn,Cn,Ms,Dn,An,ct,Mn,On,wo,ve,ko,G,Sn,mt,In,Tn,ft,Hn,Ln,vt,Nn,Qn,xo,Je,jo,he,yo,_e,Vn,ht,Fn,Gn,zo,Re,Be,oi,Po,be,Jn,_t,Rn,Bn,Co,Ue,We,ri,Do,Os,Un,Ao,Xe,Mo,Ye,Oo,J,Wn,bt,Xn,Yn,gt,Kn,Zn,qt,ea,sa,So,Ke,Io,Ze,To,z,ta,$t,oa,ra,Et,na,aa,wt,la,ia,kt,ua,pa,es,xt,da,ca,Ss,ma,fa,jt,va,ha,Ho,ss,Lo,ge,No,qe,_a,yt,ba,ga,Qo,ts,Vo,Z,qa,zt,$a,Ea,Pt,wa,ka,Fo,os,Go,rs,Jo,Is,xa,Ro,R,ns,ja,Ct,ya,za,Pa,as,Ca,Dt,Da,Aa,Ma,At,Oa,Sa,le,Ia,Mt,Ta,Ha,Ot,La,Na,Bo,Ts,Qa,Uo,ie,$e,St,ls,Va,It,Fa,Wo,B,Ga,Tt,Ja,Ra,Ht,Ba,Ua,Lt,Wa,Xa,Xo,is,Yo,Ee,Ya,Nt,Ka,Za,Ko,us,Zo,ee,el,Hs,sl,tl,Qt,ol,rl,er,ps,sr,ds,tr,se,nl,Vt,al,ll,Ft,il,ul,or,cs,rr,Ls,pl,nr,ms,ar,N,dl,Gt,cl,ml,Jt,fl,vl,Rt,hl,_l,Bt,bl,gl,lr,fs,ir,vs,ur,we,ql,Ut,$l,El,pr,hs,dr,_s,cr,A,wl,Wt,kl,xl,Ns,jl,yl,Xt,zl,Pl,Yt,Cl,Dl,Kt,Al,Ml,Zt,Ol,Sl,mr,bs,fr,U,Il,eo,Tl,Hl,so,Ll,Nl,gs,Ql,Vl,vr,qs,$s,ni,hr,te,Fl,to,Gl,Jl,oo,Rl,Bl,_r,Es,br,ws,gr,ke,Ul,ks,Wl,Xl,qr;return E=new si({}),C=new Ru({props:{classNames:"absolute z-10 right-0 top-0",options:[{label:"Google Colab",value:"https://colab.research.google.com/github/huggingface/notebooks/blob/master/course/chapter8/section2.ipynb"},{label:"Aws Studio",value:"https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/master/course/chapter8/section2.ipynb"}]}}),Se=new ei({props:{id:"DQ-CpJn6Rc4"}}),Te=new w({props:{code:"",highlighted:`<span class="hljs-keyword">from</span> huggingface_hub <span class="hljs-keyword">import</span> notebook_login

notebook_login()`}}),He=new w({props:{code:"huggingface-cli login",highlighted:"huggingface-cli login"}}),Le=new w({props:{code:`
`,highlighted:`<span class="hljs-keyword">from</span> distutils.dir_util <span class="hljs-keyword">import</span> copy_tree
<span class="hljs-keyword">from</span> huggingface_hub <span class="hljs-keyword">import</span> Repository, snapshot_download, create_repo, get_full_repo_name


<span class="hljs-keyword">def</span> <span class="hljs-title function_">copy_repository_template</span>():
    <span class="hljs-comment"># Cloner le d\xE9p\xF4t et extraire le chemin local</span>
    template_repo_id = <span class="hljs-string">&quot;lewtun/distilbert-base-uncased-finetuned-squad-d5716d28&quot;</span>
    commit_hash = <span class="hljs-string">&quot;be3eaffc28669d7932492681cd5f3e8905e358b4&quot;</span>
    template_repo_dir = snapshot_download(template_repo_id, revision=commit_hash)
    <span class="hljs-comment"># Cr\xE9er un d\xE9p\xF4t vide sur le Hub</span>
    model_name = template_repo_id.split(<span class="hljs-string">&quot;/&quot;</span>)[<span class="hljs-number">1</span>]
    create_repo(model_name, exist_ok=<span class="hljs-literal">True</span>)
    <span class="hljs-comment"># Cloner le d\xE9p\xF4t vide</span>
    new_repo_id = get_full_repo_name(model_name)
    new_repo_dir = model_name
    repo = Repository(local_dir=new_repo_dir, clone_from=new_repo_id)
    <span class="hljs-comment"># Copier les fichiers</span>
    copy_tree(template_repo_dir, new_repo_dir)
    <span class="hljs-comment"># Pousser sur le Hub</span>
    repo.push_to_hub()`}}),Ne=new si({}),Qe=new w({props:{code:"",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline

model_checkpoint = get_full_repo_name(<span class="hljs-string">&quot;distillbert-base-uncased-finetuned-squad-d5716d28&quot;</span>)
reader = pipeline(<span class="hljs-string">&quot;question-answering&quot;</span>, model=model_checkpoint)`}}),Ve=new w({props:{code:`
`,highlighted:`<span class="hljs-string">&quot;&quot;&quot;
OSError: Can&#x27;t load config for &#x27;lewtun/distillbert-base-uncased-finetuned-squad-d5716d28&#x27;. Make sure that:

- &#x27;lewtun/distillbert-base-uncased-finetuned-squad-d5716d28&#x27; is a correct model identifier listed on &#x27;https://huggingface.co/models&#x27;

- or &#x27;lewtun/distillbert-base-uncased-finetuned-squad-d5716d28&#x27; is the correct path to a directory containing a config.json file
&quot;&quot;&quot;</span>`}}),ve=new Zl({props:{$$slots:{default:[Bu]},$$scope:{ctx:ue}}}),Je=new w({props:{code:`
`,highlighted:`<span class="hljs-string">&quot;&quot;&quot;
Make sure that:

- &#x27;lewtun/distillbert-base-uncased-finetuned-squad-d5716d28&#x27; is a correct model identifier listed on &#x27;https://huggingface.co/models&#x27;

- or &#x27;lewtun/distillbert-base-uncased-finetuned-squad-d5716d28&#x27; is the correct path to a directory containing a config.json file
&quot;&quot;&quot;</span>`}}),he=new Zl({props:{$$slots:{default:[Uu]},$$scope:{ctx:ue}}}),Xe=new w({props:{code:`model_checkpoint = get_full_repo_name("distilbert-base-uncased-finetuned-squad-d5716d28")
reader = pipeline("question-answering", model=model_checkpoint)`,highlighted:`model_checkpoint = get_full_repo_name(<span class="hljs-string">&quot;distilbert-base-uncased-finetuned-squad-d5716d28&quot;</span>)
reader = pipeline(<span class="hljs-string">&quot;question-answering&quot;</span>, model=model_checkpoint)`}}),Ye=new w({props:{code:`
`,highlighted:`<span class="hljs-string">&quot;&quot;&quot;
OSError: Can&#x27;t load config for &#x27;lewtun/distilbert-base-uncased-finetuned-squad-d5716d28&#x27;. Make sure that:

- &#x27;lewtun/distilbert-base-uncased-finetuned-squad-d5716d28&#x27; is a correct model identifier listed on &#x27;https://huggingface.co/models&#x27;

- or &#x27;lewtun/distilbert-base-uncased-finetuned-squad-d5716d28&#x27; is the correct path to a directory containing a config.json file
&quot;&quot;&quot;</span>`}}),Ke=new w({props:{code:"",highlighted:`<span class="hljs-keyword">from</span> huggingface_hub <span class="hljs-keyword">import</span> list_repo_files

list_repo_files(repo_id=model_checkpoint)`}}),Ze=new w({props:{code:"['.gitattributes', 'README.md', 'pytorch_model.bin', 'special_tokens_map.json', 'tokenizer_config.json', 'training_args.bin', 'vocab.txt']",highlighted:'[<span class="hljs-string">&#x27;.gitattributes&#x27;</span>, <span class="hljs-string">&#x27;README.md&#x27;</span>, <span class="hljs-string">&#x27;pytorch_model.bin&#x27;</span>, <span class="hljs-string">&#x27;special_tokens_map.json&#x27;</span>, <span class="hljs-string">&#x27;tokenizer_config.json&#x27;</span>, <span class="hljs-string">&#x27;training_args.bin&#x27;</span>, <span class="hljs-string">&#x27;vocab.txt&#x27;</span>]'}}),ss=new w({props:{code:"",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoConfig

pretrained_checkpoint = <span class="hljs-string">&quot;distilbert-base-uncased&quot;</span>
config = AutoConfig.from_pretrained(pretrained_checkpoint)`}}),ge=new Zl({props:{warning:!0,$$slots:{default:[Wu]},$$scope:{ctx:ue}}}),ts=new w({props:{code:'config.push_to_hub(model_checkpoint, commit_message="Add config.json")',highlighted:'config.push_to_hub(model_checkpoint, commit_message=<span class="hljs-string">&quot;Add config.json&quot;</span>)'}}),os=new w({props:{code:`



`,highlighted:`reader = pipeline(<span class="hljs-string">&quot;question-answering&quot;</span>, model=model_checkpoint, revision=<span class="hljs-string">&quot;main&quot;</span>)

context = <span class="hljs-string">r&quot;&quot;&quot;
Extractive Question Answering is the task of extracting an answer from a text
given a question. An example of a question answering dataset is the SQuAD
dataset, which is entirely based on that task. If you would like to fine-tune a
model on a SQuAD task, you may leverage the
examples/pytorch/question-answering/run_squad.py script.

\u{1F917} Transformers is interoperable with the PyTorch, TensorFlow, and JAX
frameworks, so you can use your favourite tools for a wide variety of tasks!
&quot;&quot;&quot;</span>

context_fr = <span class="hljs-string">r&quot;&quot;&quot;
La r\xE9ponse \xE0 des questions consiste \xE0 extraire une r\xE9ponse d&#x27;un texte
\xE0 partir d&#x27;une question. Un exemple de jeu de donn\xE9es de r\xE9ponse aux questions est le 
jeu de donn\xE9es SQuAD qui est enti\xE8rement bas\xE9 sur cette t\xE2che. Si vous souhaitez finetuner
un mod\xE8le sur une t\xE2che SQuAD, vous pouvez utiliser le fichier
exemples/pytorch/question-answering/run_squad.py.

\u{1F917} Transformers est interop\xE9rable avec les frameworks PyTorch, TensorFlow et JAX.
de sorte que vous pouvez utiliser vos outils pr\xE9f\xE9r\xE9s pour une grande vari\xE9t\xE9 de t\xE2ches !
&quot;&quot;&quot;</span>

question = <span class="hljs-string">&quot;What is extractive question answering?&quot;</span>
<span class="hljs-comment"># Qu&#x27;est-ce que la r\xE9ponse extractive aux questions ?</span>
reader(question=question, context=context)`}}),rs=new w({props:{code:`{'score': 0.38669535517692566,
 'start': 34,
 'end': 95,
 'answer': 'the task of extracting an answer from a text given a question'} 
 # la t\xE2che consistant \xE0 extraire une r\xE9ponse d'un texte \xE0 partir d'une question.`,highlighted:`{<span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">0.38669535517692566</span>,
 <span class="hljs-string">&#x27;start&#x27;</span>: <span class="hljs-number">34</span>,
 <span class="hljs-string">&#x27;end&#x27;</span>: <span class="hljs-number">95</span>,
 <span class="hljs-string">&#x27;answer&#x27;</span>: <span class="hljs-string">&#x27;the task of extracting an answer from a text given a question&#x27;</span>} 
 <span class="hljs-comment"># la t\xE2che consistant \xE0 extraire une r\xE9ponse d&#x27;un texte \xE0 partir d&#x27;une question.</span>`}}),ls=new si({}),is=new w({props:{code:`tokenizer = reader.tokenizer
model = reader.model`,highlighted:`tokenizer = reader.tokenizer
model = reader.model`}}),us=new w({props:{code:'question = "Which frameworks can I use?"  # Quel frameworks puis-je utiliser ?',highlighted:'question = <span class="hljs-string">&quot;Which frameworks can I use?&quot;</span>  <span class="hljs-comment"># Quel frameworks puis-je utiliser ?</span>'}}),ps=new w({props:{code:"",highlighted:`<span class="hljs-keyword">import</span> torch

inputs = tokenizer(question, context, add_special_tokens=<span class="hljs-literal">True</span>)
input_ids = inputs[<span class="hljs-string">&quot;input_ids&quot;</span>][<span class="hljs-number">0</span>]
outputs = model(**inputs)
answer_start_scores = outputs.start_logits
answer_end_scores = outputs.end_logits
<span class="hljs-comment"># Pour obtenir le d\xE9but de r\xE9ponse le plus probable avec l&#x27;argmax du score</span>
answer_start = torch.argmax(answer_start_scores)
<span class="hljs-comment"># Pour obtenir la fin de r\xE9ponse la plus probable avec l&#x27;argmax du score</span>
answer_end = torch.argmax(answer_end_scores) + <span class="hljs-number">1</span>
answer = tokenizer.convert_tokens_to_string(
    tokenizer.convert_ids_to_tokens(input_ids[answer_start:answer_end])
)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Question: <span class="hljs-subst">{question}</span>&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Answer: <span class="hljs-subst">{answer}</span>&quot;</span>)`}}),ds=new w({props:{code:`



`,highlighted:`<span class="hljs-string">&quot;&quot;&quot;
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/var/folders/28/k4cy5q7s2hs92xq7_h89_vgm0000gn/T/ipykernel_75743/2725838073.py in &lt;module&gt;
      1 inputs = tokenizer(question, text, add_special_tokens=True)
      2 input_ids = inputs[&quot;input_ids&quot;]
----&gt; 3 outputs = model(**inputs)
      4 answer_start_scores = outputs.start_logits
      5 answer_end_scores = outputs.end_logits

~/miniconda3/envs/huggingface/lib/python3.8/site-packages/torch/nn/modules/module.py in _call_impl(self, *input, **kwargs)
   1049         if not (self._backward_hooks or self._forward_hooks or self._forward_pre_hooks or _global_backward_hooks
   1050                 or _global_forward_hooks or _global_forward_pre_hooks):
-&gt; 1051             return forward_call(*input, **kwargs)
   1052         # Do not call functions when jit is used
   1053         full_backward_hooks, non_full_backward_hooks = [], []

~/miniconda3/envs/huggingface/lib/python3.8/site-packages/transformers/models/distilbert/modeling_distilbert.py in forward(self, input_ids, attention_mask, head_mask, inputs_embeds, start_positions, end_positions, output_attentions, output_hidden_states, return_dict)
    723         return_dict = return_dict if return_dict is not None else self.config.use_return_dict
    724
--&gt; 725         distilbert_output = self.distilbert(
    726             input_ids=input_ids,
    727             attention_mask=attention_mask,

~/miniconda3/envs/huggingface/lib/python3.8/site-packages/torch/nn/modules/module.py in _call_impl(self, *input, **kwargs)
   1049         if not (self._backward_hooks or self._forward_hooks or self._forward_pre_hooks or _global_backward_hooks
   1050                 or _global_forward_hooks or _global_forward_pre_hooks):
-&gt; 1051             return forward_call(*input, **kwargs)
   1052         # Do not call functions when jit is used
   1053         full_backward_hooks, non_full_backward_hooks = [], []

~/miniconda3/envs/huggingface/lib/python3.8/site-packages/transformers/models/distilbert/modeling_distilbert.py in forward(self, input_ids, attention_mask, head_mask, inputs_embeds, output_attentions, output_hidden_states, return_dict)
    471             raise ValueError(&quot;You cannot specify both input_ids and inputs_embeds at the same time&quot;)
    472         elif input_ids is not None:
--&gt; 473             input_shape = input_ids.size()
    474         elif inputs_embeds is not None:
    475             input_shape = inputs_embeds.size()[:-1]

AttributeError: &#x27;list&#x27; object has no attribute &#x27;size&#x27;
&quot;&quot;&quot;</span>`}}),cs=new ei({props:{id:"rSPyvPw0p9k"}}),ms=new ei({props:{id:"5PkZ4rbHL6c"}}),fs=new w({props:{code:'inputs["input_ids"][:5]',highlighted:'inputs[<span class="hljs-string">&quot;input_ids&quot;</span>][:<span class="hljs-number">5</span>]'}}),vs=new w({props:{code:"[101, 2029, 7705, 2015, 2064]",highlighted:'[<span class="hljs-number">101</span>, <span class="hljs-number">2029</span>, <span class="hljs-number">7705</span>, <span class="hljs-number">2015</span>, <span class="hljs-number">2064</span>]'}}),hs=new w({props:{code:'type(inputs["input_ids"])',highlighted:'<span class="hljs-built_in">type</span>(inputs[<span class="hljs-string">&quot;input_ids&quot;</span>])'}}),_s=new w({props:{code:"list",highlighted:'<span class="hljs-built_in">list</span>'}}),bs=new w({props:{code:"",highlighted:`~<span class="hljs-regexp">/miniconda3/</span>envs<span class="hljs-regexp">/huggingface/</span>lib<span class="hljs-regexp">/python3.8/</span>site-packages<span class="hljs-regexp">/transformers/m</span>odels<span class="hljs-regexp">/distilbert/m</span>odeling_distilbert.py in forward(self, input_ids, attention_mask, head_mask, inputs_embeds, output_attentions, output_hidden_states, return_dict)
    <span class="hljs-number">471</span>             raise ValueError(<span class="hljs-string">&quot;You cannot specify both input_ids and inputs_embeds at the same time&quot;</span>)
    <span class="hljs-number">472</span>         elif input_ids is not None:
--&gt; <span class="hljs-number">473</span>             input_shape = input_ids.<span class="hljs-keyword">size</span>()
    <span class="hljs-number">474</span>         elif inputs_embeds is not None:
    <span class="hljs-number">475</span>             input_shape = inputs_embeds.<span class="hljs-keyword">size</span>()[:-<span class="hljs-number">1</span>]

AttributeError: <span class="hljs-string">&#x27;list&#x27;</span> object has no attribute <span class="hljs-string">&#x27;size&#x27;</span>`}}),Es=new w({props:{code:`inputs = tokenizer(question, context, add_special_tokens=True, return_tensors="pt")
input_ids = inputs["input_ids"][0]
outputs = model(**inputs)
answer_start_scores = outputs.start_logits
answer_end_scores = outputs.end_logits
# Pour obtenir le d\xE9but de r\xE9ponse le plus probable avec l'argmax du score
answer_start = torch.argmax(answer_start_scores)
# Pour obtenir la fin de r\xE9ponse la plus probable avec l'argmax du score
answer_end = torch.argmax(answer_end_scores) + 1
answer = tokenizer.convert_tokens_to_string(
    tokenizer.convert_ids_to_tokens(input_ids[answer_start:answer_end])
)
print(f"Question: {question}")
print(f"Answer: {answer}")`,highlighted:`inputs = tokenizer(question, context, add_special_tokens=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>)
input_ids = inputs[<span class="hljs-string">&quot;input_ids&quot;</span>][<span class="hljs-number">0</span>]
outputs = model(**inputs)
answer_start_scores = outputs.start_logits
answer_end_scores = outputs.end_logits
<span class="hljs-comment"># Pour obtenir le d\xE9but de r\xE9ponse le plus probable avec l&#x27;argmax du score</span>
answer_start = torch.argmax(answer_start_scores)
<span class="hljs-comment"># Pour obtenir la fin de r\xE9ponse la plus probable avec l&#x27;argmax du score</span>
answer_end = torch.argmax(answer_end_scores) + <span class="hljs-number">1</span>
answer = tokenizer.convert_tokens_to_string(
    tokenizer.convert_ids_to_tokens(input_ids[answer_start:answer_end])
)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Question: <span class="hljs-subst">{question}</span>&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Answer: <span class="hljs-subst">{answer}</span>&quot;</span>)`}}),ws=new w({props:{code:`"""
Question: Which frameworks can I use? # Quels frameworks puis-je utiliser ?
Answer: pytorch, tensorflow, and jax # pytorch, tensorflow et jax
"""`,highlighted:`<span class="hljs-string">&quot;&quot;&quot;
Question: Which frameworks can I use? # Quels frameworks puis-je utiliser ?
Answer: pytorch, tensorflow, and jax # pytorch, tensorflow et jax
&quot;&quot;&quot;</span>`}}),{c(){c=a("meta"),S=p(),q=a("h1"),j=a("a"),M=a("span"),f(E.$$.fragment),H=p(),O=a("span"),k=o("Que faire lorsque vous obtenez une erreur"),x=p(),f(C.$$.fragment),P=p(),$=a("p"),X=o("Dans cette section, nous allons examiner certaines erreurs courantes qui peuvent se produire lorsque vous essayez de g\xE9n\xE9rer des pr\xE9dictions \xE0 partir de votre "),L=a("em"),Y=o("transformer"),Me=o(" fra\xEEchement "),W=a("em"),D=o("finetun\xE9"),js=o(". Cela vous pr\xE9parera pour la "),re=a("a"),ys=o("section 4"),zs=o(" de ce chapitre o\xF9 nous explorerons comment d\xE9boguer la phase d\u2019entra\xEEnement elle-m\xEAme."),Oe=p(),f(Se.$$.fragment),ao=p(),V=a("p"),Sr=o("Nous avons pr\xE9par\xE9 un gabarit de "),Ie=a("a"),Ir=o("d\xE9p\xF4t de mod\xE8les"),Tr=o(" pour cette section et si vous voulez ex\xE9cuter le code de ce chapitre, vous devrez d\u2019abord copier le mod\xE8le dans votre compte sur le "),pe=a("a"),Us=a("em"),Hr=o("Hub"),Lr=o(" d\u2019Hugging Face"),Nr=o(". Pour ce faire, connectez-vous d\u2019abord en ex\xE9cutant l\u2019une ou l\u2019autre des commandes suivantes dans un "),Ws=a("em"),Qr=o("notebook"),Vr=o(" Jupyter :"),lo=p(),f(Te.$$.fragment),io=p(),Ps=a("p"),Fr=o("ou ce qui suit dans votre terminal pr\xE9f\xE9r\xE9 :"),uo=p(),f(He.$$.fragment),po=p(),de=a("p"),Gr=o("Cela vous demandera d\u2019entrer votre nom d\u2019utilisateur et votre mot de passe, et enregistrera un jeton sous "),Xs=a("em"),Jr=o("~/.cache/huggingface/"),Rr=o(". Une fois que vous vous \xEAtes connect\xE9, vous pouvez copier le gabarit du d\xE9p\xF4t avec la fonction suivante :"),co=p(),f(Le.$$.fragment),mo=p(),ce=a("p"),Br=o("Maintenant, lorsque vous appelez "),Ys=a("code"),Ur=o("copy_repository_template()"),Wr=o(", cela va cr\xE9er une copie du gabarit du d\xE9p\xF4t sous votre compte."),fo=p(),ne=a("h2"),me=a("a"),Ks=a("span"),f(Ne.$$.fragment),Xr=p(),Cs=a("span"),Yr=o("D\xE9boguer le pipeline \xE0 partir de \u{1F917} "),Zs=a("i"),Kr=o("Transformers"),vo=p(),fe=a("p"),Zr=o("Pour donner le coup d\u2019envoi de notre voyage dans le monde merveilleux du d\xE9bogage de "),et=a("em"),en=o("transformers"),sn=o(", consid\xE9rez le sc\xE9nario suivant : vous travaillez avec un coll\xE8gue sur un projet de r\xE9ponse \xE0 des questions pour aider les clients d\u2019un site de commerce en ligne \xE0 trouver des r\xE9ponses \xE0 des produits. Votre coll\xE8gue vous envoie un message du genre :"),ho=p(),Ds=a("blockquote"),ae=a("p"),tn=o("Bonjour ! Je viens de r\xE9aliser une exp\xE9rience en utilisant les techniques du "),As=a("a"),on=o("chapitre 7"),rn=o(" du cours d\u2019Hugging Face et j\u2019ai obtenu d\u2019excellents r\xE9sultats sur SQuAD ! Je pense que nous pouvons utiliser ce mod\xE8le comme point de d\xE9part pour notre projet. L\u2019identifiant du mod\xE8le sur le "),st=a("em"),nn=o("Hub"),an=o(" est \u201Clewtun/distillbert-base-uncased-finetuned-squad-d5716d28\u201D. N\u2019h\xE9site pas \xE0 le tester :)"),_o=p(),K=a("p"),ln=o("et la premi\xE8re chose \xE0 laquelle on pense est de charger le mod\xE8le en utilisant le "),tt=a("code"),un=o("pipeline"),pn=o(" de \u{1F917} "),ot=a("em"),dn=o("Transformers"),cn=o(" :"),bo=p(),f(Qe.$$.fragment),go=p(),f(Ve.$$.fragment),qo=p(),F=a("p"),mn=o("Oh non, quelque chose semble s\u2019\xEAtre mal pass\xE9e ! Si vous \xEAtes novice en programmation, ce genre d\u2019erreurs peut sembler un peu cryptique au d\xE9but (qu\u2019est-ce qu\u2019une "),rt=a("code"),fn=o("OSError"),vn=o(" ?!). L\u2019erreur affich\xE9e ici n\u2019est que la derni\xE8re partie d\u2019un rapport d\u2019erreur beaucoup plus long appel\xE9 "),nt=a("em"),hn=o("Python traceback"),_n=o(" (alias "),at=a("em"),bn=o("stack trace"),gn=o("). Par exemple, si vous ex\xE9cutez ce code sur Google Colab, vous devriez voir quelque chose comme la capture d\u2019\xE9cran suivante :"),$o=p(),Fe=a("div"),Ge=a("img"),Eo=p(),y=a("p"),qn=o("Il y a beaucoup d\u2019informations dans ces rapports, nous allons donc en parcourir ensemble les \xE9l\xE9ments cl\xE9s. La premi\xE8re chose \xE0 noter est que les "),lt=a("em"),$n=o("tracebacks"),En=o(" doivent \xEAtre lus "),it=a("em"),wn=o("de bas en haut"),kn=o(". Cela peut sembler bizarre si vous avez l\u2019habitude de lire du texte fran\xE7ais de haut en bas mais cela refl\xE8te le fait que le "),ut=a("em"),xn=o("traceback"),jn=o(" montre la s\xE9quence d\u2019appels de fonction que le "),pt=a("code"),yn=o("pipeline"),zn=o(" fait lors du t\xE9l\xE9chargement du mod\xE8le et du "),dt=a("em"),Pn=o("tokenizer"),Cn=o(". Consultez le "),Ms=a("a"),Dn=o("chapitre 2"),An=o(" pour plus de d\xE9tails sur la fa\xE7on dont le "),ct=a("code"),Mn=o("pipeline"),On=o(" fonctionne sous le capot."),wo=p(),f(ve.$$.fragment),ko=p(),G=a("p"),Sn=o("Cela signifie que la derni\xE8re ligne du "),mt=a("i"),In=o("traceback"),Tn=o(" indique le dernier message d\u2019erreur et donne le nom de l\u2019exception qui a \xE9t\xE9 lev\xE9e. Dans ce cas, le type d\u2019exception est "),ft=a("code"),Hn=o("OSError"),Ln=o(", ce qui indique une erreur li\xE9e au syst\xE8me. Si nous lisons le message d\u2019erreur qui l\u2019accompagne, nous pouvons voir qu\u2019il semble y avoir un probl\xE8me avec le fichier "),vt=a("em"),Nn=o("config.json"),Qn=o(" du mod\xE8le et deux suggestions nous sont donn\xE9es pour le r\xE9soudre :"),xo=p(),f(Je.$$.fragment),jo=p(),f(he.$$.fragment),yo=p(),_e=a("p"),Vn=o("La premi\xE8re suggestion nous demande de v\xE9rifier si l\u2019identifiant du mod\xE8le est effectivement correct, la premi\xE8re chose \xE0 faire est donc de copier l\u2019identifiant et de le coller dans la barre de recherche du "),ht=a("em"),Fn=o("Hub"),Gn=o(" :"),zo=p(),Re=a("div"),Be=a("img"),Po=p(),be=a("p"),Jn=o("Hmm, il semble en effet que le mod\xE8le de notre coll\xE8gue ne soit pas sur le "),_t=a("em"),Rn=o("Hub"),Bn=o("\u2026 Mais il y a une faute de frappe dans le nom du mod\xE8le ! DistilBERT n\u2019a qu\u2019un seul \xAB l \xBB dans son nom alors corrigeons cela et cherchons \xAB lewtun/distilbert-base-uncased-finetuned-squad-d5716d28 \xBB \xE0 la place :"),Co=p(),Ue=a("div"),We=a("img"),Do=p(),Os=a("p"),Un=o("Ok, \xE7a a march\xE9. Maintenant essayons de t\xE9l\xE9charger \xE0 nouveau le mod\xE8le avec le bon identifiant :"),Ao=p(),f(Xe.$$.fragment),Mo=p(),f(Ye.$$.fragment),Oo=p(),J=a("p"),Wn=o("Argh, encore un \xE9chec. Bienvenue dans la vie quotidienne d\u2019un ing\xE9nieur en apprentissage machine ! Puisque nous avons corrig\xE9 l\u2019identifiant du mod\xE8le, le probl\xE8me doit se situer dans le d\xE9p\xF4t lui-m\xEAme. Une fa\xE7on rapide d\u2019acc\xE9der au contenu d\u2019un d\xE9p\xF4t sur le \u{1F917} "),bt=a("em"),Xn=o("Hub"),Yn=o(" est via la fonction "),gt=a("code"),Kn=o("list_repo_files()"),Zn=o(" de la biblioth\xE8que "),qt=a("code"),ea=o("huggingface_hub"),sa=o(" :"),So=p(),f(Ke.$$.fragment),Io=p(),f(Ze.$$.fragment),To=p(),z=a("p"),ta=o("Int\xE9ressant. Il ne semble pas y avoir de fichier "),$t=a("em"),oa=o("config.json"),ra=o(" dans le d\xE9p\xF4t ! Pas \xE9tonnant que notre "),Et=a("code"),na=o("pipeline"),aa=o(" n\u2019ait pas pu charger le mod\xE8le. Notre coll\xE8gue a d\xFB oublier de pousser ce fichier vers le "),wt=a("em"),la=o("Hub"),ia=o(" apr\xE8s l\u2019avoir "),kt=a("em"),ua=o("finetun\xE9"),pa=o(". Dans ce cas, le probl\xE8me semble assez simple \xE0 r\xE9soudre : nous pouvons lui demander d\u2019ajouter le fichier, ou, puisque nous pouvons voir \xE0 partir de l\u2019identifiant du mod\xE8le que le mod\xE8le pr\xE9-entra\xEEn\xE9 utilis\xE9 est "),es=a("a"),xt=a("code"),da=o("distilbert-base-uncased"),ca=o(", nous pouvons t\xE9l\xE9charger la configuration de ce mod\xE8le et la pousser dans notre d\xE9p\xF4t pour voir si cela r\xE9sout le probl\xE8me. Essayons cela. En utilisant les techniques apprises dans le "),Ss=a("a"),ma=o("chapitre 2"),fa=o(", nous pouvons t\xE9l\xE9charger la configuration du mod\xE8le avec la classe "),jt=a("code"),va=o("AutoConfig"),ha=o(" :"),Ho=p(),f(ss.$$.fragment),Lo=p(),f(ge.$$.fragment),No=p(),qe=a("p"),_a=o("Nous pouvons ensuite le pousser vers notre d\xE9p\xF4t de mod\xE8les avec la fonction "),yt=a("code"),ba=o("push_to_hub()"),ga=o(" de la configuration :"),Qo=p(),f(ts.$$.fragment),Vo=p(),Z=a("p"),qa=o("Maintenant, nous pouvons tester si cela a fonctionn\xE9 en chargeant le mod\xE8le depuis le dernier "),zt=a("em"),$a=o("commit"),Ea=o(" de la branche "),Pt=a("code"),wa=o("main"),ka=o(" :"),Fo=p(),f(os.$$.fragment),Go=p(),f(rs.$$.fragment),Jo=p(),Is=a("p"),xa=o("Woohoo, \xE7a a march\xE9 ! R\xE9capitulons ce que vous venez d\u2019apprendre :"),Ro=p(),R=a("ul"),ns=a("li"),ja=o("les messages d\u2019erreur en Python sont appel\xE9s "),Ct=a("em"),ya=o("tracebacks"),za=o(" et sont lus de bas en haut. La derni\xE8re ligne du message d\u2019erreur contient g\xE9n\xE9ralement les informations dont vous avez besoin pour localiser la source du probl\xE8me,"),Pa=p(),as=a("li"),Ca=o("si la derni\xE8re ligne ne contient pas suffisamment d\u2019informations, remontez dans le "),Dt=a("em"),Da=o("traceback"),Aa=o(" et voyez si vous pouvez identifier o\xF9 l\u2019erreur se produit dans le code source,"),Ma=p(),At=a("li"),Oa=o("si aucun des messages d\u2019erreur ne peut vous aider \xE0 d\xE9boguer le probl\xE8me, essayez de rechercher en ligne une solution \xE0 un probl\xE8me similaire,"),Sa=p(),le=a("li"),Ia=o("l\u2019"),Mt=a("code"),Ta=o("huggingface_hub"),Ha=o(" fournit une suite d\u2019outils que vous pouvez utiliser pour interagir avec et d\xE9boguer les d\xE9p\xF4ts sur le "),Ot=a("em"),La=o("Hub"),Na=o("."),Bo=p(),Ts=a("p"),Qa=o("Maintenant que vous savez comment d\xE9boguer un pipeline, examinons un exemple plus d\xE9licat dans la passe avant du mod\xE8le lui-m\xEAme."),Uo=p(),ie=a("h2"),$e=a("a"),St=a("span"),f(ls.$$.fragment),Va=p(),It=a("span"),Fa=o("D\xE9boguer la passe avant de votre mod\xE8le"),Wo=p(),B=a("p"),Ga=o("Bien que le "),Tt=a("code"),Ja=o("pipeline"),Ra=o(" soit parfait pour la plupart des applications o\xF9 vous devez g\xE9n\xE9rer rapidement des pr\xE9dictions, vous aurez parfois besoin d\u2019acc\xE9der aux logits du mod\xE8le (par exemple si vous avez un post-traitement personnalis\xE9 que vous souhaitez appliquer). Pour voir ce qui peut mal tourner dans ce cas, commen\xE7ons par r\xE9cup\xE9rer le mod\xE8le et le "),Ht=a("em"),Ba=o("tokenizer"),Ua=o(" de notre "),Lt=a("code"),Wa=o("pipeline"),Xa=o(" :"),Xo=p(),f(is.$$.fragment),Yo=p(),Ee=a("p"),Ya=o("Ensuite, nous avons besoin d\u2019une question, alors voyons si nos "),Nt=a("em"),Ka=o("frameworks"),Za=o(" pr\xE9f\xE9r\xE9s sont support\xE9s :"),Ko=p(),f(us.$$.fragment),Zo=p(),ee=a("p"),el=o("Comme nous l\u2019avons vu dans le "),Hs=a("a"),sl=o("chapitre 7"),tl=o(", les \xE9tapes habituelles que nous devons suivre sont la tok\xE9nisation des entr\xE9es, l\u2019extraction des logits des "),Qt=a("em"),ol=o("tokens"),rl=o(" de d\xE9but et de fin, puis le d\xE9codage de l\u2019\xE9tendue de la r\xE9ponse :"),er=p(),f(ps.$$.fragment),sr=p(),f(ds.$$.fragment),tr=p(),se=a("p"),nl=o("Il semble que nous ayons un "),Vt=a("em"),al=o("bug"),ll=o(" dans notre code ! Mais il ne nous fait pas peur. Nous pouvons utiliser le d\xE9bogueur Python dans un "),Ft=a("em"),il=o("notebook"),ul=o(" :"),or=p(),f(cs.$$.fragment),rr=p(),Ls=a("p"),pl=o("ou dans un terminal :"),nr=p(),f(ms.$$.fragment),ar=p(),N=a("p"),dl=o("Ici, la lecture du message d\u2019erreur nous indique que l\u2019objet "),Gt=a("code"),cl=o("'list' n'a pas d'attribut 'size'"),ml=o(", et nous pouvons voir une fl\xE8che "),Jt=a("code"),fl=o("-->"),vl=o(" pointant vers la ligne o\xF9 le probl\xE8me a \xE9t\xE9 soulev\xE9 dans "),Rt=a("code"),hl=o("model(**inputs)"),_l=o(". Vous pouvez d\xE9boguer ceci de mani\xE8re interactive en utilisant le d\xE9bogueur Python, mais pour l\u2019instant nous allons simplement imprimer une tranche de "),Bt=a("code"),bl=o("inputs"),gl=o(" pour voir ce que nous avons :"),lr=p(),f(fs.$$.fragment),ir=p(),f(vs.$$.fragment),ur=p(),we=a("p"),ql=o("Cela ressemble certainement \xE0 une "),Ut=a("code"),$l=o("list"),El=o(" ordinaire en Python mais v\xE9rifions le type :"),pr=p(),f(hs.$$.fragment),dr=p(),f(_s.$$.fragment),cr=p(),A=a("p"),wl=o("Oui, c\u2019est bien une "),Wt=a("code"),kl=o("list"),xl=o(" Python. Alors, qu\u2019est-ce qui a mal tourn\xE9 ? Rappelez-vous que dans le "),Ns=a("a"),jl=o("chapitre 2"),yl=o(" nous avons vu que les classes "),Xt=a("code"),zl=o("AutoModelForXxx"),Pl=o(" op\xE8rent sur des "),Yt=a("em"),Cl=o("tenseurs"),Dl=o(" (soit dans PyTorch ou TensorFlow) et qu\u2019une op\xE9ration commune est d\u2019extraire les dimensions d\u2019un tenseur en utilisant "),Kt=a("code"),Al=o("Tensor.size()"),Ml=o(". Jetons un autre coup d\u2019oeil au "),Zt=a("em"),Ol=o("traceback"),Sl=o(" pour voir quelle ligne a d\xE9clench\xE9 l\u2019exception :"),mr=p(),f(bs.$$.fragment),fr=p(),U=a("p"),Il=o("Il semble que notre code ait essay\xE9 d\u2019appeler "),eo=a("code"),Tl=o("input_ids.size()"),Hl=o(", mais cela ne fonctionne clairement pas pour une "),so=a("code"),Ll=o("list"),Nl=o(" Python qui est juste un conteneur. Comment pouvons-nous r\xE9soudre ce probl\xE8me ? La recherche du message d\u2019erreur sur Stack Overflow donne quelques "),gs=a("a"),Ql=o("r\xE9ponses"),Vl=o(" pertinentes. En cliquant sur la premi\xE8re, une question similaire \xE0 la n\xF4tre s\u2019affiche, avec la r\xE9ponse indiqu\xE9e dans la capture d\u2019\xE9cran ci-dessous :"),vr=p(),qs=a("div"),$s=a("img"),hr=p(),te=a("p"),Fl=o("La r\xE9ponse recommande d\u2019ajouter "),to=a("code"),Gl=o("return_tensors='pt'"),Jl=o(" au "),oo=a("em"),Rl=o("tokenizer"),Bl=o(", voyons donc si cela fonctionne pour nous :"),_r=p(),f(Es.$$.fragment),br=p(),f(ws.$$.fragment),gr=p(),ke=a("p"),Ul=o("Super, \xE7a a march\xE9 ! Voil\xE0 un excellent exemple de l\u2019utilit\xE9 de Stack Overflow : en identifiant un probl\xE8me similaire, nous avons pu b\xE9n\xE9ficier de l\u2019exp\xE9rience d\u2019autres membres de la communaut\xE9. Cependant, une recherche de ce type ne donne pas toujours une r\xE9ponse pertinente. Que faire alors dans ce cas ? Heureusement, il existe une communaut\xE9 accueillante de d\xE9veloppeurs sur le "),ks=a("a"),Wl=o("forum d\u2019Hugging Face"),Xl=o(" qui peut vous aider ! Dans la prochaine section, nous verrons comment r\xE9diger de bonnes questions sur les forums pour avoir de bonnes chances d\u2019obtenir une r\xE9ponse."),this.h()},l(e){const n=Gu('[data-svelte="svelte-1phssyn"]',document.head);c=l(n,"META",{name:!0,content:!0}),n.forEach(t),S=d(e),q=l(e,"H1",{class:!0});var xs=i(q);j=l(xs,"A",{id:!0,class:!0,href:!0});var ro=i(j);M=l(ro,"SPAN",{});var no=i(M);v(E.$$.fragment,no),no.forEach(t),ro.forEach(t),H=d(xs),O=l(xs,"SPAN",{});var ai=i(O);k=r(ai,"Que faire lorsque vous obtenez une erreur"),ai.forEach(t),xs.forEach(t),x=d(e),v(C.$$.fragment,e),P=d(e),$=l(e,"P",{});var xe=i($);X=r(xe,"Dans cette section, nous allons examiner certaines erreurs courantes qui peuvent se produire lorsque vous essayez de g\xE9n\xE9rer des pr\xE9dictions \xE0 partir de votre "),L=l(xe,"EM",{});var li=i(L);Y=r(li,"transformer"),li.forEach(t),Me=r(xe," fra\xEEchement "),W=l(xe,"EM",{});var ii=i(W);D=r(ii,"finetun\xE9"),ii.forEach(t),js=r(xe,". Cela vous pr\xE9parera pour la "),re=l(xe,"A",{href:!0});var ui=i(re);ys=r(ui,"section 4"),ui.forEach(t),zs=r(xe," de ce chapitre o\xF9 nous explorerons comment d\xE9boguer la phase d\u2019entra\xEEnement elle-m\xEAme."),xe.forEach(t),Oe=d(e),v(Se.$$.fragment,e),ao=d(e),V=l(e,"P",{});var je=i(V);Sr=r(je,"Nous avons pr\xE9par\xE9 un gabarit de "),Ie=l(je,"A",{href:!0,rel:!0});var pi=i(Ie);Ir=r(pi,"d\xE9p\xF4t de mod\xE8les"),pi.forEach(t),Tr=r(je," pour cette section et si vous voulez ex\xE9cuter le code de ce chapitre, vous devrez d\u2019abord copier le mod\xE8le dans votre compte sur le "),pe=l(je,"A",{href:!0,rel:!0});var Yl=i(pe);Us=l(Yl,"EM",{});var di=i(Us);Hr=r(di,"Hub"),di.forEach(t),Lr=r(Yl," d\u2019Hugging Face"),Yl.forEach(t),Nr=r(je,". Pour ce faire, connectez-vous d\u2019abord en ex\xE9cutant l\u2019une ou l\u2019autre des commandes suivantes dans un "),Ws=l(je,"EM",{});var ci=i(Ws);Qr=r(ci,"notebook"),ci.forEach(t),Vr=r(je," Jupyter :"),je.forEach(t),lo=d(e),v(Te.$$.fragment,e),io=d(e),Ps=l(e,"P",{});var mi=i(Ps);Fr=r(mi,"ou ce qui suit dans votre terminal pr\xE9f\xE9r\xE9 :"),mi.forEach(t),uo=d(e),v(He.$$.fragment,e),po=d(e),de=l(e,"P",{});var $r=i(de);Gr=r($r,"Cela vous demandera d\u2019entrer votre nom d\u2019utilisateur et votre mot de passe, et enregistrera un jeton sous "),Xs=l($r,"EM",{});var fi=i(Xs);Jr=r(fi,"~/.cache/huggingface/"),fi.forEach(t),Rr=r($r,". Une fois que vous vous \xEAtes connect\xE9, vous pouvez copier le gabarit du d\xE9p\xF4t avec la fonction suivante :"),$r.forEach(t),co=d(e),v(Le.$$.fragment,e),mo=d(e),ce=l(e,"P",{});var Er=i(ce);Br=r(Er,"Maintenant, lorsque vous appelez "),Ys=l(Er,"CODE",{});var vi=i(Ys);Ur=r(vi,"copy_repository_template()"),vi.forEach(t),Wr=r(Er,", cela va cr\xE9er une copie du gabarit du d\xE9p\xF4t sous votre compte."),Er.forEach(t),fo=d(e),ne=l(e,"H2",{class:!0});var wr=i(ne);me=l(wr,"A",{id:!0,class:!0,href:!0});var hi=i(me);Ks=l(hi,"SPAN",{});var _i=i(Ks);v(Ne.$$.fragment,_i),_i.forEach(t),hi.forEach(t),Xr=d(wr),Cs=l(wr,"SPAN",{});var Kl=i(Cs);Yr=r(Kl,"D\xE9boguer le pipeline \xE0 partir de \u{1F917} "),Zs=l(Kl,"I",{});var bi=i(Zs);Kr=r(bi,"Transformers"),bi.forEach(t),Kl.forEach(t),wr.forEach(t),vo=d(e),fe=l(e,"P",{});var kr=i(fe);Zr=r(kr,"Pour donner le coup d\u2019envoi de notre voyage dans le monde merveilleux du d\xE9bogage de "),et=l(kr,"EM",{});var gi=i(et);en=r(gi,"transformers"),gi.forEach(t),sn=r(kr,", consid\xE9rez le sc\xE9nario suivant : vous travaillez avec un coll\xE8gue sur un projet de r\xE9ponse \xE0 des questions pour aider les clients d\u2019un site de commerce en ligne \xE0 trouver des r\xE9ponses \xE0 des produits. Votre coll\xE8gue vous envoie un message du genre :"),kr.forEach(t),ho=d(e),Ds=l(e,"BLOCKQUOTE",{});var qi=i(Ds);ae=l(qi,"P",{});var Qs=i(ae);tn=r(Qs,"Bonjour ! Je viens de r\xE9aliser une exp\xE9rience en utilisant les techniques du "),As=l(Qs,"A",{href:!0});var $i=i(As);on=r($i,"chapitre 7"),$i.forEach(t),rn=r(Qs," du cours d\u2019Hugging Face et j\u2019ai obtenu d\u2019excellents r\xE9sultats sur SQuAD ! Je pense que nous pouvons utiliser ce mod\xE8le comme point de d\xE9part pour notre projet. L\u2019identifiant du mod\xE8le sur le "),st=l(Qs,"EM",{});var Ei=i(st);nn=r(Ei,"Hub"),Ei.forEach(t),an=r(Qs," est \u201Clewtun/distillbert-base-uncased-finetuned-squad-d5716d28\u201D. N\u2019h\xE9site pas \xE0 le tester :)"),Qs.forEach(t),qi.forEach(t),_o=d(e),K=l(e,"P",{});var Vs=i(K);ln=r(Vs,"et la premi\xE8re chose \xE0 laquelle on pense est de charger le mod\xE8le en utilisant le "),tt=l(Vs,"CODE",{});var wi=i(tt);un=r(wi,"pipeline"),wi.forEach(t),pn=r(Vs," de \u{1F917} "),ot=l(Vs,"EM",{});var ki=i(ot);dn=r(ki,"Transformers"),ki.forEach(t),cn=r(Vs," :"),Vs.forEach(t),bo=d(e),v(Qe.$$.fragment,e),go=d(e),v(Ve.$$.fragment,e),qo=d(e),F=l(e,"P",{});var ye=i(F);mn=r(ye,"Oh non, quelque chose semble s\u2019\xEAtre mal pass\xE9e ! Si vous \xEAtes novice en programmation, ce genre d\u2019erreurs peut sembler un peu cryptique au d\xE9but (qu\u2019est-ce qu\u2019une "),rt=l(ye,"CODE",{});var xi=i(rt);fn=r(xi,"OSError"),xi.forEach(t),vn=r(ye," ?!). L\u2019erreur affich\xE9e ici n\u2019est que la derni\xE8re partie d\u2019un rapport d\u2019erreur beaucoup plus long appel\xE9 "),nt=l(ye,"EM",{});var ji=i(nt);hn=r(ji,"Python traceback"),ji.forEach(t),_n=r(ye," (alias "),at=l(ye,"EM",{});var yi=i(at);bn=r(yi,"stack trace"),yi.forEach(t),gn=r(ye,"). Par exemple, si vous ex\xE9cutez ce code sur Google Colab, vous devriez voir quelque chose comme la capture d\u2019\xE9cran suivante :"),ye.forEach(t),$o=d(e),Fe=l(e,"DIV",{class:!0});var zi=i(Fe);Ge=l(zi,"IMG",{src:!0,alt:!0,width:!0}),zi.forEach(t),Eo=d(e),y=l(e,"P",{});var I=i(y);qn=r(I,"Il y a beaucoup d\u2019informations dans ces rapports, nous allons donc en parcourir ensemble les \xE9l\xE9ments cl\xE9s. La premi\xE8re chose \xE0 noter est que les "),lt=l(I,"EM",{});var Pi=i(lt);$n=r(Pi,"tracebacks"),Pi.forEach(t),En=r(I," doivent \xEAtre lus "),it=l(I,"EM",{});var Ci=i(it);wn=r(Ci,"de bas en haut"),Ci.forEach(t),kn=r(I,". Cela peut sembler bizarre si vous avez l\u2019habitude de lire du texte fran\xE7ais de haut en bas mais cela refl\xE8te le fait que le "),ut=l(I,"EM",{});var Di=i(ut);xn=r(Di,"traceback"),Di.forEach(t),jn=r(I," montre la s\xE9quence d\u2019appels de fonction que le "),pt=l(I,"CODE",{});var Ai=i(pt);yn=r(Ai,"pipeline"),Ai.forEach(t),zn=r(I," fait lors du t\xE9l\xE9chargement du mod\xE8le et du "),dt=l(I,"EM",{});var Mi=i(dt);Pn=r(Mi,"tokenizer"),Mi.forEach(t),Cn=r(I,". Consultez le "),Ms=l(I,"A",{href:!0});var Oi=i(Ms);Dn=r(Oi,"chapitre 2"),Oi.forEach(t),An=r(I," pour plus de d\xE9tails sur la fa\xE7on dont le "),ct=l(I,"CODE",{});var Si=i(ct);Mn=r(Si,"pipeline"),Si.forEach(t),On=r(I," fonctionne sous le capot."),I.forEach(t),wo=d(e),v(ve.$$.fragment,e),ko=d(e),G=l(e,"P",{});var ze=i(G);Sn=r(ze,"Cela signifie que la derni\xE8re ligne du "),mt=l(ze,"I",{});var Ii=i(mt);In=r(Ii,"traceback"),Ii.forEach(t),Tn=r(ze," indique le dernier message d\u2019erreur et donne le nom de l\u2019exception qui a \xE9t\xE9 lev\xE9e. Dans ce cas, le type d\u2019exception est "),ft=l(ze,"CODE",{});var Ti=i(ft);Hn=r(Ti,"OSError"),Ti.forEach(t),Ln=r(ze,", ce qui indique une erreur li\xE9e au syst\xE8me. Si nous lisons le message d\u2019erreur qui l\u2019accompagne, nous pouvons voir qu\u2019il semble y avoir un probl\xE8me avec le fichier "),vt=l(ze,"EM",{});var Hi=i(vt);Nn=r(Hi,"config.json"),Hi.forEach(t),Qn=r(ze," du mod\xE8le et deux suggestions nous sont donn\xE9es pour le r\xE9soudre :"),ze.forEach(t),xo=d(e),v(Je.$$.fragment,e),jo=d(e),v(he.$$.fragment,e),yo=d(e),_e=l(e,"P",{});var xr=i(_e);Vn=r(xr,"La premi\xE8re suggestion nous demande de v\xE9rifier si l\u2019identifiant du mod\xE8le est effectivement correct, la premi\xE8re chose \xE0 faire est donc de copier l\u2019identifiant et de le coller dans la barre de recherche du "),ht=l(xr,"EM",{});var Li=i(ht);Fn=r(Li,"Hub"),Li.forEach(t),Gn=r(xr," :"),xr.forEach(t),zo=d(e),Re=l(e,"DIV",{class:!0});var Ni=i(Re);Be=l(Ni,"IMG",{src:!0,alt:!0,width:!0}),Ni.forEach(t),Po=d(e),be=l(e,"P",{});var jr=i(be);Jn=r(jr,"Hmm, il semble en effet que le mod\xE8le de notre coll\xE8gue ne soit pas sur le "),_t=l(jr,"EM",{});var Qi=i(_t);Rn=r(Qi,"Hub"),Qi.forEach(t),Bn=r(jr,"\u2026 Mais il y a une faute de frappe dans le nom du mod\xE8le ! DistilBERT n\u2019a qu\u2019un seul \xAB l \xBB dans son nom alors corrigeons cela et cherchons \xAB lewtun/distilbert-base-uncased-finetuned-squad-d5716d28 \xBB \xE0 la place :"),jr.forEach(t),Co=d(e),Ue=l(e,"DIV",{class:!0});var Vi=i(Ue);We=l(Vi,"IMG",{src:!0,alt:!0,width:!0}),Vi.forEach(t),Do=d(e),Os=l(e,"P",{});var Fi=i(Os);Un=r(Fi,"Ok, \xE7a a march\xE9. Maintenant essayons de t\xE9l\xE9charger \xE0 nouveau le mod\xE8le avec le bon identifiant :"),Fi.forEach(t),Ao=d(e),v(Xe.$$.fragment,e),Mo=d(e),v(Ye.$$.fragment,e),Oo=d(e),J=l(e,"P",{});var Pe=i(J);Wn=r(Pe,"Argh, encore un \xE9chec. Bienvenue dans la vie quotidienne d\u2019un ing\xE9nieur en apprentissage machine ! Puisque nous avons corrig\xE9 l\u2019identifiant du mod\xE8le, le probl\xE8me doit se situer dans le d\xE9p\xF4t lui-m\xEAme. Une fa\xE7on rapide d\u2019acc\xE9der au contenu d\u2019un d\xE9p\xF4t sur le \u{1F917} "),bt=l(Pe,"EM",{});var Gi=i(bt);Xn=r(Gi,"Hub"),Gi.forEach(t),Yn=r(Pe," est via la fonction "),gt=l(Pe,"CODE",{});var Ji=i(gt);Kn=r(Ji,"list_repo_files()"),Ji.forEach(t),Zn=r(Pe," de la biblioth\xE8que "),qt=l(Pe,"CODE",{});var Ri=i(qt);ea=r(Ri,"huggingface_hub"),Ri.forEach(t),sa=r(Pe," :"),Pe.forEach(t),So=d(e),v(Ke.$$.fragment,e),Io=d(e),v(Ze.$$.fragment,e),To=d(e),z=l(e,"P",{});var T=i(z);ta=r(T,"Int\xE9ressant. Il ne semble pas y avoir de fichier "),$t=l(T,"EM",{});var Bi=i($t);oa=r(Bi,"config.json"),Bi.forEach(t),ra=r(T," dans le d\xE9p\xF4t ! Pas \xE9tonnant que notre "),Et=l(T,"CODE",{});var Ui=i(Et);na=r(Ui,"pipeline"),Ui.forEach(t),aa=r(T," n\u2019ait pas pu charger le mod\xE8le. Notre coll\xE8gue a d\xFB oublier de pousser ce fichier vers le "),wt=l(T,"EM",{});var Wi=i(wt);la=r(Wi,"Hub"),Wi.forEach(t),ia=r(T," apr\xE8s l\u2019avoir "),kt=l(T,"EM",{});var Xi=i(kt);ua=r(Xi,"finetun\xE9"),Xi.forEach(t),pa=r(T,". Dans ce cas, le probl\xE8me semble assez simple \xE0 r\xE9soudre : nous pouvons lui demander d\u2019ajouter le fichier, ou, puisque nous pouvons voir \xE0 partir de l\u2019identifiant du mod\xE8le que le mod\xE8le pr\xE9-entra\xEEn\xE9 utilis\xE9 est "),es=l(T,"A",{href:!0,rel:!0});var Yi=i(es);xt=l(Yi,"CODE",{});var Ki=i(xt);da=r(Ki,"distilbert-base-uncased"),Ki.forEach(t),Yi.forEach(t),ca=r(T,", nous pouvons t\xE9l\xE9charger la configuration de ce mod\xE8le et la pousser dans notre d\xE9p\xF4t pour voir si cela r\xE9sout le probl\xE8me. Essayons cela. En utilisant les techniques apprises dans le "),Ss=l(T,"A",{href:!0});var Zi=i(Ss);ma=r(Zi,"chapitre 2"),Zi.forEach(t),fa=r(T,", nous pouvons t\xE9l\xE9charger la configuration du mod\xE8le avec la classe "),jt=l(T,"CODE",{});var eu=i(jt);va=r(eu,"AutoConfig"),eu.forEach(t),ha=r(T," :"),T.forEach(t),Ho=d(e),v(ss.$$.fragment,e),Lo=d(e),v(ge.$$.fragment,e),No=d(e),qe=l(e,"P",{});var yr=i(qe);_a=r(yr,"Nous pouvons ensuite le pousser vers notre d\xE9p\xF4t de mod\xE8les avec la fonction "),yt=l(yr,"CODE",{});var su=i(yt);ba=r(su,"push_to_hub()"),su.forEach(t),ga=r(yr," de la configuration :"),yr.forEach(t),Qo=d(e),v(ts.$$.fragment,e),Vo=d(e),Z=l(e,"P",{});var Fs=i(Z);qa=r(Fs,"Maintenant, nous pouvons tester si cela a fonctionn\xE9 en chargeant le mod\xE8le depuis le dernier "),zt=l(Fs,"EM",{});var tu=i(zt);$a=r(tu,"commit"),tu.forEach(t),Ea=r(Fs," de la branche "),Pt=l(Fs,"CODE",{});var ou=i(Pt);wa=r(ou,"main"),ou.forEach(t),ka=r(Fs," :"),Fs.forEach(t),Fo=d(e),v(os.$$.fragment,e),Go=d(e),v(rs.$$.fragment,e),Jo=d(e),Is=l(e,"P",{});var ru=i(Is);xa=r(ru,"Woohoo, \xE7a a march\xE9 ! R\xE9capitulons ce que vous venez d\u2019apprendre :"),ru.forEach(t),Ro=d(e),R=l(e,"UL",{});var Ce=i(R);ns=l(Ce,"LI",{});var zr=i(ns);ja=r(zr,"les messages d\u2019erreur en Python sont appel\xE9s "),Ct=l(zr,"EM",{});var nu=i(Ct);ya=r(nu,"tracebacks"),nu.forEach(t),za=r(zr," et sont lus de bas en haut. La derni\xE8re ligne du message d\u2019erreur contient g\xE9n\xE9ralement les informations dont vous avez besoin pour localiser la source du probl\xE8me,"),zr.forEach(t),Pa=d(Ce),as=l(Ce,"LI",{});var Pr=i(as);Ca=r(Pr,"si la derni\xE8re ligne ne contient pas suffisamment d\u2019informations, remontez dans le "),Dt=l(Pr,"EM",{});var au=i(Dt);Da=r(au,"traceback"),au.forEach(t),Aa=r(Pr," et voyez si vous pouvez identifier o\xF9 l\u2019erreur se produit dans le code source,"),Pr.forEach(t),Ma=d(Ce),At=l(Ce,"LI",{});var lu=i(At);Oa=r(lu,"si aucun des messages d\u2019erreur ne peut vous aider \xE0 d\xE9boguer le probl\xE8me, essayez de rechercher en ligne une solution \xE0 un probl\xE8me similaire,"),lu.forEach(t),Sa=d(Ce),le=l(Ce,"LI",{});var Gs=i(le);Ia=r(Gs,"l\u2019"),Mt=l(Gs,"CODE",{});var iu=i(Mt);Ta=r(iu,"huggingface_hub"),iu.forEach(t),Ha=r(Gs," fournit une suite d\u2019outils que vous pouvez utiliser pour interagir avec et d\xE9boguer les d\xE9p\xF4ts sur le "),Ot=l(Gs,"EM",{});var uu=i(Ot);La=r(uu,"Hub"),uu.forEach(t),Na=r(Gs,"."),Gs.forEach(t),Ce.forEach(t),Bo=d(e),Ts=l(e,"P",{});var pu=i(Ts);Qa=r(pu,"Maintenant que vous savez comment d\xE9boguer un pipeline, examinons un exemple plus d\xE9licat dans la passe avant du mod\xE8le lui-m\xEAme."),pu.forEach(t),Uo=d(e),ie=l(e,"H2",{class:!0});var Cr=i(ie);$e=l(Cr,"A",{id:!0,class:!0,href:!0});var du=i($e);St=l(du,"SPAN",{});var cu=i(St);v(ls.$$.fragment,cu),cu.forEach(t),du.forEach(t),Va=d(Cr),It=l(Cr,"SPAN",{});var mu=i(It);Fa=r(mu,"D\xE9boguer la passe avant de votre mod\xE8le"),mu.forEach(t),Cr.forEach(t),Wo=d(e),B=l(e,"P",{});var De=i(B);Ga=r(De,"Bien que le "),Tt=l(De,"CODE",{});var fu=i(Tt);Ja=r(fu,"pipeline"),fu.forEach(t),Ra=r(De," soit parfait pour la plupart des applications o\xF9 vous devez g\xE9n\xE9rer rapidement des pr\xE9dictions, vous aurez parfois besoin d\u2019acc\xE9der aux logits du mod\xE8le (par exemple si vous avez un post-traitement personnalis\xE9 que vous souhaitez appliquer). Pour voir ce qui peut mal tourner dans ce cas, commen\xE7ons par r\xE9cup\xE9rer le mod\xE8le et le "),Ht=l(De,"EM",{});var vu=i(Ht);Ba=r(vu,"tokenizer"),vu.forEach(t),Ua=r(De," de notre "),Lt=l(De,"CODE",{});var hu=i(Lt);Wa=r(hu,"pipeline"),hu.forEach(t),Xa=r(De," :"),De.forEach(t),Xo=d(e),v(is.$$.fragment,e),Yo=d(e),Ee=l(e,"P",{});var Dr=i(Ee);Ya=r(Dr,"Ensuite, nous avons besoin d\u2019une question, alors voyons si nos "),Nt=l(Dr,"EM",{});var _u=i(Nt);Ka=r(_u,"frameworks"),_u.forEach(t),Za=r(Dr," pr\xE9f\xE9r\xE9s sont support\xE9s :"),Dr.forEach(t),Ko=d(e),v(us.$$.fragment,e),Zo=d(e),ee=l(e,"P",{});var Js=i(ee);el=r(Js,"Comme nous l\u2019avons vu dans le "),Hs=l(Js,"A",{href:!0});var bu=i(Hs);sl=r(bu,"chapitre 7"),bu.forEach(t),tl=r(Js,", les \xE9tapes habituelles que nous devons suivre sont la tok\xE9nisation des entr\xE9es, l\u2019extraction des logits des "),Qt=l(Js,"EM",{});var gu=i(Qt);ol=r(gu,"tokens"),gu.forEach(t),rl=r(Js," de d\xE9but et de fin, puis le d\xE9codage de l\u2019\xE9tendue de la r\xE9ponse :"),Js.forEach(t),er=d(e),v(ps.$$.fragment,e),sr=d(e),v(ds.$$.fragment,e),tr=d(e),se=l(e,"P",{});var Rs=i(se);nl=r(Rs,"Il semble que nous ayons un "),Vt=l(Rs,"EM",{});var qu=i(Vt);al=r(qu,"bug"),qu.forEach(t),ll=r(Rs," dans notre code ! Mais il ne nous fait pas peur. Nous pouvons utiliser le d\xE9bogueur Python dans un "),Ft=l(Rs,"EM",{});var $u=i(Ft);il=r($u,"notebook"),$u.forEach(t),ul=r(Rs," :"),Rs.forEach(t),or=d(e),v(cs.$$.fragment,e),rr=d(e),Ls=l(e,"P",{});var Eu=i(Ls);pl=r(Eu,"ou dans un terminal :"),Eu.forEach(t),nr=d(e),v(ms.$$.fragment,e),ar=d(e),N=l(e,"P",{});var oe=i(N);dl=r(oe,"Ici, la lecture du message d\u2019erreur nous indique que l\u2019objet "),Gt=l(oe,"CODE",{});var wu=i(Gt);cl=r(wu,"'list' n'a pas d'attribut 'size'"),wu.forEach(t),ml=r(oe,", et nous pouvons voir une fl\xE8che "),Jt=l(oe,"CODE",{});var ku=i(Jt);fl=r(ku,"-->"),ku.forEach(t),vl=r(oe," pointant vers la ligne o\xF9 le probl\xE8me a \xE9t\xE9 soulev\xE9 dans "),Rt=l(oe,"CODE",{});var xu=i(Rt);hl=r(xu,"model(**inputs)"),xu.forEach(t),_l=r(oe,". Vous pouvez d\xE9boguer ceci de mani\xE8re interactive en utilisant le d\xE9bogueur Python, mais pour l\u2019instant nous allons simplement imprimer une tranche de "),Bt=l(oe,"CODE",{});var ju=i(Bt);bl=r(ju,"inputs"),ju.forEach(t),gl=r(oe," pour voir ce que nous avons :"),oe.forEach(t),lr=d(e),v(fs.$$.fragment,e),ir=d(e),v(vs.$$.fragment,e),ur=d(e),we=l(e,"P",{});var Ar=i(we);ql=r(Ar,"Cela ressemble certainement \xE0 une "),Ut=l(Ar,"CODE",{});var yu=i(Ut);$l=r(yu,"list"),yu.forEach(t),El=r(Ar," ordinaire en Python mais v\xE9rifions le type :"),Ar.forEach(t),pr=d(e),v(hs.$$.fragment,e),dr=d(e),v(_s.$$.fragment,e),cr=d(e),A=l(e,"P",{});var Q=i(A);wl=r(Q,"Oui, c\u2019est bien une "),Wt=l(Q,"CODE",{});var zu=i(Wt);kl=r(zu,"list"),zu.forEach(t),xl=r(Q," Python. Alors, qu\u2019est-ce qui a mal tourn\xE9 ? Rappelez-vous que dans le "),Ns=l(Q,"A",{href:!0});var Pu=i(Ns);jl=r(Pu,"chapitre 2"),Pu.forEach(t),yl=r(Q," nous avons vu que les classes "),Xt=l(Q,"CODE",{});var Cu=i(Xt);zl=r(Cu,"AutoModelForXxx"),Cu.forEach(t),Pl=r(Q," op\xE8rent sur des "),Yt=l(Q,"EM",{});var Du=i(Yt);Cl=r(Du,"tenseurs"),Du.forEach(t),Dl=r(Q," (soit dans PyTorch ou TensorFlow) et qu\u2019une op\xE9ration commune est d\u2019extraire les dimensions d\u2019un tenseur en utilisant "),Kt=l(Q,"CODE",{});var Au=i(Kt);Al=r(Au,"Tensor.size()"),Au.forEach(t),Ml=r(Q,". Jetons un autre coup d\u2019oeil au "),Zt=l(Q,"EM",{});var Mu=i(Zt);Ol=r(Mu,"traceback"),Mu.forEach(t),Sl=r(Q," pour voir quelle ligne a d\xE9clench\xE9 l\u2019exception :"),Q.forEach(t),mr=d(e),v(bs.$$.fragment,e),fr=d(e),U=l(e,"P",{});var Ae=i(U);Il=r(Ae,"Il semble que notre code ait essay\xE9 d\u2019appeler "),eo=l(Ae,"CODE",{});var Ou=i(eo);Tl=r(Ou,"input_ids.size()"),Ou.forEach(t),Hl=r(Ae,", mais cela ne fonctionne clairement pas pour une "),so=l(Ae,"CODE",{});var Su=i(so);Ll=r(Su,"list"),Su.forEach(t),Nl=r(Ae," Python qui est juste un conteneur. Comment pouvons-nous r\xE9soudre ce probl\xE8me ? La recherche du message d\u2019erreur sur Stack Overflow donne quelques "),gs=l(Ae,"A",{href:!0,rel:!0});var Iu=i(gs);Ql=r(Iu,"r\xE9ponses"),Iu.forEach(t),Vl=r(Ae," pertinentes. En cliquant sur la premi\xE8re, une question similaire \xE0 la n\xF4tre s\u2019affiche, avec la r\xE9ponse indiqu\xE9e dans la capture d\u2019\xE9cran ci-dessous :"),Ae.forEach(t),vr=d(e),qs=l(e,"DIV",{class:!0});var Tu=i(qs);$s=l(Tu,"IMG",{src:!0,alt:!0,width:!0}),Tu.forEach(t),hr=d(e),te=l(e,"P",{});var Bs=i(te);Fl=r(Bs,"La r\xE9ponse recommande d\u2019ajouter "),to=l(Bs,"CODE",{});var Hu=i(to);Gl=r(Hu,"return_tensors='pt'"),Hu.forEach(t),Jl=r(Bs," au "),oo=l(Bs,"EM",{});var Lu=i(oo);Rl=r(Lu,"tokenizer"),Lu.forEach(t),Bl=r(Bs,", voyons donc si cela fonctionne pour nous :"),Bs.forEach(t),_r=d(e),v(Es.$$.fragment,e),br=d(e),v(ws.$$.fragment,e),gr=d(e),ke=l(e,"P",{});var Mr=i(ke);Ul=r(Mr,"Super, \xE7a a march\xE9 ! Voil\xE0 un excellent exemple de l\u2019utilit\xE9 de Stack Overflow : en identifiant un probl\xE8me similaire, nous avons pu b\xE9n\xE9ficier de l\u2019exp\xE9rience d\u2019autres membres de la communaut\xE9. Cependant, une recherche de ce type ne donne pas toujours une r\xE9ponse pertinente. Que faire alors dans ce cas ? Heureusement, il existe une communaut\xE9 accueillante de d\xE9veloppeurs sur le "),ks=l(Mr,"A",{href:!0,rel:!0});var Nu=i(ks);Wl=r(Nu,"forum d\u2019Hugging Face"),Nu.forEach(t),Xl=r(Mr," qui peut vous aider ! Dans la prochaine section, nous verrons comment r\xE9diger de bonnes questions sur les forums pour avoir de bonnes chances d\u2019obtenir une r\xE9ponse."),Mr.forEach(t),this.h()},h(){m(c,"name","hf:doc:metadata"),m(c,"content",JSON.stringify(Yu)),m(j,"id","que-faire-lorsque-vous-obtenez-une-erreur"),m(j,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),m(j,"href","#que-faire-lorsque-vous-obtenez-une-erreur"),m(q,"class","relative group"),m(re,"href","/course/chapter8/fr/section4"),m(Ie,"href","https://huggingface.co/lewtun/distilbert-base-uncased-finetuned-squad-d5716d28"),m(Ie,"rel","nofollow"),m(pe,"href","https://huggingface.co"),m(pe,"rel","nofollow"),m(me,"id","dboguer-le-pipeline-partir-de-itransformersi"),m(me,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),m(me,"href","#dboguer-le-pipeline-partir-de-itransformersi"),m(ne,"class","relative group"),m(As,"href","/course/fr/chapiter7/7"),Or(Ge.src,ti="https://huggingface.co/datasets/huggingface-course/documentation-images/resolve/main/en/chapter8/traceback.png")||m(Ge,"src",ti),m(Ge,"alt","A Python traceback."),m(Ge,"width","100%"),m(Fe,"class","flex justify-center"),m(Ms,"href","/course/fr/chapter2"),Or(Be.src,oi="https://huggingface.co/datasets/huggingface-course/documentation-images/resolve/main/en/chapter8/wrong-model-id.png")||m(Be,"src",oi),m(Be,"alt","The wrong model name."),m(Be,"width","100%"),m(Re,"class","flex justify-center"),Or(We.src,ri="https://huggingface.co/datasets/huggingface-course/documentation-images/resolve/main/en/chapter8/true-model-id.png")||m(We,"src",ri),m(We,"alt","The right model name."),m(We,"width","100%"),m(Ue,"class","flex justify-center"),m(es,"href","https://huggingface.co/distilbert-base-uncased"),m(es,"rel","nofollow"),m(Ss,"href","/course/fr/chapter2"),m($e,"id","dboguer-la-passe-avant-de-votre-modle"),m($e,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),m($e,"href","#dboguer-la-passe-avant-de-votre-modle"),m(ie,"class","relative group"),m(Hs,"href","/course/fr/chapter7"),m(Ns,"href","/course/fr/chapter2"),m(gs,"href","https://stackoverflow.com/search?q=AttributeError%3A+%27list%27+object+has+no+attribute+%27size%27&s=c15ec54c-63cb-481d-a749-408920073e8f"),m(gs,"rel","nofollow"),Or($s.src,ni="https://huggingface.co/datasets/huggingface-course/documentation-images/resolve/main/en/chapter8/stack-overflow.png")||m($s,"src",ni),m($s,"alt","An answer from Stack Overflow."),m($s,"width","100%"),m(qs,"class","flex justify-center"),m(ks,"href","https://discuss.huggingface.co/"),m(ks,"rel","nofollow")},m(e,n){s(document.head,c),u(e,S,n),u(e,q,n),s(q,j),s(j,M),h(E,M,null),s(q,H),s(q,O),s(O,k),u(e,x,n),h(C,e,n),u(e,P,n),u(e,$,n),s($,X),s($,L),s(L,Y),s($,Me),s($,W),s(W,D),s($,js),s($,re),s(re,ys),s($,zs),u(e,Oe,n),h(Se,e,n),u(e,ao,n),u(e,V,n),s(V,Sr),s(V,Ie),s(Ie,Ir),s(V,Tr),s(V,pe),s(pe,Us),s(Us,Hr),s(pe,Lr),s(V,Nr),s(V,Ws),s(Ws,Qr),s(V,Vr),u(e,lo,n),h(Te,e,n),u(e,io,n),u(e,Ps,n),s(Ps,Fr),u(e,uo,n),h(He,e,n),u(e,po,n),u(e,de,n),s(de,Gr),s(de,Xs),s(Xs,Jr),s(de,Rr),u(e,co,n),h(Le,e,n),u(e,mo,n),u(e,ce,n),s(ce,Br),s(ce,Ys),s(Ys,Ur),s(ce,Wr),u(e,fo,n),u(e,ne,n),s(ne,me),s(me,Ks),h(Ne,Ks,null),s(ne,Xr),s(ne,Cs),s(Cs,Yr),s(Cs,Zs),s(Zs,Kr),u(e,vo,n),u(e,fe,n),s(fe,Zr),s(fe,et),s(et,en),s(fe,sn),u(e,ho,n),u(e,Ds,n),s(Ds,ae),s(ae,tn),s(ae,As),s(As,on),s(ae,rn),s(ae,st),s(st,nn),s(ae,an),u(e,_o,n),u(e,K,n),s(K,ln),s(K,tt),s(tt,un),s(K,pn),s(K,ot),s(ot,dn),s(K,cn),u(e,bo,n),h(Qe,e,n),u(e,go,n),h(Ve,e,n),u(e,qo,n),u(e,F,n),s(F,mn),s(F,rt),s(rt,fn),s(F,vn),s(F,nt),s(nt,hn),s(F,_n),s(F,at),s(at,bn),s(F,gn),u(e,$o,n),u(e,Fe,n),s(Fe,Ge),u(e,Eo,n),u(e,y,n),s(y,qn),s(y,lt),s(lt,$n),s(y,En),s(y,it),s(it,wn),s(y,kn),s(y,ut),s(ut,xn),s(y,jn),s(y,pt),s(pt,yn),s(y,zn),s(y,dt),s(dt,Pn),s(y,Cn),s(y,Ms),s(Ms,Dn),s(y,An),s(y,ct),s(ct,Mn),s(y,On),u(e,wo,n),h(ve,e,n),u(e,ko,n),u(e,G,n),s(G,Sn),s(G,mt),s(mt,In),s(G,Tn),s(G,ft),s(ft,Hn),s(G,Ln),s(G,vt),s(vt,Nn),s(G,Qn),u(e,xo,n),h(Je,e,n),u(e,jo,n),h(he,e,n),u(e,yo,n),u(e,_e,n),s(_e,Vn),s(_e,ht),s(ht,Fn),s(_e,Gn),u(e,zo,n),u(e,Re,n),s(Re,Be),u(e,Po,n),u(e,be,n),s(be,Jn),s(be,_t),s(_t,Rn),s(be,Bn),u(e,Co,n),u(e,Ue,n),s(Ue,We),u(e,Do,n),u(e,Os,n),s(Os,Un),u(e,Ao,n),h(Xe,e,n),u(e,Mo,n),h(Ye,e,n),u(e,Oo,n),u(e,J,n),s(J,Wn),s(J,bt),s(bt,Xn),s(J,Yn),s(J,gt),s(gt,Kn),s(J,Zn),s(J,qt),s(qt,ea),s(J,sa),u(e,So,n),h(Ke,e,n),u(e,Io,n),h(Ze,e,n),u(e,To,n),u(e,z,n),s(z,ta),s(z,$t),s($t,oa),s(z,ra),s(z,Et),s(Et,na),s(z,aa),s(z,wt),s(wt,la),s(z,ia),s(z,kt),s(kt,ua),s(z,pa),s(z,es),s(es,xt),s(xt,da),s(z,ca),s(z,Ss),s(Ss,ma),s(z,fa),s(z,jt),s(jt,va),s(z,ha),u(e,Ho,n),h(ss,e,n),u(e,Lo,n),h(ge,e,n),u(e,No,n),u(e,qe,n),s(qe,_a),s(qe,yt),s(yt,ba),s(qe,ga),u(e,Qo,n),h(ts,e,n),u(e,Vo,n),u(e,Z,n),s(Z,qa),s(Z,zt),s(zt,$a),s(Z,Ea),s(Z,Pt),s(Pt,wa),s(Z,ka),u(e,Fo,n),h(os,e,n),u(e,Go,n),h(rs,e,n),u(e,Jo,n),u(e,Is,n),s(Is,xa),u(e,Ro,n),u(e,R,n),s(R,ns),s(ns,ja),s(ns,Ct),s(Ct,ya),s(ns,za),s(R,Pa),s(R,as),s(as,Ca),s(as,Dt),s(Dt,Da),s(as,Aa),s(R,Ma),s(R,At),s(At,Oa),s(R,Sa),s(R,le),s(le,Ia),s(le,Mt),s(Mt,Ta),s(le,Ha),s(le,Ot),s(Ot,La),s(le,Na),u(e,Bo,n),u(e,Ts,n),s(Ts,Qa),u(e,Uo,n),u(e,ie,n),s(ie,$e),s($e,St),h(ls,St,null),s(ie,Va),s(ie,It),s(It,Fa),u(e,Wo,n),u(e,B,n),s(B,Ga),s(B,Tt),s(Tt,Ja),s(B,Ra),s(B,Ht),s(Ht,Ba),s(B,Ua),s(B,Lt),s(Lt,Wa),s(B,Xa),u(e,Xo,n),h(is,e,n),u(e,Yo,n),u(e,Ee,n),s(Ee,Ya),s(Ee,Nt),s(Nt,Ka),s(Ee,Za),u(e,Ko,n),h(us,e,n),u(e,Zo,n),u(e,ee,n),s(ee,el),s(ee,Hs),s(Hs,sl),s(ee,tl),s(ee,Qt),s(Qt,ol),s(ee,rl),u(e,er,n),h(ps,e,n),u(e,sr,n),h(ds,e,n),u(e,tr,n),u(e,se,n),s(se,nl),s(se,Vt),s(Vt,al),s(se,ll),s(se,Ft),s(Ft,il),s(se,ul),u(e,or,n),h(cs,e,n),u(e,rr,n),u(e,Ls,n),s(Ls,pl),u(e,nr,n),h(ms,e,n),u(e,ar,n),u(e,N,n),s(N,dl),s(N,Gt),s(Gt,cl),s(N,ml),s(N,Jt),s(Jt,fl),s(N,vl),s(N,Rt),s(Rt,hl),s(N,_l),s(N,Bt),s(Bt,bl),s(N,gl),u(e,lr,n),h(fs,e,n),u(e,ir,n),h(vs,e,n),u(e,ur,n),u(e,we,n),s(we,ql),s(we,Ut),s(Ut,$l),s(we,El),u(e,pr,n),h(hs,e,n),u(e,dr,n),h(_s,e,n),u(e,cr,n),u(e,A,n),s(A,wl),s(A,Wt),s(Wt,kl),s(A,xl),s(A,Ns),s(Ns,jl),s(A,yl),s(A,Xt),s(Xt,zl),s(A,Pl),s(A,Yt),s(Yt,Cl),s(A,Dl),s(A,Kt),s(Kt,Al),s(A,Ml),s(A,Zt),s(Zt,Ol),s(A,Sl),u(e,mr,n),h(bs,e,n),u(e,fr,n),u(e,U,n),s(U,Il),s(U,eo),s(eo,Tl),s(U,Hl),s(U,so),s(so,Ll),s(U,Nl),s(U,gs),s(gs,Ql),s(U,Vl),u(e,vr,n),u(e,qs,n),s(qs,$s),u(e,hr,n),u(e,te,n),s(te,Fl),s(te,to),s(to,Gl),s(te,Jl),s(te,oo),s(oo,Rl),s(te,Bl),u(e,_r,n),h(Es,e,n),u(e,br,n),h(ws,e,n),u(e,gr,n),u(e,ke,n),s(ke,Ul),s(ke,ks),s(ks,Wl),s(ke,Xl),qr=!0},p(e,[n]){const xs={};n&2&&(xs.$$scope={dirty:n,ctx:e}),ve.$set(xs);const ro={};n&2&&(ro.$$scope={dirty:n,ctx:e}),he.$set(ro);const no={};n&2&&(no.$$scope={dirty:n,ctx:e}),ge.$set(no)},i(e){qr||(_(E.$$.fragment,e),_(C.$$.fragment,e),_(Se.$$.fragment,e),_(Te.$$.fragment,e),_(He.$$.fragment,e),_(Le.$$.fragment,e),_(Ne.$$.fragment,e),_(Qe.$$.fragment,e),_(Ve.$$.fragment,e),_(ve.$$.fragment,e),_(Je.$$.fragment,e),_(he.$$.fragment,e),_(Xe.$$.fragment,e),_(Ye.$$.fragment,e),_(Ke.$$.fragment,e),_(Ze.$$.fragment,e),_(ss.$$.fragment,e),_(ge.$$.fragment,e),_(ts.$$.fragment,e),_(os.$$.fragment,e),_(rs.$$.fragment,e),_(ls.$$.fragment,e),_(is.$$.fragment,e),_(us.$$.fragment,e),_(ps.$$.fragment,e),_(ds.$$.fragment,e),_(cs.$$.fragment,e),_(ms.$$.fragment,e),_(fs.$$.fragment,e),_(vs.$$.fragment,e),_(hs.$$.fragment,e),_(_s.$$.fragment,e),_(bs.$$.fragment,e),_(Es.$$.fragment,e),_(ws.$$.fragment,e),qr=!0)},o(e){b(E.$$.fragment,e),b(C.$$.fragment,e),b(Se.$$.fragment,e),b(Te.$$.fragment,e),b(He.$$.fragment,e),b(Le.$$.fragment,e),b(Ne.$$.fragment,e),b(Qe.$$.fragment,e),b(Ve.$$.fragment,e),b(ve.$$.fragment,e),b(Je.$$.fragment,e),b(he.$$.fragment,e),b(Xe.$$.fragment,e),b(Ye.$$.fragment,e),b(Ke.$$.fragment,e),b(Ze.$$.fragment,e),b(ss.$$.fragment,e),b(ge.$$.fragment,e),b(ts.$$.fragment,e),b(os.$$.fragment,e),b(rs.$$.fragment,e),b(ls.$$.fragment,e),b(is.$$.fragment,e),b(us.$$.fragment,e),b(ps.$$.fragment,e),b(ds.$$.fragment,e),b(cs.$$.fragment,e),b(ms.$$.fragment,e),b(fs.$$.fragment,e),b(vs.$$.fragment,e),b(hs.$$.fragment,e),b(_s.$$.fragment,e),b(bs.$$.fragment,e),b(Es.$$.fragment,e),b(ws.$$.fragment,e),qr=!1},d(e){t(c),e&&t(S),e&&t(q),g(E),e&&t(x),g(C,e),e&&t(P),e&&t($),e&&t(Oe),g(Se,e),e&&t(ao),e&&t(V),e&&t(lo),g(Te,e),e&&t(io),e&&t(Ps),e&&t(uo),g(He,e),e&&t(po),e&&t(de),e&&t(co),g(Le,e),e&&t(mo),e&&t(ce),e&&t(fo),e&&t(ne),g(Ne),e&&t(vo),e&&t(fe),e&&t(ho),e&&t(Ds),e&&t(_o),e&&t(K),e&&t(bo),g(Qe,e),e&&t(go),g(Ve,e),e&&t(qo),e&&t(F),e&&t($o),e&&t(Fe),e&&t(Eo),e&&t(y),e&&t(wo),g(ve,e),e&&t(ko),e&&t(G),e&&t(xo),g(Je,e),e&&t(jo),g(he,e),e&&t(yo),e&&t(_e),e&&t(zo),e&&t(Re),e&&t(Po),e&&t(be),e&&t(Co),e&&t(Ue),e&&t(Do),e&&t(Os),e&&t(Ao),g(Xe,e),e&&t(Mo),g(Ye,e),e&&t(Oo),e&&t(J),e&&t(So),g(Ke,e),e&&t(Io),g(Ze,e),e&&t(To),e&&t(z),e&&t(Ho),g(ss,e),e&&t(Lo),g(ge,e),e&&t(No),e&&t(qe),e&&t(Qo),g(ts,e),e&&t(Vo),e&&t(Z),e&&t(Fo),g(os,e),e&&t(Go),g(rs,e),e&&t(Jo),e&&t(Is),e&&t(Ro),e&&t(R),e&&t(Bo),e&&t(Ts),e&&t(Uo),e&&t(ie),g(ls),e&&t(Wo),e&&t(B),e&&t(Xo),g(is,e),e&&t(Yo),e&&t(Ee),e&&t(Ko),g(us,e),e&&t(Zo),e&&t(ee),e&&t(er),g(ps,e),e&&t(sr),g(ds,e),e&&t(tr),e&&t(se),e&&t(or),g(cs,e),e&&t(rr),e&&t(Ls),e&&t(nr),g(ms,e),e&&t(ar),e&&t(N),e&&t(lr),g(fs,e),e&&t(ir),g(vs,e),e&&t(ur),e&&t(we),e&&t(pr),g(hs,e),e&&t(dr),g(_s,e),e&&t(cr),e&&t(A),e&&t(mr),g(bs,e),e&&t(fr),e&&t(U),e&&t(vr),e&&t(qs),e&&t(hr),e&&t(te),e&&t(_r),g(Es,e),e&&t(br),g(ws,e),e&&t(gr),e&&t(ke)}}}const Yu={local:"que-faire-lorsque-vous-obtenez-une-erreur",sections:[{local:"dboguer-le-pipeline-partir-de-itransformersi",title:"D\xE9boguer le pipeline \xE0 partir de \u{1F917} <i>Transformers</i>"},{local:"dboguer-la-passe-avant-de-votre-modle",title:"D\xE9boguer la passe avant de votre mod\xE8le"}],title:"Que faire lorsque vous obtenez une erreur"};function Ku(ue){return Ju(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class np extends Qu{constructor(c){super();Vu(this,c,Ku,Xu,Fu,{})}}export{np as default,Yu as metadata};
