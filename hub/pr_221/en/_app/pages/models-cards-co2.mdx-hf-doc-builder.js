import{S as da,i as pa,s as ya,e as a,k as f,w as oe,t as r,N as ba,c as i,d as o,m as u,a as s,x as ae,h as n,b as c,G as t,g as h,y as re,L as va,q as ie,o as ne,B as se,v as wa}from"../chunks/vendor-hf-doc-builder.js";import{I as Ne}from"../chunks/IconCopyLink-hf-doc-builder.js";import{C as ga}from"../chunks/CodeBlock-hf-doc-builder.js";function _a(To){let b,xe,v,k,le,B,dt,he,pt,Le,w,C,ce,G,yt,fe,bt,je,m,vt,D,wt,gt,ue,_t,Et,me,$t,kt,He,g,P,de,F,Ct,pe,Pt,Me,X,At,Be,d,ye,Tt,St,be,Ot,Ut,ve,qt,It,_,Nt,W,xt,Lt,R,jt,Ht,Ge,E,A,we,K,Mt,ge,Bt,De,Z,Gt,Fe,Y,We,$,T,_e,Q,Dt,Ee,Ft,Re,S,Wt,$e,Rt,Kt,Ke,ee,Yt,Ye,p,Qt,ke,Jt,zt,Ce,Vt,Xt,J,Zt,eo,Qe,O,to,Pe,oo,ao,Je,U,ro,Ae,io,no,ze,q,so,Te,lo,ho,Ve,I,co,Se,fo,uo,Xe,N,z,mo,Oe,po,yo,bo,y,vo,Ue,wo,go,qe,_o,Eo,Ie,$o,ko,Ze,x,Co,V,Po,Ao,et;return B=new Ne({}),G=new Ne({}),F=new Ne({}),K=new Ne({}),Y=new ga({props:{code:`---
co2_eq_emissions:
      emissions: "in grams of CO2"
      source: "source of the information, either directly from AutoTrain, code carbon or from a scientific article documenting the model"
      training_type: "pre-training or fine-tuning"
      geographical_location: "as granular as possible, for instance Quebec, Canada or Brooklyn, NY, USA"
      hardware_used: "how much compute and what kind, e.g. 8 v100 GPUs"
---`,highlighted:`<span class="hljs-meta">---</span>
<span class="hljs-attr">co2_eq_emissions:</span>
      <span class="hljs-attr">emissions:</span> <span class="hljs-string">&quot;in grams of CO2&quot;</span>
      <span class="hljs-attr">source:</span> <span class="hljs-string">&quot;source of the information, either directly from AutoTrain, code carbon or from a scientific article documenting the model&quot;</span>
      <span class="hljs-attr">training_type:</span> <span class="hljs-string">&quot;pre-training or fine-tuning&quot;</span>
      <span class="hljs-attr">geographical_location:</span> <span class="hljs-string">&quot;as granular as possible, for instance Quebec, Canada or Brooklyn, NY, USA&quot;</span>
      <span class="hljs-attr">hardware_used:</span> <span class="hljs-string">&quot;how much compute and what kind, e.g. 8 v100 GPUs&quot;</span>
<span class="hljs-meta">---</span>`}}),Q=new Ne({}),{c(){b=a("meta"),xe=f(),v=a("h1"),k=a("a"),le=a("span"),oe(B.$$.fragment),dt=f(),he=a("span"),pt=r("Displaying carbon emissions for your model"),Le=f(),w=a("h2"),C=a("a"),ce=a("span"),oe(G.$$.fragment),yt=f(),fe=a("span"),bt=r("Why is it beneficial to calculate the carbon emissions of my model?"),je=f(),m=a("p"),vt=r("Training ML models is often energy-intensive and can produce a substantial carbon footprint, as described by "),D=a("a"),wt=r("Strubell et al."),gt=r(". It\u2019s therefore important to "),ue=a("em"),_t=r("track"),Et=r(" and "),me=a("em"),$t=r("report"),kt=r(" the emissions of models to get a better idea of the environmental impacts of our field."),He=f(),g=a("h2"),P=a("a"),de=a("span"),oe(F.$$.fragment),Ct=f(),pe=a("span"),Pt=r("What information should I include about the carbon footprint of my model?"),Me=f(),X=a("p"),At=r("If you can, you should include information about:"),Be=f(),d=a("ul"),ye=a("li"),Tt=r("where the model was trained (in terms of location)"),St=f(),be=a("li"),Ot=r("the hardware used \u2014 e.g. GPU, TPU, or CPU, and how many"),Ut=f(),ve=a("li"),qt=r("training type: pre-training or fine-tuning"),It=f(),_=a("li"),Nt=r("the estimated carbon footprint of the model, calculated in real-time with the "),W=a("a"),xt=r("Code Carbon"),Lt=r(" package or after training using the "),R=a("a"),jt=r("ML CO2 Calculator"),Ht=r("."),Ge=f(),E=a("h2"),A=a("a"),we=a("span"),oe(K.$$.fragment),Mt=f(),ge=a("span"),Bt=r("Carbon footprint metadata"),De=f(),Z=a("p"),Gt=r("You can add the carbon footprint data to the model card metadata (in the README.md file). The structure of the metadata should be:"),Fe=f(),oe(Y.$$.fragment),We=f(),$=a("h2"),T=a("a"),_e=a("span"),oe(Q.$$.fragment),Dt=f(),Ee=a("span"),Ft=r("How is the carbon footprint of my model calculated? \u{1F30E}"),Re=f(),S=a("p"),Wt=r("Considering the computing hardware, location, usage, and training time, you can estimate how much CO"),$e=a("sub"),Rt=r("2"),Kt=r(" the model produced."),Ke=f(),ee=a("p"),Yt=r("The math is pretty simple! \u2795"),Ye=f(),p=a("p"),Qt=r("First, you take the "),ke=a("em"),Jt=r("carbon intensity"),zt=r(" of the electric grid used for the training \u2014 this is how much CO"),Ce=a("sub"),Vt=r("2"),Xt=r(" is produced by KwH of electricity used. The carbon intensity depends on the location of the hardware and the "),J=a("a"),Zt=r("energy mix"),eo=r(" used at that location \u2014 whether it\u2019s renewable energy like solar \u{1F31E}, wind \u{1F32C}\uFE0F and hydro \u{1F4A7}, or non-renewable energy like coal \u26AB and natural gas \u{1F4A8}. The more renewable energy gets used for training, the less carbon-intensive it is!"),Qe=f(),O=a("p"),to=r("Then, you take the power consumption of the GPU during training using the "),Pe=a("code"),oo=r("pynvml"),ao=r(" library."),Je=f(),U=a("p"),ro=r("Finally, you multiply the power consumption and carbon intensity by the training time of the model, and you have an estimate of the CO"),Ae=a("sub"),io=r("2"),no=r(" emission."),ze=f(),q=a("p"),so=r("Keep in mind that this isn\u2019t an exact number because other factors come into play \u2014 like the energy used for data center heating and cooling \u2014 which will increase carbon emissions. But this will give you a good idea of the scale of CO"),Te=a("sub"),lo=r("2"),ho=r(" emissions that your model is producing!"),Ve=f(),I=a("p"),co=r("To add "),Se=a("strong"),fo=r("Carbon Emissions"),uo=r(" metadata to your models:"),Xe=f(),N=a("ol"),z=a("li"),mo=r("If you are using "),Oe=a("strong"),po=r("AutoTrain"),yo=r(", this is tracked for you \u{1F525}"),bo=f(),y=a("li"),vo=r("Otherwise, use a tracker like  Code Carbon in your training code, then specify "),Ue=a("code"),wo=r("co2_eq_emissions.emissions: 1.2345"),go=r(" in your model card metadata, where "),qe=a("code"),_o=r("1.2345"),Eo=r(" is the emissions value in "),Ie=a("strong"),$o=r("grams"),ko=r("."),Ze=f(),x=a("p"),Co=r("To learn more about the carbon footprint of Transformers, check out the "),V=a("a"),Po=r("video"),Ao=r(", part of the Hugging Face Course!"),this.h()},l(e){const l=ba('[data-svelte="svelte-1phssyn"]',document.head);b=i(l,"META",{name:!0,content:!0}),l.forEach(o),xe=u(e),v=i(e,"H1",{class:!0});var tt=s(v);k=i(tt,"A",{id:!0,class:!0,href:!0});var So=s(k);le=i(So,"SPAN",{});var Oo=s(le);ae(B.$$.fragment,Oo),Oo.forEach(o),So.forEach(o),dt=u(tt),he=i(tt,"SPAN",{});var Uo=s(he);pt=n(Uo,"Displaying carbon emissions for your model"),Uo.forEach(o),tt.forEach(o),Le=u(e),w=i(e,"H2",{class:!0});var ot=s(w);C=i(ot,"A",{id:!0,class:!0,href:!0});var qo=s(C);ce=i(qo,"SPAN",{});var Io=s(ce);ae(G.$$.fragment,Io),Io.forEach(o),qo.forEach(o),yt=u(ot),fe=i(ot,"SPAN",{});var No=s(fe);bt=n(No,"Why is it beneficial to calculate the carbon emissions of my model?"),No.forEach(o),ot.forEach(o),je=u(e),m=i(e,"P",{});var L=s(m);vt=n(L,"Training ML models is often energy-intensive and can produce a substantial carbon footprint, as described by "),D=i(L,"A",{href:!0,rel:!0});var xo=s(D);wt=n(xo,"Strubell et al."),xo.forEach(o),gt=n(L,". It\u2019s therefore important to "),ue=i(L,"EM",{});var Lo=s(ue);_t=n(Lo,"track"),Lo.forEach(o),Et=n(L," and "),me=i(L,"EM",{});var jo=s(me);$t=n(jo,"report"),jo.forEach(o),kt=n(L," the emissions of models to get a better idea of the environmental impacts of our field."),L.forEach(o),He=u(e),g=i(e,"H2",{class:!0});var at=s(g);P=i(at,"A",{id:!0,class:!0,href:!0});var Ho=s(P);de=i(Ho,"SPAN",{});var Mo=s(de);ae(F.$$.fragment,Mo),Mo.forEach(o),Ho.forEach(o),Ct=u(at),pe=i(at,"SPAN",{});var Bo=s(pe);Pt=n(Bo,"What information should I include about the carbon footprint of my model?"),Bo.forEach(o),at.forEach(o),Me=u(e),X=i(e,"P",{});var Go=s(X);At=n(Go,"If you can, you should include information about:"),Go.forEach(o),Be=u(e),d=i(e,"UL",{});var j=s(d);ye=i(j,"LI",{});var Do=s(ye);Tt=n(Do,"where the model was trained (in terms of location)"),Do.forEach(o),St=u(j),be=i(j,"LI",{});var Fo=s(be);Ot=n(Fo,"the hardware used \u2014 e.g. GPU, TPU, or CPU, and how many"),Fo.forEach(o),Ut=u(j),ve=i(j,"LI",{});var Wo=s(ve);qt=n(Wo,"training type: pre-training or fine-tuning"),Wo.forEach(o),It=u(j),_=i(j,"LI",{});var te=s(_);Nt=n(te,"the estimated carbon footprint of the model, calculated in real-time with the "),W=i(te,"A",{href:!0,rel:!0});var Ro=s(W);xt=n(Ro,"Code Carbon"),Ro.forEach(o),Lt=n(te," package or after training using the "),R=i(te,"A",{href:!0,rel:!0});var Ko=s(R);jt=n(Ko,"ML CO2 Calculator"),Ko.forEach(o),Ht=n(te,"."),te.forEach(o),j.forEach(o),Ge=u(e),E=i(e,"H2",{class:!0});var rt=s(E);A=i(rt,"A",{id:!0,class:!0,href:!0});var Yo=s(A);we=i(Yo,"SPAN",{});var Qo=s(we);ae(K.$$.fragment,Qo),Qo.forEach(o),Yo.forEach(o),Mt=u(rt),ge=i(rt,"SPAN",{});var Jo=s(ge);Bt=n(Jo,"Carbon footprint metadata"),Jo.forEach(o),rt.forEach(o),De=u(e),Z=i(e,"P",{});var zo=s(Z);Gt=n(zo,"You can add the carbon footprint data to the model card metadata (in the README.md file). The structure of the metadata should be:"),zo.forEach(o),Fe=u(e),ae(Y.$$.fragment,e),We=u(e),$=i(e,"H2",{class:!0});var it=s($);T=i(it,"A",{id:!0,class:!0,href:!0});var Vo=s(T);_e=i(Vo,"SPAN",{});var Xo=s(_e);ae(Q.$$.fragment,Xo),Xo.forEach(o),Vo.forEach(o),Dt=u(it),Ee=i(it,"SPAN",{});var Zo=s(Ee);Ft=n(Zo,"How is the carbon footprint of my model calculated? \u{1F30E}"),Zo.forEach(o),it.forEach(o),Re=u(e),S=i(e,"P",{});var nt=s(S);Wt=n(nt,"Considering the computing hardware, location, usage, and training time, you can estimate how much CO"),$e=i(nt,"SUB",{});var ea=s($e);Rt=n(ea,"2"),ea.forEach(o),Kt=n(nt," the model produced."),nt.forEach(o),Ke=u(e),ee=i(e,"P",{});var ta=s(ee);Yt=n(ta,"The math is pretty simple! \u2795"),ta.forEach(o),Ye=u(e),p=i(e,"P",{});var H=s(p);Qt=n(H,"First, you take the "),ke=i(H,"EM",{});var oa=s(ke);Jt=n(oa,"carbon intensity"),oa.forEach(o),zt=n(H," of the electric grid used for the training \u2014 this is how much CO"),Ce=i(H,"SUB",{});var aa=s(Ce);Vt=n(aa,"2"),aa.forEach(o),Xt=n(H," is produced by KwH of electricity used. The carbon intensity depends on the location of the hardware and the "),J=i(H,"A",{href:!0,rel:!0});var ra=s(J);Zt=n(ra,"energy mix"),ra.forEach(o),eo=n(H," used at that location \u2014 whether it\u2019s renewable energy like solar \u{1F31E}, wind \u{1F32C}\uFE0F and hydro \u{1F4A7}, or non-renewable energy like coal \u26AB and natural gas \u{1F4A8}. The more renewable energy gets used for training, the less carbon-intensive it is!"),H.forEach(o),Qe=u(e),O=i(e,"P",{});var st=s(O);to=n(st,"Then, you take the power consumption of the GPU during training using the "),Pe=i(st,"CODE",{});var ia=s(Pe);oo=n(ia,"pynvml"),ia.forEach(o),ao=n(st," library."),st.forEach(o),Je=u(e),U=i(e,"P",{});var lt=s(U);ro=n(lt,"Finally, you multiply the power consumption and carbon intensity by the training time of the model, and you have an estimate of the CO"),Ae=i(lt,"SUB",{});var na=s(Ae);io=n(na,"2"),na.forEach(o),no=n(lt," emission."),lt.forEach(o),ze=u(e),q=i(e,"P",{});var ht=s(q);so=n(ht,"Keep in mind that this isn\u2019t an exact number because other factors come into play \u2014 like the energy used for data center heating and cooling \u2014 which will increase carbon emissions. But this will give you a good idea of the scale of CO"),Te=i(ht,"SUB",{});var sa=s(Te);lo=n(sa,"2"),sa.forEach(o),ho=n(ht," emissions that your model is producing!"),ht.forEach(o),Ve=u(e),I=i(e,"P",{});var ct=s(I);co=n(ct,"To add "),Se=i(ct,"STRONG",{});var la=s(Se);fo=n(la,"Carbon Emissions"),la.forEach(o),uo=n(ct," metadata to your models:"),ct.forEach(o),Xe=u(e),N=i(e,"OL",{});var ft=s(N);z=i(ft,"LI",{});var ut=s(z);mo=n(ut,"If you are using "),Oe=i(ut,"STRONG",{});var ha=s(Oe);po=n(ha,"AutoTrain"),ha.forEach(o),yo=n(ut,", this is tracked for you \u{1F525}"),ut.forEach(o),bo=u(ft),y=i(ft,"LI",{});var M=s(y);vo=n(M,"Otherwise, use a tracker like  Code Carbon in your training code, then specify "),Ue=i(M,"CODE",{});var ca=s(Ue);wo=n(ca,"co2_eq_emissions.emissions: 1.2345"),ca.forEach(o),go=n(M," in your model card metadata, where "),qe=i(M,"CODE",{});var fa=s(qe);_o=n(fa,"1.2345"),fa.forEach(o),Eo=n(M," is the emissions value in "),Ie=i(M,"STRONG",{});var ua=s(Ie);$o=n(ua,"grams"),ua.forEach(o),ko=n(M,"."),M.forEach(o),ft.forEach(o),Ze=u(e),x=i(e,"P",{});var mt=s(x);Co=n(mt,"To learn more about the carbon footprint of Transformers, check out the "),V=i(mt,"A",{href:!0,rel:!0});var ma=s(V);Po=n(ma,"video"),ma.forEach(o),Ao=n(mt,", part of the Hugging Face Course!"),mt.forEach(o),this.h()},h(){c(b,"name","hf:doc:metadata"),c(b,"content",JSON.stringify(Ea)),c(k,"id","displaying-carbon-emissions-for-your-model"),c(k,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(k,"href","#displaying-carbon-emissions-for-your-model"),c(v,"class","relative group"),c(C,"id","why-is-it-beneficial-to-calculate-the-carbon-emissions-of-my-model"),c(C,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(C,"href","#why-is-it-beneficial-to-calculate-the-carbon-emissions-of-my-model"),c(w,"class","relative group"),c(D,"href","https://arxiv.org/abs/1906.02243"),c(D,"rel","nofollow"),c(P,"id","what-information-should-i-include-about-the-carbon-footprint-of-my-model"),c(P,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(P,"href","#what-information-should-i-include-about-the-carbon-footprint-of-my-model"),c(g,"class","relative group"),c(W,"href","https://github.com/mlco2/codecarbon"),c(W,"rel","nofollow"),c(R,"href","https://mlco2.github.io/impact/"),c(R,"rel","nofollow"),c(A,"id","carbon-footprint-metadata"),c(A,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(A,"href","#carbon-footprint-metadata"),c(E,"class","relative group"),c(T,"id","how-is-the-carbon-footprint-of-my-model-calculated"),c(T,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),c(T,"href","#how-is-the-carbon-footprint-of-my-model-calculated"),c($,"class","relative group"),c(J,"href","https://electricitymap.org/"),c(J,"rel","nofollow"),c(V,"href","https://www.youtube.com/watch?v=ftWlj4FBHTg"),c(V,"rel","nofollow")},m(e,l){t(document.head,b),h(e,xe,l),h(e,v,l),t(v,k),t(k,le),re(B,le,null),t(v,dt),t(v,he),t(he,pt),h(e,Le,l),h(e,w,l),t(w,C),t(C,ce),re(G,ce,null),t(w,yt),t(w,fe),t(fe,bt),h(e,je,l),h(e,m,l),t(m,vt),t(m,D),t(D,wt),t(m,gt),t(m,ue),t(ue,_t),t(m,Et),t(m,me),t(me,$t),t(m,kt),h(e,He,l),h(e,g,l),t(g,P),t(P,de),re(F,de,null),t(g,Ct),t(g,pe),t(pe,Pt),h(e,Me,l),h(e,X,l),t(X,At),h(e,Be,l),h(e,d,l),t(d,ye),t(ye,Tt),t(d,St),t(d,be),t(be,Ot),t(d,Ut),t(d,ve),t(ve,qt),t(d,It),t(d,_),t(_,Nt),t(_,W),t(W,xt),t(_,Lt),t(_,R),t(R,jt),t(_,Ht),h(e,Ge,l),h(e,E,l),t(E,A),t(A,we),re(K,we,null),t(E,Mt),t(E,ge),t(ge,Bt),h(e,De,l),h(e,Z,l),t(Z,Gt),h(e,Fe,l),re(Y,e,l),h(e,We,l),h(e,$,l),t($,T),t(T,_e),re(Q,_e,null),t($,Dt),t($,Ee),t(Ee,Ft),h(e,Re,l),h(e,S,l),t(S,Wt),t(S,$e),t($e,Rt),t(S,Kt),h(e,Ke,l),h(e,ee,l),t(ee,Yt),h(e,Ye,l),h(e,p,l),t(p,Qt),t(p,ke),t(ke,Jt),t(p,zt),t(p,Ce),t(Ce,Vt),t(p,Xt),t(p,J),t(J,Zt),t(p,eo),h(e,Qe,l),h(e,O,l),t(O,to),t(O,Pe),t(Pe,oo),t(O,ao),h(e,Je,l),h(e,U,l),t(U,ro),t(U,Ae),t(Ae,io),t(U,no),h(e,ze,l),h(e,q,l),t(q,so),t(q,Te),t(Te,lo),t(q,ho),h(e,Ve,l),h(e,I,l),t(I,co),t(I,Se),t(Se,fo),t(I,uo),h(e,Xe,l),h(e,N,l),t(N,z),t(z,mo),t(z,Oe),t(Oe,po),t(z,yo),t(N,bo),t(N,y),t(y,vo),t(y,Ue),t(Ue,wo),t(y,go),t(y,qe),t(qe,_o),t(y,Eo),t(y,Ie),t(Ie,$o),t(y,ko),h(e,Ze,l),h(e,x,l),t(x,Co),t(x,V),t(V,Po),t(x,Ao),et=!0},p:va,i(e){et||(ie(B.$$.fragment,e),ie(G.$$.fragment,e),ie(F.$$.fragment,e),ie(K.$$.fragment,e),ie(Y.$$.fragment,e),ie(Q.$$.fragment,e),et=!0)},o(e){ne(B.$$.fragment,e),ne(G.$$.fragment,e),ne(F.$$.fragment,e),ne(K.$$.fragment,e),ne(Y.$$.fragment,e),ne(Q.$$.fragment,e),et=!1},d(e){o(b),e&&o(xe),e&&o(v),se(B),e&&o(Le),e&&o(w),se(G),e&&o(je),e&&o(m),e&&o(He),e&&o(g),se(F),e&&o(Me),e&&o(X),e&&o(Be),e&&o(d),e&&o(Ge),e&&o(E),se(K),e&&o(De),e&&o(Z),e&&o(Fe),se(Y,e),e&&o(We),e&&o($),se(Q),e&&o(Re),e&&o(S),e&&o(Ke),e&&o(ee),e&&o(Ye),e&&o(p),e&&o(Qe),e&&o(O),e&&o(Je),e&&o(U),e&&o(ze),e&&o(q),e&&o(Ve),e&&o(I),e&&o(Xe),e&&o(N),e&&o(Ze),e&&o(x)}}}const Ea={local:"displaying-carbon-emissions-for-your-model",sections:[{local:"why-is-it-beneficial-to-calculate-the-carbon-emissions-of-my-model",title:"Why is it beneficial to calculate the carbon emissions of my model?"},{local:"what-information-should-i-include-about-the-carbon-footprint-of-my-model",title:"What information should I include about the carbon footprint of my model?"},{local:"carbon-footprint-metadata",title:"Carbon footprint metadata"},{local:"how-is-the-carbon-footprint-of-my-model-calculated",title:"How is the carbon footprint of my model calculated? \u{1F30E}"}],title:"Displaying carbon emissions for your model"};function $a(To){return wa(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class Aa extends da{constructor(b){super();pa(this,b,$a,_a,ya,{})}}export{Aa as default,Ea as metadata};
