import{S as Ys,i as Js,s as Qs,e as r,k as c,w as O,t as n,N as Vs,c as o,d as a,m as h,a as p,x as B,h as l,b as m,G as t,g as i,y as q,L as Ws,q as K,o as z,B as D,v as Xs}from"../chunks/vendor-hf-doc-builder.js";import{I as Zs}from"../chunks/IconCopyLink-hf-doc-builder.js";import{C as os}from"../chunks/CodeBlock-hf-doc-builder.js";function sa(Cs){let y,Y,g,d,P,b,ps,M,is,J,f,cs,R,hs,us,E,fs,ms,Q,F,ys,V,$,W,G,gs,X,v,Z,H,js,ss,_,j,ds,x,_s,ws,I,bs,Es,$s,u,vs,A,As,Ss,T,ks,Fs,U,Gs,Hs,as,S,ts,N,Ns,es,k,ns;return b=new Zs({}),$=new os({props:{code:"git remote add space https://huggingface.co/spaces/FULL_SPACE_NAME",highlighted:"git remote add space https://huggingface.co/spaces/FULL_SPACE_NAME"}}),v=new os({props:{code:"git push --force space main",highlighted:"git push --force space main"}}),S=new os({props:{code:`
`,highlighted:`<span class="hljs-attr">name:</span> <span class="hljs-string">Sync</span> <span class="hljs-string">to</span> <span class="hljs-string">Hugging</span> <span class="hljs-string">Face</span> <span class="hljs-string">hub</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]

  <span class="hljs-comment"># to run this workflow manually from the Actions tab</span>
  <span class="hljs-attr">workflow_dispatch:</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">sync-to-hub:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">fetch-depth:</span> <span class="hljs-number">0</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Push</span> <span class="hljs-string">to</span> <span class="hljs-string">hub</span>
        <span class="hljs-attr">env:</span>
          <span class="hljs-attr">HF_TOKEN:</span> <span class="hljs-string">\${{</span> <span class="hljs-string">secrets.HF_TOKEN</span> <span class="hljs-string">}}</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">git</span> <span class="hljs-string">push</span> <span class="hljs-string">https://HF_USERNAME:$HF_TOKEN@huggingface.co/spaces/FULL_SPACE_NAME</span> <span class="hljs-string">main</span>`}}),k=new os({props:{code:`
`,highlighted:`<span class="hljs-attr">name:</span> <span class="hljs-string">Check</span> <span class="hljs-string">file</span> <span class="hljs-string">size</span>
<span class="hljs-attr">on:</span>               <span class="hljs-comment"># or directly \`on: [push]\` to run the action on every push on any branch</span>
  <span class="hljs-attr">pull_request:</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]

  <span class="hljs-comment"># to run this workflow manually from the Actions tab</span>
  <span class="hljs-attr">workflow_dispatch:</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">sync-to-hub:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Check</span> <span class="hljs-string">large</span> <span class="hljs-string">files</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">ActionsDesk/lfs-warning@v2.0</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">filesizelimit:</span> <span class="hljs-number">10485760</span> <span class="hljs-comment"># this is 10MB so we can sync to HF Spaces</span>`}}),{c(){y=r("meta"),Y=c(),g=r("h1"),d=r("a"),P=r("span"),O(b.$$.fragment),ps=c(),M=r("span"),is=n("Managing Spaces with Github Actions"),J=c(),f=r("p"),cs=n("You can keep your app in sync with your GitHub repository with "),R=r("strong"),hs=n("Github Actions"),us=n(". Remember that for files larger than 10MB, Spaces requires Git-LFS. If you don\u2019t want to use Git-LFS, you may need to review your files and check your history. Use a tool like "),E=r("a"),fs=n("BFG Repo-Cleaner"),ms=n(" to remove any large files from your history. BFG Repo-Cleaner will keep a local copy of your repository as a backup."),Q=c(),F=r("p"),ys=n("First, you should set up your GitHub repository and Spaces app together. Add your Spaces app as an additional remote to your existing Git repository."),V=c(),O($.$$.fragment),W=c(),G=r("p"),gs=n("Then force push to sync everything for the first time:"),X=c(),O(v.$$.fragment),Z=c(),H=r("p"),js=n("Next, set up a GitHub Action to push your main branch to Spaces. In the example below:"),ss=c(),_=r("ul"),j=r("li"),ds=n("Replace "),x=r("code"),_s=n("HF_USERNAME"),ws=n(" with your username and "),I=r("code"),bs=n("FULL_SPACE_NAME"),Es=n(" with your Space name."),$s=c(),u=r("li"),vs=n("Create a "),A=r("a"),As=n("Github secret"),Ss=n(" with your "),T=r("code"),ks=n("HF_TOKEN"),Fs=n(". You can find your Hugging Face API token under "),U=r("strong"),Gs=n("API Tokens"),Hs=n(" on your Hugging Face profile."),as=c(),O(S.$$.fragment),ts=c(),N=r("p"),Ns=n("Finally, create an Action that automatically checks the file size of any new pull request:"),es=c(),O(k.$$.fragment),this.h()},l(s){const e=Vs('[data-svelte="svelte-1phssyn"]',document.head);y=o(e,"META",{name:!0,content:!0}),e.forEach(a),Y=h(s),g=o(s,"H1",{class:!0});var ls=p(g);d=o(ls,"A",{id:!0,class:!0,href:!0});var Ls=p(d);P=o(Ls,"SPAN",{});var Ps=p(P);B(b.$$.fragment,Ps),Ps.forEach(a),Ls.forEach(a),ps=h(ls),M=o(ls,"SPAN",{});var Ms=p(M);is=l(Ms,"Managing Spaces with Github Actions"),Ms.forEach(a),ls.forEach(a),J=h(s),f=o(s,"P",{});var C=p(f);cs=l(C,"You can keep your app in sync with your GitHub repository with "),R=o(C,"STRONG",{});var Rs=p(R);hs=l(Rs,"Github Actions"),Rs.forEach(a),us=l(C,". Remember that for files larger than 10MB, Spaces requires Git-LFS. If you don\u2019t want to use Git-LFS, you may need to review your files and check your history. Use a tool like "),E=o(C,"A",{href:!0,rel:!0});var xs=p(E);fs=l(xs,"BFG Repo-Cleaner"),xs.forEach(a),ms=l(C," to remove any large files from your history. BFG Repo-Cleaner will keep a local copy of your repository as a backup."),C.forEach(a),Q=h(s),F=o(s,"P",{});var Is=p(F);ys=l(Is,"First, you should set up your GitHub repository and Spaces app together. Add your Spaces app as an additional remote to your existing Git repository."),Is.forEach(a),V=h(s),B($.$$.fragment,s),W=h(s),G=o(s,"P",{});var Ts=p(G);gs=l(Ts,"Then force push to sync everything for the first time:"),Ts.forEach(a),X=h(s),B(v.$$.fragment,s),Z=h(s),H=o(s,"P",{});var Us=p(H);js=l(Us,"Next, set up a GitHub Action to push your main branch to Spaces. In the example below:"),Us.forEach(a),ss=h(s),_=o(s,"UL",{});var rs=p(_);j=o(rs,"LI",{});var L=p(j);ds=l(L,"Replace "),x=o(L,"CODE",{});var Os=p(x);_s=l(Os,"HF_USERNAME"),Os.forEach(a),ws=l(L," with your username and "),I=o(L,"CODE",{});var Bs=p(I);bs=l(Bs,"FULL_SPACE_NAME"),Bs.forEach(a),Es=l(L," with your Space name."),L.forEach(a),$s=h(rs),u=o(rs,"LI",{});var w=p(u);vs=l(w,"Create a "),A=o(w,"A",{href:!0,rel:!0});var qs=p(A);As=l(qs,"Github secret"),qs.forEach(a),Ss=l(w," with your "),T=o(w,"CODE",{});var Ks=p(T);ks=l(Ks,"HF_TOKEN"),Ks.forEach(a),Fs=l(w,". You can find your Hugging Face API token under "),U=o(w,"STRONG",{});var zs=p(U);Gs=l(zs,"API Tokens"),zs.forEach(a),Hs=l(w," on your Hugging Face profile."),w.forEach(a),rs.forEach(a),as=h(s),B(S.$$.fragment,s),ts=h(s),N=o(s,"P",{});var Ds=p(N);Ns=l(Ds,"Finally, create an Action that automatically checks the file size of any new pull request:"),Ds.forEach(a),es=h(s),B(k.$$.fragment,s),this.h()},h(){m(y,"name","hf:doc:metadata"),m(y,"content",JSON.stringify(aa)),m(d,"id","managing-spaces-with-github-actions"),m(d,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),m(d,"href","#managing-spaces-with-github-actions"),m(g,"class","relative group"),m(E,"href","https://rtyley.github.io/bfg-repo-cleaner/"),m(E,"rel","nofollow"),m(A,"href","https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-an-environment"),m(A,"rel","nofollow")},m(s,e){t(document.head,y),i(s,Y,e),i(s,g,e),t(g,d),t(d,P),q(b,P,null),t(g,ps),t(g,M),t(M,is),i(s,J,e),i(s,f,e),t(f,cs),t(f,R),t(R,hs),t(f,us),t(f,E),t(E,fs),t(f,ms),i(s,Q,e),i(s,F,e),t(F,ys),i(s,V,e),q($,s,e),i(s,W,e),i(s,G,e),t(G,gs),i(s,X,e),q(v,s,e),i(s,Z,e),i(s,H,e),t(H,js),i(s,ss,e),i(s,_,e),t(_,j),t(j,ds),t(j,x),t(x,_s),t(j,ws),t(j,I),t(I,bs),t(j,Es),t(_,$s),t(_,u),t(u,vs),t(u,A),t(A,As),t(u,Ss),t(u,T),t(T,ks),t(u,Fs),t(u,U),t(U,Gs),t(u,Hs),i(s,as,e),q(S,s,e),i(s,ts,e),i(s,N,e),t(N,Ns),i(s,es,e),q(k,s,e),ns=!0},p:Ws,i(s){ns||(K(b.$$.fragment,s),K($.$$.fragment,s),K(v.$$.fragment,s),K(S.$$.fragment,s),K(k.$$.fragment,s),ns=!0)},o(s){z(b.$$.fragment,s),z($.$$.fragment,s),z(v.$$.fragment,s),z(S.$$.fragment,s),z(k.$$.fragment,s),ns=!1},d(s){a(y),s&&a(Y),s&&a(g),D(b),s&&a(J),s&&a(f),s&&a(Q),s&&a(F),s&&a(V),D($,s),s&&a(W),s&&a(G),s&&a(X),D(v,s),s&&a(Z),s&&a(H),s&&a(ss),s&&a(_),s&&a(as),D(S,s),s&&a(ts),s&&a(N),s&&a(es),D(k,s)}}}const aa={local:"managing-spaces-with-github-actions",title:"Managing Spaces with Github Actions"};function ta(Cs){return Xs(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class ra extends Ys{constructor(y){super();Js(this,y,ta,sa,Qs,{})}}export{ra as default,aa as metadata};
