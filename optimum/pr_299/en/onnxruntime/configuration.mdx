---
local: configuration
sections:
- local: optimum.onnxruntime.configuration.OptimizationConfig
  title: OptimizationConfig
- local: optimum.onnxruntime.configuration.QuantizationConfig
  title: QuantizationConfig
- local: optimum.onnxruntime.configuration.CalibrationConfig
  title: CalibrationConfig
- local: optimum.onnxruntime.ORTConfig
  title: ORTConfig
title: Configuration
---
<script lang="ts">
import {onMount} from "svelte";
import Tip from "$lib/Tip.svelte";
import Youtube from "$lib/Youtube.svelte";
import Docstring from "$lib/Docstring.svelte";
import CodeBlock from "$lib/CodeBlock.svelte";
import CodeBlockFw from "$lib/CodeBlockFw.svelte";
import DocNotebookDropdown from "$lib/DocNotebookDropdown.svelte";
import IconCopyLink from "$lib/IconCopyLink.svelte";
import FrameworkContent from "$lib/FrameworkContent.svelte";
import Markdown from "$lib/Markdown.svelte";
import Question from "$lib/Question.svelte";
import FrameworkSwitchCourse from "$lib/FrameworkSwitchCourse.svelte";
import InferenceApi from "$lib/InferenceApi.svelte";
import TokenizersLanguageContent from "$lib/TokenizersLanguageContent.svelte";
import ExampleCodeBlock from "$lib/ExampleCodeBlock.svelte";
let fw: "pt" | "tf" = "pt";
onMount(() => {
    const urlParams = new URLSearchParams(window.location.search);
    fw = urlParams.get("fw") || "pt";
});
</script>
<svelte:head>
  <meta name="hf:doc:metadata" content={JSON.stringify(metadata)} >
</svelte:head>
<!--Copyright 2022 The HuggingFace Team. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with
the License. You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on
an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.
-->

<h1 id="configuration">Configuration</h1>

<h2 id="optimum.onnxruntime.configuration.OptimizationConfig">OptimizationConfig</h2>

<div class="docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8">

<docstring><name>class optimum.onnxruntime.configuration.OptimizationConfig</name><anchor>optimum.onnxruntime.configuration.OptimizationConfig</anchor><source>https://github.com/huggingface/optimum/blob/vr_299/src/optimum/onnxruntime/configuration.py#L604</source><parameters>[{"name": "optimization_level", "val": ": int = 1"}, {"name": "optimize_for_gpu", "val": ": bool = False"}, {"name": "fp16", "val": ": bool = False"}, {"name": "optimize_with_onnxruntime_only", "val": ": bool = False"}, {"name": "disable_gelu", "val": ": bool = False"}, {"name": "disable_layer_norm", "val": ": bool = False"}, {"name": "disable_attention", "val": ": bool = False"}, {"name": "disable_skip_layer_norm", "val": ": bool = False"}, {"name": "disable_bias_skip_layer_norm", "val": ": bool = False"}, {"name": "disable_bias_gelu", "val": ": bool = False"}, {"name": "enable_gelu_approximation", "val": ": bool = False"}, {"name": "use_mask_index", "val": ": bool = False"}, {"name": "no_attention_mask", "val": ": bool = False"}, {"name": "disable_embed_layer_norm", "val": ": bool = True"}]</parameters><paramsdesc>- **optimization_level** (`int`, defaults to 1) --
  ONNX opset version to export the model with.
  Optimization level performed by ONNX Runtime of the loaded graph.
  Supported optimization level are 0, 1, 2 and 99.
  0 will disable all optimizations.
  1 will enable basic optimizations.
  2 will enable basic and extended optimizations, including complex node fusions applied to the nodes
  assigned to the CPU or CUDA execution provider, making the resulting optimized graph hardware dependent.
  99 will enable all available optimizations including layout optimizations.
- **optimize_for_gpu** (`bool`, defaults to `False`) --
  Whether to optimize the model for GPU inference.
  The optimized graph might contain operators for GPU or CPU only when `optimization_level` > 1.
- **fp16** (`bool`, defaults to `False`) --
  Whether all weights and nodes should be converted from float32 to float16.
- **optimize_with_onnxruntime_only** (`bool`, defaults to `False`) --
  Whether to only use ONNX Runtime to optimize the model and no graph fusion in Python.
- **disable_gelu** (`bool`, defaults to `False`) --
  Whether to disable the Gelu fusion.
- **disable_layer_norm** (`bool`, defaults to `False`) --
  Whether to disable Layer Normalization fusion.
- **disable_attention** (`bool`, defaults to `False`) --
  Whether to disable Attention fusion.
- **disable_skip_layer_norm** (`bool`, defaults to `False`) --
  Whether to disable SkipLayerNormalization fusion.
- **disable_bias_skip_layer_norm** (`bool`, defaults to `False`) --
  Whether to disable Add Bias and SkipLayerNormalization fusion.
- **disable_bias_gelu** (`bool`, defaults to `False`) --
  Whether to disable Add Bias and Gelu / FastGelu fusion.
- **enable_gelu_approximation** (`bool`, defaults to `False`) --
  Whether to enable Gelu / BiasGelu to FastGelu conversion.
  The default value is set to `False` since this approximation might slightly impact the model's accuracy.
- **use_mask_index** (`bool`, defaults to `False`) --
  Whether to use mask index instead of raw attention mask in the attention operator.
- **no_attention_mask** (`bool`, defaults to `False`) --
  Whether to not use attention masks. Only works for bert model type.
- **disable_embed_layer_norm** (`bool`, defaults to `True`) --
  Whether to disable EmbedLayerNormalization fusion.
  The default value is set to `True` since this fusion is incompatible with ONNX Runtime quantization</paramsdesc><paramgroups>0</paramgroups></docstring>

OptimizationConfig is the configuration class handling all the ONNX Runtime optimization parameters.




</div>

<h2 id="optimum.onnxruntime.configuration.QuantizationConfig">QuantizationConfig</h2>

<div class="docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8">

<docstring><name>class optimum.onnxruntime.configuration.QuantizationConfig</name><anchor>optimum.onnxruntime.configuration.QuantizationConfig</anchor><source>https://github.com/huggingface/optimum/blob/vr_299/src/optimum/onnxruntime/configuration.py#L216</source><parameters>[{"name": "is_static", "val": ": bool"}, {"name": "format", "val": ": QuantFormat"}, {"name": "mode", "val": ": QuantizationMode = <QuantizationMode.QLinearOps: 1>"}, {"name": "activations_dtype", "val": ": QuantType = <QuantType.QUInt8: 1>"}, {"name": "activations_symmetric", "val": ": bool = False"}, {"name": "weights_dtype", "val": ": QuantType = <QuantType.QInt8: 0>"}, {"name": "weights_symmetric", "val": ": bool = True"}, {"name": "per_channel", "val": ": bool = False"}, {"name": "reduce_range", "val": ": bool = False"}, {"name": "nodes_to_quantize", "val": ": typing.List[str] = <factory>"}, {"name": "nodes_to_exclude", "val": ": typing.List[str] = <factory>"}, {"name": "operators_to_quantize", "val": ": typing.List[str] = <factory>"}, {"name": "qdq_add_pair_to_weight", "val": ": bool = False"}, {"name": "qdq_dedicated_pair", "val": ": bool = False"}, {"name": "qdq_op_type_per_channel_support_to_axis", "val": ": typing.Dict[str, int] = <factory>"}]</parameters><paramsdesc>- **is_static** (`bool`) --
  Whether to apply static quantization or dynamic quantization.
- **format** (`QuantFormat`) --
  Targeted ONNX Runtime quantization representation format.
  For the Operator Oriented (QOperator) format, all the quantized operators have their own ONNX definitions.
  For the Tensor Oriented (QDQ) format, the model is quantized by inserting QuantizeLinear / DeQuantizeLinear
  operators.
- **mode** (`QuantizationMode`, defaults to `QuantizationMode.QLinearOps`) --
  Targeted ONNX Runtime quantization mode, default is QLinearOps to match QDQ format.
  When targeting dynamic quantization mode, the default value is `QuantizationMode.IntegerOps` whereas the
  default value for static quantization mode is `QuantizationMode.QLinearOps`.
- **activations_dtype** (`QuantType`, defaults to `QuantType.QUInt8`) --
  The quantization data types to use for the activations.
- **activations_symmetric** (`bool`, defaults to `False`) --
  Whether to apply symmetric quantization on the activations.
- **weights_dtype** (`QuantType`, defaults to `QuantType.QInt8`) --
  The quantization data types to use for the weights.
- **weights_symmetric** (`bool`, defaults to `True`) --
  Whether to apply symmetric quantization on the weights.
- **per_channel** (`bool`, defaults to `False`) --
  Whether we should quantize per-channel (also known as "per-row"). Enabling this can increase overall
  accuracy while making the quantized model heavier.
- **reduce_range** (`bool`, defaults to `False`) --
  Whether to use reduce-range 7-bits integers instead of 8-bits integers.
- **nodes_to_quantize** (`list`) --
  List of the nodes names to quantize.
- **nodes_to_exclude** (`list`) --
  List of the nodes names to exclude when applying quantization.
- **operators_to_quantize** (`list`) --
  List of the operators types to quantize.
- **qdq_add_pair_to_weight** (`bool`, defaults to `False`) --
  By default, floating-point weights are quantized and feed to solely inserted DeQuantizeLinear node.
  If set to True, the floating-point weights will remain and both QuantizeLinear / DeQuantizeLinear nodes
  will be inserted.
- **qdq_dedicated_pair** (`bool`, defaults to `False`) --
  When inserting QDQ pair, multiple nodes can share a single QDQ pair as their inputs. If True, it will
  create an identical and dedicated QDQ pair for each node.
- **qdq_op_type_per_channel_support_to_axis** (`Dict[str, int]`) --
  Set the channel axis for a specific operator type. Effective only when per channel quantization is
  supported and `per_channel` is set to True.</paramsdesc><paramgroups>0</paramgroups></docstring>

QuantizationConfig is the configuration class handling all the ONNX Runtime quantization parameters.




</div>

<h2 id="optimum.onnxruntime.configuration.CalibrationConfig">CalibrationConfig</h2>

<div class="docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8">

<docstring><name>class optimum.onnxruntime.configuration.CalibrationConfig</name><anchor>optimum.onnxruntime.configuration.CalibrationConfig</anchor><source>https://github.com/huggingface/optimum/blob/vr_299/src/optimum/onnxruntime/configuration.py#L38</source><parameters>[{"name": "dataset_name", "val": ": str"}, {"name": "dataset_config_name", "val": ": str"}, {"name": "dataset_split", "val": ": str"}, {"name": "dataset_num_samples", "val": ": int"}, {"name": "method", "val": ": CalibrationMethod"}, {"name": "num_bins", "val": ": typing.Optional[int] = None"}, {"name": "num_quantized_bins", "val": ": typing.Optional[int] = None"}, {"name": "percentile", "val": ": typing.Optional[float] = None"}, {"name": "moving_average", "val": ": typing.Optional[bool] = None"}, {"name": "averaging_constant", "val": ": typing.Optional[float] = None"}]</parameters><paramsdesc>- **dataset_name** (`str`) --
  The name of the calibration dataset.
- **dataset_config_name** (`str`) --
  The name of the calibration dataset configuration.
- **dataset_split** (`str`) --
  Which split of the dataset is used to perform the calibration step.
- **dataset_num_samples** (`int`) --
  The number of samples composing the calibration dataset.
- **method** (`CalibrationMethod`) --
  The method chosen to calculate the activations quantization parameters using the calibration dataset.
- **num_bins** (`int`, *optional*) --
  The number of bins to use when creating the histogram when performing the calibration step using the
  Percentile or Entropy method.
- **num_quantized_bins** (`int`, *optional*) --
  The number of quantized bins to use when performing the calibration step using the Entropy method.
- **percentile** (`float`, *optional*) --
  The percentile to use when computing the activations quantization ranges when performing the calibration
  step using the Percentile method.
- **moving_average** (`bool`, *optional*) --
  Whether to compute the moving average of the minimum and maximum values when performing the calibration step
  using the MinMax method.
- **averaging_constant** (`float`, *optional*) --
  The constant smoothing factor to use when computing the moving average of the minimum and maximum values.
  Effective only when the MinMax calibration method is selected and `moving_average` is set to True.</paramsdesc><paramgroups>0</paramgroups></docstring>

CalibrationConfig is the configuration class handling all the ONNX Runtime parameters related to the calibration
step of static quantization.




</div>

<h2 id="optimum.onnxruntime.ORTConfig">ORTConfig</h2>

<div class="docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8">

<docstring><name>class optimum.onnxruntime.ORTConfig</name><anchor>optimum.onnxruntime.ORTConfig</anchor><source>https://github.com/huggingface/optimum/blob/vr_299/src/optimum/onnxruntime/configuration.py#L665</source><parameters>[{"name": "opset", "val": ": typing.Optional[int] = None"}, {"name": "use_external_data_format", "val": ": bool = False"}, {"name": "optimization", "val": ": typing.Optional[optimum.onnxruntime.configuration.OptimizationConfig] = None"}, {"name": "quantization", "val": ": typing.Optional[optimum.onnxruntime.configuration.QuantizationConfig] = None"}, {"name": "**kwargs", "val": ""}]</parameters><paramsdesc>- **opset** (`int`, *optional*) --
  ONNX opset version to export the model with.
- **use_external_data_format** (`bool`, *optional*, defaults to `False`) --
  Allow exporting model >= than 2Gb.
- **optimization** (`OptimizationConfig`, *optional*, defaults to None) --
  Specify a configuration to optimize ONNX Runtime model
- **quantization** (`QuantizationConfig`, *optional*, defaults to None) --
  Specify a configuration to quantize ONNX Runtime model</paramsdesc><paramgroups>0</paramgroups></docstring>

ORTConfig is the configuration class handling all the ONNX Runtime parameters related to the ONNX IR model export, optimization and quantization parameters.




</div>
