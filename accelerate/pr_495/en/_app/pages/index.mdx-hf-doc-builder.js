import{S as nt,i as dt,s as pt,e as s,k as d,w as ce,t as c,M as ut,c as o,d as a,m as p,a as l,x as ne,h as n,b as r,G as t,g as u,y as de,q as pe,o as ue,B as he,v as ht}from"../chunks/vendor-hf-doc-builder.js";import{T as ft}from"../chunks/Tip-hf-doc-builder.js";import{I as mt}from"../chunks/IconCopyLink-hf-doc-builder.js";import{C as ct}from"../chunks/CodeBlock-hf-doc-builder.js";function gt(U){let h;return{c(){h=c("To get a better idea of this process, make sure to check out the [Tutorials](https://huggingface.co/docs/accelerate/basic_tutorials/overview) !")},l(b){h=n(b,"To get a better idea of this process, make sure to check out the [Tutorials](https://huggingface.co/docs/accelerate/basic_tutorials/overview) !")},m(b,g){u(b,h,g)},d(b){b&&a(h)}}}function bt(U){let h,b,g,x,F,k,fe,W,me,K,S,ge,Q,f,be,G,ve,_e,J,ye,we,P,$e,xe,T,Ae,Ee,X,C,ke,Y,A,Z,I,ee,L,Pe,te,z,ae,j,m,_,V,Te,Ie,H,ze,je,y,B,De,Se,R,Ce,Le,w,q,Ve,He,M,Be,Re,$,N,qe,Me,O,Ne,re;return k=new mt({}),A=new ft({props:{$$slots:{default:[gt]},$$scope:{ctx:U}}}),I=new ct({props:{code:`+from accelerate import Accelerator
+accelerator = Accelerator()

+model, optimizer, training_dataloader, scheduler = accelerator.prepare(
+    model, optimizer, training_dataloader, scheduler
+)

for batch in training_dataloader:
    optimizer.zero_grad()
    inputs, targets = batch
-    inputs = inputs.to(device)
-    targets = targets.to(device)
    outputs = model(inputs)
    loss = loss_function(outputs, targets)
+    accelerator.backward(loss)
    optimizer.step()
    scheduler.step()`,highlighted:`<span class="hljs-addition">+from accelerate import Accelerator</span>
<span class="hljs-addition">+accelerator = Accelerator()</span>

<span class="hljs-addition">+model, optimizer, training_dataloader, scheduler = accelerator.prepare(</span>
<span class="hljs-addition">+    model, optimizer, training_dataloader, scheduler</span>
<span class="hljs-addition">+)</span>

for batch in training_dataloader:
    optimizer.zero_grad()
    inputs, targets = batch
<span class="hljs-deletion">-    inputs = inputs.to(device)</span>
<span class="hljs-deletion">-    targets = targets.to(device)</span>
    outputs = model(inputs)
    loss = loss_function(outputs, targets)
<span class="hljs-addition">+    accelerator.backward(loss)</span>
    optimizer.step()
    scheduler.step()`}}),z=new ct({props:{code:"accelerate launch {my_script.py}",highlighted:"accelerate launch {my_script.py}"}}),{c(){h=s("meta"),b=d(),g=s("h1"),x=s("a"),F=s("span"),ce(k.$$.fragment),fe=d(),W=s("span"),me=c("Accelerate"),K=d(),S=s("p"),ge=c("\u{1F917} Accelerate is a library that enables the same PyTorch code to be run across any distributed configuration by adding just four lines of code! In short, training and inference at scale made simple, efficient and adaptable."),Q=d(),f=s("p"),be=c("Built on "),G=s("code"),ve=c("torch_xla"),_e=c(" and "),J=s("code"),ye=c("torch.distributed"),we=c(`, Accelerate wraps around the tough and problematic code changes that need to occur on each of these
platforms separately so you don\u2019t have to. In minutes, existing codebases can be converted to utilize `),P=s("a"),$e=c("DeepSpeed"),xe=c(", perform "),T=s("a"),Ae=c("fully sharded data parallelism"),Ee=c(", and have automatic support for mixed-precision training!"),X=d(),C=s("p"),ke=c("For an idea of just how easy it can be, here\u2019s a brief example of the changes needed on a basic PyTorch script:"),Y=d(),ce(A.$$.fragment),Z=d(),ce(I.$$.fragment),ee=d(),L=s("p"),Pe=c("Which can then be launched on any system through Accelerate\u2019s CLI interface:"),te=d(),ce(z.$$.fragment),ae=d(),j=s("div"),m=s("div"),_=s("a"),V=s("div"),Te=c("Tutorials"),Ie=d(),H=s("p"),ze=c("Learn the basics and become familiar with using \u{1F917} Accelerate. Start here if you are using \u{1F917} Accelerate for the first time!"),je=d(),y=s("a"),B=s("div"),De=c("How-to guides"),Se=d(),R=s("p"),Ce=c("Practical guides to help you achieve a specific goal. Take a look at these guides to learn how to use \u{1F917} Accelerate to solve real-world problems."),Le=d(),w=s("a"),q=s("div"),Ve=c("Conceptual guides"),He=d(),M=s("p"),Be=c("High-level explanations for building a better understanding of important topics such as avoiding subtle nuances and pitfalls in distributed training and DeepSpeed."),Re=d(),$=s("a"),N=s("div"),qe=c("Reference"),Me=d(),O=s("p"),Ne=c("Technical descriptions of how \u{1F917} Accelerate classes and methods work."),this.h()},l(e){const i=ut('[data-svelte="svelte-1phssyn"]',document.head);h=o(i,"META",{name:!0,content:!0}),i.forEach(a),b=p(e),g=o(e,"H1",{class:!0});var D=l(g);x=o(D,"A",{id:!0,class:!0,href:!0});var Oe=l(x);F=o(Oe,"SPAN",{});var Fe=l(F);ne(k.$$.fragment,Fe),Fe.forEach(a),Oe.forEach(a),fe=p(D),W=o(D,"SPAN",{});var We=l(W);me=n(We,"Accelerate"),We.forEach(a),D.forEach(a),K=p(e),S=o(e,"P",{});var Ge=l(S);ge=n(Ge,"\u{1F917} Accelerate is a library that enables the same PyTorch code to be run across any distributed configuration by adding just four lines of code! In short, training and inference at scale made simple, efficient and adaptable."),Ge.forEach(a),Q=p(e),f=o(e,"P",{});var v=l(f);be=n(v,"Built on "),G=o(v,"CODE",{});var Je=l(G);ve=n(Je,"torch_xla"),Je.forEach(a),_e=n(v," and "),J=o(v,"CODE",{});var Ue=l(J);ye=n(Ue,"torch.distributed"),Ue.forEach(a),we=n(v,`, Accelerate wraps around the tough and problematic code changes that need to occur on each of these
platforms separately so you don\u2019t have to. In minutes, existing codebases can be converted to utilize `),P=o(v,"A",{href:!0,rel:!0});var Ke=l(P);$e=n(Ke,"DeepSpeed"),Ke.forEach(a),xe=n(v,", perform "),T=o(v,"A",{href:!0,rel:!0});var Qe=l(T);Ae=n(Qe,"fully sharded data parallelism"),Qe.forEach(a),Ee=n(v,", and have automatic support for mixed-precision training!"),v.forEach(a),X=p(e),C=o(e,"P",{});var Xe=l(C);ke=n(Xe,"For an idea of just how easy it can be, here\u2019s a brief example of the changes needed on a basic PyTorch script:"),Xe.forEach(a),Y=p(e),ne(A.$$.fragment,e),Z=p(e),ne(I.$$.fragment,e),ee=p(e),L=o(e,"P",{});var Ye=l(L);Pe=n(Ye,"Which can then be launched on any system through Accelerate\u2019s CLI interface:"),Ye.forEach(a),te=p(e),ne(z.$$.fragment,e),ae=p(e),j=o(e,"DIV",{class:!0});var Ze=l(j);m=o(Ze,"DIV",{class:!0});var E=l(m);_=o(E,"A",{class:!0,href:!0});var se=l(_);V=o(se,"DIV",{class:!0});var et=l(V);Te=n(et,"Tutorials"),et.forEach(a),Ie=p(se),H=o(se,"P",{class:!0});var tt=l(H);ze=n(tt,"Learn the basics and become familiar with using \u{1F917} Accelerate. Start here if you are using \u{1F917} Accelerate for the first time!"),tt.forEach(a),se.forEach(a),je=p(E),y=o(E,"A",{class:!0,href:!0});var oe=l(y);B=o(oe,"DIV",{class:!0});var at=l(B);De=n(at,"How-to guides"),at.forEach(a),Se=p(oe),R=o(oe,"P",{class:!0});var rt=l(R);Ce=n(rt,"Practical guides to help you achieve a specific goal. Take a look at these guides to learn how to use \u{1F917} Accelerate to solve real-world problems."),rt.forEach(a),oe.forEach(a),Le=p(E),w=o(E,"A",{class:!0,href:!0});var le=l(w);q=o(le,"DIV",{class:!0});var st=l(q);Ve=n(st,"Conceptual guides"),st.forEach(a),He=p(le),M=o(le,"P",{class:!0});var ot=l(M);Be=n(ot,"High-level explanations for building a better understanding of important topics such as avoiding subtle nuances and pitfalls in distributed training and DeepSpeed."),ot.forEach(a),le.forEach(a),Re=p(E),$=o(E,"A",{class:!0,href:!0});var ie=l($);N=o(ie,"DIV",{class:!0});var lt=l(N);qe=n(lt,"Reference"),lt.forEach(a),Me=p(ie),O=o(ie,"P",{class:!0});var it=l(O);Ne=n(it,"Technical descriptions of how \u{1F917} Accelerate classes and methods work."),it.forEach(a),ie.forEach(a),E.forEach(a),Ze.forEach(a),this.h()},h(){r(h,"name","hf:doc:metadata"),r(h,"content",JSON.stringify(vt)),r(x,"id","accelerate"),r(x,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),r(x,"href","#accelerate"),r(g,"class","relative group"),r(P,"href","https://huggingface.co/docs/accelerate/deepspeed"),r(P,"rel","nofollow"),r(T,"href","https://huggingface.co/docs/accelerate/fsdp"),r(T,"rel","nofollow"),r(V,"class","w-full text-center bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg py-1.5 font-semibold mb-5 text-white text-lg leading-relaxed"),r(H,"class","text-gray-700"),r(_,"class","!no-underline border dark:border-gray-700 p-5 rounded-lg shadow hover:shadow-lg"),r(_,"href","/docs/accelerate/basic_tutorials/overview"),r(B,"class","w-full text-center bg-gradient-to-br from-indigo-400 to-indigo-500 rounded-lg py-1.5 font-semibold mb-5 text-white text-lg leading-relaxed"),r(R,"class","text-gray-700"),r(y,"class","!no-underline border dark:border-gray-700 p-5 rounded-lg shadow hover:shadow-lg"),r(y,"href","/docs/accelerate/utility_guides/gradient_accumulation"),r(q,"class","w-full text-center bg-gradient-to-br from-pink-400 to-pink-500 rounded-lg py-1.5 font-semibold mb-5 text-white text-lg leading-relaxed"),r(M,"class","text-gray-700"),r(w,"class","!no-underline border dark:border-gray-700 p-5 rounded-lg shadow hover:shadow-lg"),r(w,"href","/docs/accelerate/concept_guides/gradient_synchronization"),r(N,"class","w-full text-center bg-gradient-to-br from-purple-400 to-purple-500 rounded-lg py-1.5 font-semibold mb-5 text-white text-lg leading-relaxed"),r(O,"class","text-gray-700"),r($,"class","!no-underline border dark:border-gray-700 p-5 rounded-lg shadow hover:shadow-lg"),r($,"href","/docs/accelerate/package_reference/accelerator"),r(m,"class","w-full flex flex-col space-y-4 md:space-y-0 md:grid md:grid-cols-2 md:gap-y-4 md:gap-x-5"),r(j,"class","mt-10")},m(e,i){t(document.head,h),u(e,b,i),u(e,g,i),t(g,x),t(x,F),de(k,F,null),t(g,fe),t(g,W),t(W,me),u(e,K,i),u(e,S,i),t(S,ge),u(e,Q,i),u(e,f,i),t(f,be),t(f,G),t(G,ve),t(f,_e),t(f,J),t(J,ye),t(f,we),t(f,P),t(P,$e),t(f,xe),t(f,T),t(T,Ae),t(f,Ee),u(e,X,i),u(e,C,i),t(C,ke),u(e,Y,i),de(A,e,i),u(e,Z,i),de(I,e,i),u(e,ee,i),u(e,L,i),t(L,Pe),u(e,te,i),de(z,e,i),u(e,ae,i),u(e,j,i),t(j,m),t(m,_),t(_,V),t(V,Te),t(_,Ie),t(_,H),t(H,ze),t(m,je),t(m,y),t(y,B),t(B,De),t(y,Se),t(y,R),t(R,Ce),t(m,Le),t(m,w),t(w,q),t(q,Ve),t(w,He),t(w,M),t(M,Be),t(m,Re),t(m,$),t($,N),t(N,qe),t($,Me),t($,O),t(O,Ne),re=!0},p(e,[i]){const D={};i&2&&(D.$$scope={dirty:i,ctx:e}),A.$set(D)},i(e){re||(pe(k.$$.fragment,e),pe(A.$$.fragment,e),pe(I.$$.fragment,e),pe(z.$$.fragment,e),re=!0)},o(e){ue(k.$$.fragment,e),ue(A.$$.fragment,e),ue(I.$$.fragment,e),ue(z.$$.fragment,e),re=!1},d(e){a(h),e&&a(b),e&&a(g),he(k),e&&a(K),e&&a(S),e&&a(Q),e&&a(f),e&&a(X),e&&a(C),e&&a(Y),he(A,e),e&&a(Z),he(I,e),e&&a(ee),e&&a(L),e&&a(te),he(z,e),e&&a(ae),e&&a(j)}}}const vt={local:"accelerate",title:"Accelerate"};function _t(U){return ht(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class At extends nt{constructor(h){super();dt(this,h,_t,bt,pt,{})}}export{At as default,vt as metadata};
