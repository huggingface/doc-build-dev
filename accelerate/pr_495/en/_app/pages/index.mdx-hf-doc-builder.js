import{S as nt,i as dt,s as pt,e as o,k as d,w as ce,t as c,M as ut,c as s,d as a,m as p,a as l,x as ne,h as n,b as r,G as t,g as u,y as de,q as pe,o as ue,B as he,v as ht}from"../chunks/vendor-hf-doc-builder.js";import{T as ft}from"../chunks/Tip-hf-doc-builder.js";import{I as mt}from"../chunks/IconCopyLink-hf-doc-builder.js";import{C as ct}from"../chunks/CodeBlock-hf-doc-builder.js";function gt(U){let h;return{c(){h=c("To get a better idea of this process, make sure to check out the [Tutorials](https://huggingface.co/docs/accelerate/basic_tutorials/overview)!")},l(v){h=n(v,"To get a better idea of this process, make sure to check out the [Tutorials](https://huggingface.co/docs/accelerate/basic_tutorials/overview)!")},m(v,g){u(v,h,g)},d(v){v&&a(h)}}}function vt(U){let h,v,g,x,F,k,fe,W,me,K,I,ge,Q,f,ve,G,be,_e,J,ye,we,P,$e,xe,T,Ae,Ee,X,C,ke,Y,A,Z,z,ee,L,Pe,te,D,ae,S,m,_,V,Te,ze,H,De,Se,y,B,je,Ie,R,Ce,Le,w,q,Ve,He,M,Be,Re,$,N,qe,Me,O,Ne,re;return k=new mt({}),A=new ft({props:{$$slots:{default:[gt]},$$scope:{ctx:U}}}),z=new ct({props:{code:`+from accelerate import Accelerator
+accelerator = Accelerator()

+model, optimizer, training_dataloader, scheduler = accelerator.prepare(
+    model, optimizer, training_dataloader, scheduler
+)

for batch in training_dataloader:
    optimizer.zero_grad()
    inputs, targets = batch
-    inputs = inputs.to(device)
-    targets = targets.to(device)
    outputs = model(inputs)
    loss = loss_function(outputs, targets)
+    accelerator.backward(loss)
    optimizer.step()
    scheduler.step()`,highlighted:`<span class="hljs-addition">+from accelerate import Accelerator</span>
<span class="hljs-addition">+accelerator = Accelerator()</span>

<span class="hljs-addition">+model, optimizer, training_dataloader, scheduler = accelerator.prepare(</span>
<span class="hljs-addition">+    model, optimizer, training_dataloader, scheduler</span>
<span class="hljs-addition">+)</span>

for batch in training_dataloader:
    optimizer.zero_grad()
    inputs, targets = batch
<span class="hljs-deletion">-    inputs = inputs.to(device)</span>
<span class="hljs-deletion">-    targets = targets.to(device)</span>
    outputs = model(inputs)
    loss = loss_function(outputs, targets)
<span class="hljs-addition">+    accelerator.backward(loss)</span>
    optimizer.step()
    scheduler.step()`}}),D=new ct({props:{code:"accelerate launch {my_script.py}",highlighted:"accelerate launch {my_script.py}"}}),{c(){h=o("meta"),v=d(),g=o("h1"),x=o("a"),F=o("span"),ce(k.$$.fragment),fe=d(),W=o("span"),me=c("Accelerate"),K=d(),I=o("p"),ge=c("\u{1F917} Accelerate is a library that allows the same PyTorch code be ran across any distributed configuration by adding just four lines of code!"),Q=d(),f=o("p"),ve=c("Built on "),G=o("code"),be=c("torch_xla"),_e=c(" and "),J=o("code"),ye=c("torch.distributed"),we=c(`, Accelerate wraps around the tough and problematic code changes that need to occur on each of these
platforms separately so you don\u2019t have to. In minutes existing codebases can be converted to utilize `),P=o("a"),$e=c("DeepSpeed"),xe=c(", perform "),T=o("a"),Ae=c("fully sharded data parallelism"),Ee=c(", and have automatic support for mixed-precision training!"),X=d(),C=o("p"),ke=c("For an idea of just how easy it can be, here\u2019s a brief example of the changes needed on a basic PyTorch script:"),Y=d(),ce(A.$$.fragment),Z=d(),ce(z.$$.fragment),ee=d(),L=o("p"),Pe=c("Which can then be launched on any system through Accelerate\u2019s CLI interface:"),te=d(),ce(D.$$.fragment),ae=d(),S=o("div"),m=o("div"),_=o("a"),V=o("div"),Te=c("Tutorials"),ze=d(),H=o("p"),De=c("Learn the basics and become familiar with using \u{1F917} Accelerate. Start here if you are using \u{1F917} Accelerate for the first time!"),Se=d(),y=o("a"),B=o("div"),je=c("How-to guides"),Ie=d(),R=o("p"),Ce=c("Practical guides to help you achieve a specific goal. Take a look at these guides to learn how to use \u{1F917} Accelerate to solve real-world problems."),Le=d(),w=o("a"),q=o("div"),Ve=c("Conceptual guides"),He=d(),M=o("p"),Be=c("High-level explanations for building a better understanding of important topics such as avoiding subtle nuances and pitfalls in distributed training and DeepSpeed."),Re=d(),$=o("a"),N=o("div"),qe=c("Reference"),Me=d(),O=o("p"),Ne=c("Technical descriptions of how \u{1F917} Accelerate classes and methods work."),this.h()},l(e){const i=ut('[data-svelte="svelte-1phssyn"]',document.head);h=s(i,"META",{name:!0,content:!0}),i.forEach(a),v=p(e),g=s(e,"H1",{class:!0});var j=l(g);x=s(j,"A",{id:!0,class:!0,href:!0});var Oe=l(x);F=s(Oe,"SPAN",{});var Fe=l(F);ne(k.$$.fragment,Fe),Fe.forEach(a),Oe.forEach(a),fe=p(j),W=s(j,"SPAN",{});var We=l(W);me=n(We,"Accelerate"),We.forEach(a),j.forEach(a),K=p(e),I=s(e,"P",{});var Ge=l(I);ge=n(Ge,"\u{1F917} Accelerate is a library that allows the same PyTorch code be ran across any distributed configuration by adding just four lines of code!"),Ge.forEach(a),Q=p(e),f=s(e,"P",{});var b=l(f);ve=n(b,"Built on "),G=s(b,"CODE",{});var Je=l(G);be=n(Je,"torch_xla"),Je.forEach(a),_e=n(b," and "),J=s(b,"CODE",{});var Ue=l(J);ye=n(Ue,"torch.distributed"),Ue.forEach(a),we=n(b,`, Accelerate wraps around the tough and problematic code changes that need to occur on each of these
platforms separately so you don\u2019t have to. In minutes existing codebases can be converted to utilize `),P=s(b,"A",{href:!0,rel:!0});var Ke=l(P);$e=n(Ke,"DeepSpeed"),Ke.forEach(a),xe=n(b,", perform "),T=s(b,"A",{href:!0,rel:!0});var Qe=l(T);Ae=n(Qe,"fully sharded data parallelism"),Qe.forEach(a),Ee=n(b,", and have automatic support for mixed-precision training!"),b.forEach(a),X=p(e),C=s(e,"P",{});var Xe=l(C);ke=n(Xe,"For an idea of just how easy it can be, here\u2019s a brief example of the changes needed on a basic PyTorch script:"),Xe.forEach(a),Y=p(e),ne(A.$$.fragment,e),Z=p(e),ne(z.$$.fragment,e),ee=p(e),L=s(e,"P",{});var Ye=l(L);Pe=n(Ye,"Which can then be launched on any system through Accelerate\u2019s CLI interface:"),Ye.forEach(a),te=p(e),ne(D.$$.fragment,e),ae=p(e),S=s(e,"DIV",{class:!0});var Ze=l(S);m=s(Ze,"DIV",{class:!0});var E=l(m);_=s(E,"A",{class:!0,href:!0});var oe=l(_);V=s(oe,"DIV",{class:!0});var et=l(V);Te=n(et,"Tutorials"),et.forEach(a),ze=p(oe),H=s(oe,"P",{class:!0});var tt=l(H);De=n(tt,"Learn the basics and become familiar with using \u{1F917} Accelerate. Start here if you are using \u{1F917} Accelerate for the first time!"),tt.forEach(a),oe.forEach(a),Se=p(E),y=s(E,"A",{class:!0,href:!0});var se=l(y);B=s(se,"DIV",{class:!0});var at=l(B);je=n(at,"How-to guides"),at.forEach(a),Ie=p(se),R=s(se,"P",{class:!0});var rt=l(R);Ce=n(rt,"Practical guides to help you achieve a specific goal. Take a look at these guides to learn how to use \u{1F917} Accelerate to solve real-world problems."),rt.forEach(a),se.forEach(a),Le=p(E),w=s(E,"A",{class:!0,href:!0});var le=l(w);q=s(le,"DIV",{class:!0});var ot=l(q);Ve=n(ot,"Conceptual guides"),ot.forEach(a),He=p(le),M=s(le,"P",{class:!0});var st=l(M);Be=n(st,"High-level explanations for building a better understanding of important topics such as avoiding subtle nuances and pitfalls in distributed training and DeepSpeed."),st.forEach(a),le.forEach(a),Re=p(E),$=s(E,"A",{class:!0,href:!0});var ie=l($);N=s(ie,"DIV",{class:!0});var lt=l(N);qe=n(lt,"Reference"),lt.forEach(a),Me=p(ie),O=s(ie,"P",{class:!0});var it=l(O);Ne=n(it,"Technical descriptions of how \u{1F917} Accelerate classes and methods work."),it.forEach(a),ie.forEach(a),E.forEach(a),Ze.forEach(a),this.h()},h(){r(h,"name","hf:doc:metadata"),r(h,"content",JSON.stringify(bt)),r(x,"id","accelerate"),r(x,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),r(x,"href","#accelerate"),r(g,"class","relative group"),r(P,"href","https://github.com/microsoft/DeepSpeed"),r(P,"rel","nofollow"),r(T,"href","https://huggingface.co/docs/accelerate/fsdp"),r(T,"rel","nofollow"),r(V,"class","w-full text-center bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg py-1.5 font-semibold mb-5 text-white text-lg leading-relaxed"),r(H,"class","text-gray-700"),r(_,"class","!no-underline border dark:border-gray-700 p-5 rounded-lg shadow hover:shadow-lg"),r(_,"href","/docs/accelerate/basic_tutorials/overview"),r(B,"class","w-full text-center bg-gradient-to-br from-indigo-400 to-indigo-500 rounded-lg py-1.5 font-semibold mb-5 text-white text-lg leading-relaxed"),r(R,"class","text-gray-700"),r(y,"class","!no-underline border dark:border-gray-700 p-5 rounded-lg shadow hover:shadow-lg"),r(y,"href","/docs/accelerate/utility_guides/gradient_accumulation"),r(q,"class","w-full text-center bg-gradient-to-br from-pink-400 to-pink-500 rounded-lg py-1.5 font-semibold mb-5 text-white text-lg leading-relaxed"),r(M,"class","text-gray-700"),r(w,"class","!no-underline border dark:border-gray-700 p-5 rounded-lg shadow hover:shadow-lg"),r(w,"href","/docs/accelerate/concept_guides/gradient_synchronization"),r(N,"class","w-full text-center bg-gradient-to-br from-purple-400 to-purple-500 rounded-lg py-1.5 font-semibold mb-5 text-white text-lg leading-relaxed"),r(O,"class","text-gray-700"),r($,"class","!no-underline border dark:border-gray-700 p-5 rounded-lg shadow hover:shadow-lg"),r($,"href","/docs/accelerate/package_reference/accelerator"),r(m,"class","w-full flex flex-col space-y-4 md:space-y-0 md:grid md:grid-cols-2 md:gap-y-4 md:gap-x-5"),r(S,"class","mt-10")},m(e,i){t(document.head,h),u(e,v,i),u(e,g,i),t(g,x),t(x,F),de(k,F,null),t(g,fe),t(g,W),t(W,me),u(e,K,i),u(e,I,i),t(I,ge),u(e,Q,i),u(e,f,i),t(f,ve),t(f,G),t(G,be),t(f,_e),t(f,J),t(J,ye),t(f,we),t(f,P),t(P,$e),t(f,xe),t(f,T),t(T,Ae),t(f,Ee),u(e,X,i),u(e,C,i),t(C,ke),u(e,Y,i),de(A,e,i),u(e,Z,i),de(z,e,i),u(e,ee,i),u(e,L,i),t(L,Pe),u(e,te,i),de(D,e,i),u(e,ae,i),u(e,S,i),t(S,m),t(m,_),t(_,V),t(V,Te),t(_,ze),t(_,H),t(H,De),t(m,Se),t(m,y),t(y,B),t(B,je),t(y,Ie),t(y,R),t(R,Ce),t(m,Le),t(m,w),t(w,q),t(q,Ve),t(w,He),t(w,M),t(M,Be),t(m,Re),t(m,$),t($,N),t(N,qe),t($,Me),t($,O),t(O,Ne),re=!0},p(e,[i]){const j={};i&2&&(j.$$scope={dirty:i,ctx:e}),A.$set(j)},i(e){re||(pe(k.$$.fragment,e),pe(A.$$.fragment,e),pe(z.$$.fragment,e),pe(D.$$.fragment,e),re=!0)},o(e){ue(k.$$.fragment,e),ue(A.$$.fragment,e),ue(z.$$.fragment,e),ue(D.$$.fragment,e),re=!1},d(e){a(h),e&&a(v),e&&a(g),he(k),e&&a(K),e&&a(I),e&&a(Q),e&&a(f),e&&a(X),e&&a(C),e&&a(Y),he(A,e),e&&a(Z),he(z,e),e&&a(ee),e&&a(L),e&&a(te),he(D,e),e&&a(ae),e&&a(S)}}}const bt={local:"accelerate",title:"Accelerate"};function _t(U){return ht(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class At extends nt{constructor(h){super();dt(this,h,_t,vt,pt,{})}}export{At as default,bt as metadata};
