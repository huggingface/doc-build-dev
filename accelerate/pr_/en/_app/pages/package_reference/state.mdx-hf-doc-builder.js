import{S as nr,i as sr,s as lr,e as r,k as i,w as Tt,t as o,M as ir,c as a,d as t,m as c,a as n,x as $t,h as s,b as m,G as e,g as _,y as xt,L as cr,q as Ot,o as Nt,B as At,v as dr}from"../../chunks/vendor-hf-doc-builder.js";import{D as or}from"../../chunks/Docstring-hf-doc-builder.js";import{I as hr}from"../../chunks/IconCopyLink-hf-doc-builder.js";function fr(Lt){let v,me,g,E,F,D,Te,W,$e,_e,b,xe,I,Oe,Ne,ve,R,Ae,ge,h,G,Le,B,De,Ie,z,q,Ge,Pe,d,y,M,Ce,Re,U,ke,Fe,We,S,V,Be,ze,k,qe,Me,Ue,w,H,Ve,He,J,Je,je,Ke,T,j,Qe,Xe,K,Ye,Ze,et,$,Q,tt,rt,X,at,ot,nt,x,Y,st,lt,Z,it,ct,Ee,f,P,dt,ee,ht,ft,te,re,ut,pt,C,O,ae,mt,_t,oe,vt,gt,Et,N,ne,bt,yt,se,St,wt,be;return D=new hr({}),G=new or({props:{name:"class accelerate.state.AcceleratorState",anchor:"accelerate.state.AcceleratorState",parameters:[{name:"mixed_precision",val:": str = None"},{name:"cpu",val:": bool = False"},{name:"deepspeed_plugin",val:" = None"},{name:"fsdp_plugin",val:" = None"},{name:"_from_accelerator",val:": bool = False"},{name:"**kwargs",val:""}],source:"https://github.com/huggingface/accelerate/blob/vr_/src/accelerate/state.py#L47"}}),P=new or({props:{name:"class accelerate.state.GradientState",anchor:"accelerate.state.GradientState",parameters:[],source:"https://github.com/huggingface/accelerate/blob/vr_/src/accelerate/state.py#L213"}}),{c(){v=r("meta"),me=i(),g=r("h1"),E=r("a"),F=r("span"),Tt(D.$$.fragment),Te=i(),W=r("span"),$e=o("Stateful Classes"),_e=i(),b=r("p"),xe=o("Below are variations of a "),I=r("a"),Oe=o("singleton class"),Ne=o(` in the sense that all
instances share the same state, which is initialized on the first instantiation.`),ve=i(),R=r("p"),Ae=o(`These classes are immutable and store information about certain configurations or
states.`),ge=i(),h=r("div"),Tt(G.$$.fragment),Le=i(),B=r("p"),De=o("Singleton class that has information about the current training environment."),Ie=i(),z=r("p"),q=r("strong"),Ge=o("Attributes:"),Pe=i(),d=r("ul"),y=r("li"),M=r("strong"),Ce=o("device"),Re=o(" ("),U=r("code"),ke=o("torch.device"),Fe=o(") \u2014 The device to use."),We=i(),S=r("li"),V=r("strong"),Be=o("distributed_type"),ze=o(" ("),k=r("a"),qe=o("DistributedType"),Me=o(`) \u2014 The type of distributed environment currently
in use.`),Ue=i(),w=r("li"),H=r("strong"),Ve=o("local_process_index"),He=o(" ("),J=r("code"),Je=o("int"),je=o(") \u2014 The index of the current process on the current server."),Ke=i(),T=r("li"),j=r("strong"),Qe=o("mixed_precision"),Xe=o(" ("),K=r("code"),Ye=o("str"),Ze=o(`) \u2014 Whether or not the current script will use mixed precision. If you are using
mixed precision, define if you want to use FP16 or BF16 (bfloat16) as the floating point.`),et=i(),$=r("li"),Q=r("strong"),tt=o("num_processes"),rt=o(" ("),X=r("code"),at=o("int"),ot=o(") \u2014 The number of processes currently launched in parallel."),nt=i(),x=r("li"),Y=r("strong"),st=o("process_index"),lt=o(" ("),Z=r("code"),it=o("int"),ct=o(") \u2014 The index of the current process."),Ee=i(),f=r("div"),Tt(P.$$.fragment),dt=i(),ee=r("p"),ht=o("Singleton class that has information related to gradient synchronization for gradient accumulation"),ft=i(),te=r("p"),re=r("strong"),ut=o("Attributes:"),pt=i(),C=r("ul"),O=r("li"),ae=r("strong"),mt=o("end_of_dataloader"),_t=o(" ("),oe=r("code"),vt=o("bool"),gt=o(") \u2014 Whether we have reached the end the current dataloader"),Et=i(),N=r("li"),ne=r("strong"),bt=o("sync_gradients"),yt=o(" ("),se=r("code"),St=o("bool"),wt=o(") \u2014 Whether the gradients should be synced"),this.h()},l(l){const u=ir('[data-svelte="svelte-1phssyn"]',document.head);v=a(u,"META",{name:!0,content:!0}),u.forEach(t),me=c(l),g=a(l,"H1",{class:!0});var ye=n(g);E=a(ye,"A",{id:!0,class:!0,href:!0});var Dt=n(E);F=a(Dt,"SPAN",{});var It=n(F);$t(D.$$.fragment,It),It.forEach(t),Dt.forEach(t),Te=c(ye),W=a(ye,"SPAN",{});var Gt=n(W);$e=s(Gt,"Stateful Classes"),Gt.forEach(t),ye.forEach(t),_e=c(l),b=a(l,"P",{});var Se=n(b);xe=s(Se,"Below are variations of a "),I=a(Se,"A",{href:!0,rel:!0});var Pt=n(I);Oe=s(Pt,"singleton class"),Pt.forEach(t),Ne=s(Se,` in the sense that all
instances share the same state, which is initialized on the first instantiation.`),Se.forEach(t),ve=c(l),R=a(l,"P",{});var Ct=n(R);Ae=s(Ct,`These classes are immutable and store information about certain configurations or
states.`),Ct.forEach(t),ge=c(l),h=a(l,"DIV",{class:!0});var A=n(h);$t(G.$$.fragment,A),Le=c(A),B=a(A,"P",{});var Rt=n(B);De=s(Rt,"Singleton class that has information about the current training environment."),Rt.forEach(t),Ie=c(A),z=a(A,"P",{});var kt=n(z);q=a(kt,"STRONG",{});var Ft=n(q);Ge=s(Ft,"Attributes:"),Ft.forEach(t),kt.forEach(t),Pe=c(A),d=a(A,"UL",{});var p=n(d);y=a(p,"LI",{});var le=n(y);M=a(le,"STRONG",{});var Wt=n(M);Ce=s(Wt,"device"),Wt.forEach(t),Re=s(le," ("),U=a(le,"CODE",{});var Bt=n(U);ke=s(Bt,"torch.device"),Bt.forEach(t),Fe=s(le,") \u2014 The device to use."),le.forEach(t),We=c(p),S=a(p,"LI",{});var ie=n(S);V=a(ie,"STRONG",{});var zt=n(V);Be=s(zt,"distributed_type"),zt.forEach(t),ze=s(ie," ("),k=a(ie,"A",{href:!0});var qt=n(k);qe=s(qt,"DistributedType"),qt.forEach(t),Me=s(ie,`) \u2014 The type of distributed environment currently
in use.`),ie.forEach(t),Ue=c(p),w=a(p,"LI",{});var ce=n(w);H=a(ce,"STRONG",{});var Mt=n(H);Ve=s(Mt,"local_process_index"),Mt.forEach(t),He=s(ce," ("),J=a(ce,"CODE",{});var Ut=n(J);Je=s(Ut,"int"),Ut.forEach(t),je=s(ce,") \u2014 The index of the current process on the current server."),ce.forEach(t),Ke=c(p),T=a(p,"LI",{});var de=n(T);j=a(de,"STRONG",{});var Vt=n(j);Qe=s(Vt,"mixed_precision"),Vt.forEach(t),Xe=s(de," ("),K=a(de,"CODE",{});var Ht=n(K);Ye=s(Ht,"str"),Ht.forEach(t),Ze=s(de,`) \u2014 Whether or not the current script will use mixed precision. If you are using
mixed precision, define if you want to use FP16 or BF16 (bfloat16) as the floating point.`),de.forEach(t),et=c(p),$=a(p,"LI",{});var he=n($);Q=a(he,"STRONG",{});var Jt=n(Q);tt=s(Jt,"num_processes"),Jt.forEach(t),rt=s(he," ("),X=a(he,"CODE",{});var jt=n(X);at=s(jt,"int"),jt.forEach(t),ot=s(he,") \u2014 The number of processes currently launched in parallel."),he.forEach(t),nt=c(p),x=a(p,"LI",{});var fe=n(x);Y=a(fe,"STRONG",{});var Kt=n(Y);st=s(Kt,"process_index"),Kt.forEach(t),lt=s(fe," ("),Z=a(fe,"CODE",{});var Qt=n(Z);it=s(Qt,"int"),Qt.forEach(t),ct=s(fe,") \u2014 The index of the current process."),fe.forEach(t),p.forEach(t),A.forEach(t),Ee=c(l),f=a(l,"DIV",{class:!0});var L=n(f);$t(P.$$.fragment,L),dt=c(L),ee=a(L,"P",{});var Xt=n(ee);ht=s(Xt,"Singleton class that has information related to gradient synchronization for gradient accumulation"),Xt.forEach(t),ft=c(L),te=a(L,"P",{});var Yt=n(te);re=a(Yt,"STRONG",{});var Zt=n(re);ut=s(Zt,"Attributes:"),Zt.forEach(t),Yt.forEach(t),pt=c(L),C=a(L,"UL",{});var we=n(C);O=a(we,"LI",{});var ue=n(O);ae=a(ue,"STRONG",{});var er=n(ae);mt=s(er,"end_of_dataloader"),er.forEach(t),_t=s(ue," ("),oe=a(ue,"CODE",{});var tr=n(oe);vt=s(tr,"bool"),tr.forEach(t),gt=s(ue,") \u2014 Whether we have reached the end the current dataloader"),ue.forEach(t),Et=c(we),N=a(we,"LI",{});var pe=n(N);ne=a(pe,"STRONG",{});var rr=n(ne);bt=s(rr,"sync_gradients"),rr.forEach(t),yt=s(pe," ("),se=a(pe,"CODE",{});var ar=n(se);St=s(ar,"bool"),ar.forEach(t),wt=s(pe,") \u2014 Whether the gradients should be synced"),pe.forEach(t),we.forEach(t),L.forEach(t),this.h()},h(){m(v,"name","hf:doc:metadata"),m(v,"content",JSON.stringify(ur)),m(E,"id","accelerate.state.AcceleratorState"),m(E,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),m(E,"href","#accelerate.state.AcceleratorState"),m(g,"class","relative group"),m(I,"href","https://en.wikipedia.org/wiki/Singleton_pattern"),m(I,"rel","nofollow"),m(k,"href","/docs/accelerate/pr_/en/package_reference/utilities#accelerate.DistributedType"),m(h,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),m(f,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8")},m(l,u){e(document.head,v),_(l,me,u),_(l,g,u),e(g,E),e(E,F),xt(D,F,null),e(g,Te),e(g,W),e(W,$e),_(l,_e,u),_(l,b,u),e(b,xe),e(b,I),e(I,Oe),e(b,Ne),_(l,ve,u),_(l,R,u),e(R,Ae),_(l,ge,u),_(l,h,u),xt(G,h,null),e(h,Le),e(h,B),e(B,De),e(h,Ie),e(h,z),e(z,q),e(q,Ge),e(h,Pe),e(h,d),e(d,y),e(y,M),e(M,Ce),e(y,Re),e(y,U),e(U,ke),e(y,Fe),e(d,We),e(d,S),e(S,V),e(V,Be),e(S,ze),e(S,k),e(k,qe),e(S,Me),e(d,Ue),e(d,w),e(w,H),e(H,Ve),e(w,He),e(w,J),e(J,Je),e(w,je),e(d,Ke),e(d,T),e(T,j),e(j,Qe),e(T,Xe),e(T,K),e(K,Ye),e(T,Ze),e(d,et),e(d,$),e($,Q),e(Q,tt),e($,rt),e($,X),e(X,at),e($,ot),e(d,nt),e(d,x),e(x,Y),e(Y,st),e(x,lt),e(x,Z),e(Z,it),e(x,ct),_(l,Ee,u),_(l,f,u),xt(P,f,null),e(f,dt),e(f,ee),e(ee,ht),e(f,ft),e(f,te),e(te,re),e(re,ut),e(f,pt),e(f,C),e(C,O),e(O,ae),e(ae,mt),e(O,_t),e(O,oe),e(oe,vt),e(O,gt),e(C,Et),e(C,N),e(N,ne),e(ne,bt),e(N,yt),e(N,se),e(se,St),e(N,wt),be=!0},p:cr,i(l){be||(Ot(D.$$.fragment,l),Ot(G.$$.fragment,l),Ot(P.$$.fragment,l),be=!0)},o(l){Nt(D.$$.fragment,l),Nt(G.$$.fragment,l),Nt(P.$$.fragment,l),be=!1},d(l){t(v),l&&t(me),l&&t(g),At(D),l&&t(_e),l&&t(b),l&&t(ve),l&&t(R),l&&t(ge),l&&t(h),At(G),l&&t(Ee),l&&t(f),At(P)}}}const ur={local:"accelerate.state.AcceleratorState",title:"Stateful Classes"};function pr(Lt){return dr(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class gr extends nr{constructor(v){super();sr(this,v,pr,fr,lr,{})}}export{gr as default,ur as metadata};
