import{S as K,i as W,s as X,N as ce,O as me,a as d,d as s,b as m,g as k,G as o,L as F,e as g,k as P,t as y,c as _,m as U,h as b,f as Ge,j as Je,w as L,x as V,y as D,P as Y,q as B,o as S,B as q,Q as Ye,R as Fe,M as Ke,v as We}from"../chunks/vendor-hf-doc-builder.js";import{I as Xe}from"../chunks/IconCopyLink-hf-doc-builder.js";function $e(l){const e=document.createElement("textarea");document.body.appendChild(e),e.value=l,e.select(),document.execCommand("copy"),document.body.removeChild(e)}function et(l){let e,a,n,i;return{c(){e=ce("svg"),a=ce("path"),n=ce("path"),i=ce("rect"),this.h()},l(u){e=me(u,"svg",{class:!0,xmlns:!0,"aria-hidden":!0,fill:!0,focusable:!0,role:!0,width:!0,height:!0,preserveAspectRatio:!0,viewBox:!0});var r=d(e);a=me(r,"path",{d:!0,transform:!0}),d(a).forEach(s),n=me(r,"path",{d:!0,transform:!0}),d(n).forEach(s),i=me(r,"rect",{fill:!0,width:!0,height:!0}),d(i).forEach(s),r.forEach(s),this.h()},h(){m(a,"d","M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"),m(a,"transform","translate(0)"),m(n,"d","M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"),m(n,"transform","translate(0)"),m(i,"fill","none"),m(i,"width","32"),m(i,"height","32"),m(e,"class",l[0]),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"aria-hidden","true"),m(e,"fill","currentColor"),m(e,"focusable","false"),m(e,"role","img"),m(e,"width","1em"),m(e,"height","1em"),m(e,"preserveAspectRatio","xMidYMid meet"),m(e,"viewBox","0 0 32 32")},m(u,r){k(u,e,r),o(e,a),o(e,n),o(e,i)},p(u,[r]){r&1&&m(e,"class",u[0])},i:F,o:F,d(u){u&&s(e)}}}function tt(l,e,a){let{classNames:n=""}=e;return l.$$set=i=>{"classNames"in i&&a(0,n=i.classNames)},[n]}class at extends K{constructor(e){super();W(this,e,tt,et,X,{classNames:0})}}function st(l){let e,a,n,i,u;return{c(){e=g("div"),a=g("div"),n=P(),i=y(l[1]),this.h()},l(r){e=_(r,"DIV",{class:!0});var h=d(e);a=_(h,"DIV",{class:!0,style:!0}),d(a).forEach(s),n=U(h),i=b(h,l[1]),h.forEach(s),this.h()},h(){m(a,"class","absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0"),Ge(a,"border-left-color","transparent"),Ge(a,"border-right-color","transparent"),m(e,"class",u="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow "+l[2]+" "+l[0])},m(r,h){k(r,e,h),o(e,a),o(e,n),o(e,i)},p(r,[h]){h&2&&Je(i,r[1]),h&5&&u!==(u="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow "+r[2]+" "+r[0])&&m(e,"class",u)},i:F,o:F,d(r){r&&s(e)}}}function rt(l,e,a){let{classNames:n=""}=e,{label:i="Copied"}=e,{position:u="left-1/2 top-full transform -translate-x-1/2 translate-y-2"}=e;return l.$$set=r=>{"classNames"in r&&a(0,n=r.classNames),"label"in r&&a(1,i=r.label),"position"in r&&a(2,u=r.position)},[n,i,u]}class nt extends K{constructor(e){super();W(this,e,rt,st,X,{classNames:0,label:1,position:2})}}function it(l){let e,a,n,i,u,r,h,v,p;return a=new at({}),i=new nt({props:{classNames:l[4]?"opacity-100":"opacity-0"}}),{c(){e=g("button"),L(a.$$.fragment),n=P(),L(i.$$.fragment),this.h()},l(c){e=_(c,"BUTTON",{class:!0,title:!0,type:!0});var f=d(e);V(a.$$.fragment,f),n=U(f),V(i.$$.fragment,f),f.forEach(s),this.h()},h(){m(e,"class",u="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none "+l[0]+" "+(l[2]==="text"?"mx-0.5":"")+" "+(l[2]==="button"?"btn":"")+" "+(l[2]==="button-clear"?"py-1 px-2 border rounded-lg shadow-sm":"")+" "+(!l[4]&&["button-clear","text"].includes(l[2])?"text-gray-600":"")+" "+(l[4]?"text-green-500":"")),m(e,"title",r=l[3]||l[1]||"Copy to clipboard"),m(e,"type","button")},m(c,f){k(c,e,f),D(a,e,null),o(e,n),D(i,e,null),h=!0,v||(p=Y(e,"click",l[5]),v=!0)},p(c,[f]){const E={};f&16&&(E.classNames=c[4]?"opacity-100":"opacity-0"),i.$set(E),(!h||f&21&&u!==(u="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none "+c[0]+" "+(c[2]==="text"?"mx-0.5":"")+" "+(c[2]==="button"?"btn":"")+" "+(c[2]==="button-clear"?"py-1 px-2 border rounded-lg shadow-sm":"")+" "+(!c[4]&&["button-clear","text"].includes(c[2])?"text-gray-600":"")+" "+(c[4]?"text-green-500":"")))&&m(e,"class",u),(!h||f&10&&r!==(r=c[3]||c[1]||"Copy to clipboard"))&&m(e,"title",r)},i(c){h||(B(a.$$.fragment,c),B(i.$$.fragment,c),h=!0)},o(c){S(a.$$.fragment,c),S(i.$$.fragment,c),h=!1},d(c){c&&s(e),q(a),q(i),v=!1,p()}}}function ot(l,e,a){let{classNames:n=""}=e,{label:i=""}=e,{style:u="text"}=e,{title:r=""}=e,{value:h}=e,v=!1,p;Ye(()=>{p&&clearTimeout(p)});function c(){$e(h),a(4,v=!0),p&&clearTimeout(p),p=setTimeout(()=>{a(4,v=!1)},1e3)}return l.$$set=f=>{"classNames"in f&&a(0,n=f.classNames),"label"in f&&a(1,i=f.label),"style"in f&&a(2,u=f.style),"title"in f&&a(3,r=f.title),"value"in f&&a(6,h=f.value)},[n,i,u,r,v,c,h]}class lt extends K{constructor(e){super();W(this,e,ot,it,X,{classNames:0,label:1,style:2,title:3,value:6})}}function ct(l){let e,a,n,i,u,r,h,v;return n=new lt({props:{classNames:"transition duration-200 ease-in-out "+(l[2]&&"opacity-0"),label:"code excerpt",value:l[0]}}),{c(){e=g("div"),a=g("div"),L(n.$$.fragment),i=P(),u=g("pre"),this.h()},l(p){e=_(p,"DIV",{class:!0});var c=d(e);a=_(c,"DIV",{class:!0});var f=d(a);V(n.$$.fragment,f),f.forEach(s),i=U(c),u=_(c,"PRE",{});var E=d(u);E.forEach(s),c.forEach(s),this.h()},h(){m(a,"class","absolute top-2.5 right-4"),m(e,"class","code-block relative")},m(p,c){k(p,e,c),o(e,a),D(n,a,null),o(e,i),o(e,u),u.innerHTML=l[1],r=!0,h||(v=[Y(e,"mouseover",l[3]),Y(e,"focus",l[3]),Y(e,"mouseout",l[4]),Y(e,"blur",l[4])],h=!0)},p(p,[c]){const f={};c&4&&(f.classNames="transition duration-200 ease-in-out "+(p[2]&&"opacity-0")),c&1&&(f.value=p[0]),n.$set(f),(!r||c&2)&&(u.innerHTML=p[1])},i(p){r||(B(n.$$.fragment,p),r=!0)},o(p){S(n.$$.fragment,p),r=!1},d(p){p&&s(e),q(n),h=!1,Fe(v)}}}function mt(l,e,a){let n=!0,{code:i=""}=e,{highlighted:u=""}=e;function r(){a(2,n=!1)}function h(){a(2,n=!0)}return l.$$set=v=>{"code"in v&&a(0,i=v.code),"highlighted"in v&&a(1,u=v.highlighted)},[i,u,n,r,h]}class Ze extends K{constructor(e){super();W(this,e,mt,ct,X,{code:0,highlighted:1})}}function ut(l){let e,a,n,i,u,r,h,v,p,c,f,E,$,z,ue,ee,N,Q,fe,he,R,de,te,T,pe,G,ge,_e,j,ve,we,Z,ye,be,J,ke,Te,C,Ie,Pe,A,Ue,Ee,ae,M,Ne,se,x,re,H,je,ne,O,ie;return r=new Xe({}),x=new Ze({props:{code:`from transformers import Trainer, TrainingArguments

# A lot of code here

# Initialize our Trainer
trainer = Trainer(
    model=model,
    args=training_args,  # Original training arguments.
    train_dataset=train_dataset if training_args.do_train else None,
    eval_dataset=eval_dataset if training_args.do_eval else None,
    compute_metrics=compute_metrics,
    tokenizer=tokenizer,
    data_collator=data_collator,
)`,highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> Trainer, TrainingArguments

<span class="hljs-comment"># A lot of code here</span>

<span class="hljs-comment"># Initialize our Trainer</span>
trainer = Trainer(
    model=model,
    args=training_args,  <span class="hljs-comment"># Original training arguments.</span>
    train_dataset=train_dataset <span class="hljs-keyword">if</span> training_args.do_train <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
    eval_dataset=eval_dataset <span class="hljs-keyword">if</span> training_args.do_eval <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
    compute_metrics=compute_metrics,
    tokenizer=tokenizer,
    data_collator=data_collator,
)`}}),O=new Ze({props:{code:`from optimum.graphcore import IPUConfig, IPUTrainer, IPUTrainingArguments

# A lot of the same code as the original script here

# Loading the IPUConfig needed by the IPUTrainer to compile and train the model on IPUs
ipu_config = IPUConfig.from_pretrained(
    training_args.ipu_config_name if training_args.ipu_config_name else model_args.model_name_or_path,
    cache_dir=model_args.cache_dir,
    revision=model_args.model_revision,
    use_auth_token=True if model_args.use_auth_token else None,
)

# Initialize our Trainer
trainer = IPUTrainer(
    model=model,
    ipu_config=ipu_config,
    # The training arguments differ a bit from the original ones, that is why we use IPUTrainingArguments
    args=training_args,
    train_dataset=train_dataset if training_args.do_train else None,
    eval_dataset=eval_dataset if training_args.do_eval else None,
    compute_metrics=compute_metrics,
    tokenizer=tokenizer,
    data_collator=data_collator,
)`,highlighted:`<span class="hljs-keyword">from</span> optimum.graphcore <span class="hljs-keyword">import</span> IPUConfig, IPUTrainer, IPUTrainingArguments

<span class="hljs-comment"># A lot of the same code as the original script here</span>

<span class="hljs-comment"># Loading the IPUConfig needed by the IPUTrainer to compile and train the model on IPUs</span>
ipu_config = IPUConfig.from_pretrained(
    training_args.ipu_config_name <span class="hljs-keyword">if</span> training_args.ipu_config_name <span class="hljs-keyword">else</span> model_args.model_name_or_path,
    cache_dir=model_args.cache_dir,
    revision=model_args.model_revision,
    use_auth_token=<span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> model_args.use_auth_token <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
)

<span class="hljs-comment"># Initialize our Trainer</span>
trainer = IPUTrainer(
    model=model,
    ipu_config=ipu_config,
    <span class="hljs-comment"># The training arguments differ a bit from the original ones, that is why we use IPUTrainingArguments</span>
    args=training_args,
    train_dataset=train_dataset <span class="hljs-keyword">if</span> training_args.do_train <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
    eval_dataset=eval_dataset <span class="hljs-keyword">if</span> training_args.do_eval <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
    compute_metrics=compute_metrics,
    tokenizer=tokenizer,
    data_collator=data_collator,
)`}}),{c(){e=g("meta"),a=P(),n=g("h1"),i=g("a"),u=g("span"),L(r.$$.fragment),h=P(),v=g("span"),p=y("Quickstart"),c=P(),f=g("p"),E=y("\u{1F917} Optimum Graphcore was designed with one goal in mind: make training and evaluation straightforward for any \u{1F917} Transformers user while leveraging the complete power of IPUs."),$=P(),z=g("p"),ue=y("There are two main classes one needs to know:"),ee=P(),N=g("ul"),Q=g("li"),fe=y("IPUTrainer: the trainer class that takes care of compiling the model to run on IPUs, and of performing training and evaluation."),he=P(),R=g("li"),de=y("IPUConfig: the class that specifies attributes and configuration parameters to compile and put the model on the device."),te=P(),T=g("p"),pe=y("The "),G=g("code"),ge=y("IPUTrainer"),_e=y(" is very similar to the "),j=g("a"),ve=y("\u{1F917} Transformers Trainer"),we=y(", and adapting a script using the Trainer to make it work with IPUs will mostly consists of simply swapping the "),Z=g("code"),ye=y("Trainer"),be=y(" class for the "),J=g("code"),ke=y("IPUTrainer"),Te=y(" one. That\u2019s how most of the "),C=g("a"),Ie=y("example scripts"),Pe=y(" were adapted from their "),A=g("a"),Ue=y("original counterparts"),Ee=y("."),ae=P(),M=g("p"),Ne=y("Original script:"),se=P(),L(x.$$.fragment),re=P(),H=g("p"),je=y("Transformed version that can run on IPUs:"),ne=P(),L(O.$$.fragment),this.h()},l(t){const w=Ke('[data-svelte="svelte-1phssyn"]',document.head);e=_(w,"META",{name:!0,content:!0}),w.forEach(s),a=U(t),n=_(t,"H1",{class:!0});var oe=d(n);i=_(oe,"A",{id:!0,class:!0,href:!0});var Ce=d(i);u=_(Ce,"SPAN",{});var Ae=d(u);V(r.$$.fragment,Ae),Ae.forEach(s),Ce.forEach(s),h=U(oe),v=_(oe,"SPAN",{});var xe=d(v);p=b(xe,"Quickstart"),xe.forEach(s),oe.forEach(s),c=U(t),f=_(t,"P",{});var Oe=d(f);E=b(Oe,"\u{1F917} Optimum Graphcore was designed with one goal in mind: make training and evaluation straightforward for any \u{1F917} Transformers user while leveraging the complete power of IPUs."),Oe.forEach(s),$=U(t),z=_(t,"P",{});var ze=d(z);ue=b(ze,"There are two main classes one needs to know:"),ze.forEach(s),ee=U(t),N=_(t,"UL",{});var le=d(N);Q=_(le,"LI",{});var Me=d(Q);fe=b(Me,"IPUTrainer: the trainer class that takes care of compiling the model to run on IPUs, and of performing training and evaluation."),Me.forEach(s),he=U(le),R=_(le,"LI",{});var He=d(R);de=b(He,"IPUConfig: the class that specifies attributes and configuration parameters to compile and put the model on the device."),He.forEach(s),le.forEach(s),te=U(t),T=_(t,"P",{});var I=d(T);pe=b(I,"The "),G=_(I,"CODE",{});var Le=d(G);ge=b(Le,"IPUTrainer"),Le.forEach(s),_e=b(I," is very similar to the "),j=_(I,"A",{href:!0,rel:!0});var Ve=d(j);ve=b(Ve,"\u{1F917} Transformers Trainer"),Ve.forEach(s),we=b(I,", and adapting a script using the Trainer to make it work with IPUs will mostly consists of simply swapping the "),Z=_(I,"CODE",{});var De=d(Z);ye=b(De,"Trainer"),De.forEach(s),be=b(I," class for the "),J=_(I,"CODE",{});var Be=d(J);ke=b(Be,"IPUTrainer"),Be.forEach(s),Te=b(I," one. That\u2019s how most of the "),C=_(I,"A",{href:!0,rel:!0});var Se=d(C);Ie=b(Se,"example scripts"),Se.forEach(s),Pe=b(I," were adapted from their "),A=_(I,"A",{href:!0,rel:!0});var qe=d(A);Ue=b(qe,"original counterparts"),qe.forEach(s),Ee=b(I,"."),I.forEach(s),ae=U(t),M=_(t,"P",{});var Qe=d(M);Ne=b(Qe,"Original script:"),Qe.forEach(s),se=U(t),V(x.$$.fragment,t),re=U(t),H=_(t,"P",{});var Re=d(H);je=b(Re,"Transformed version that can run on IPUs:"),Re.forEach(s),ne=U(t),V(O.$$.fragment,t),this.h()},h(){m(e,"name","hf:doc:metadata"),m(e,"content",JSON.stringify(ft)),m(i,"id","quickstart"),m(i,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),m(i,"href","#quickstart"),m(n,"class","relative group"),m(j,"href","https://huggingface.co/docs/transformers/main_classes/trainer"),m(j,"rel","nofollow"),m(C,"href","https://github.com/huggingface/optimum-graphcore/tree/main/examples"),m(C,"rel","nofollow"),m(A,"href","https://github.com/huggingface/transformers/tree/master/examples/pytorch"),m(A,"rel","nofollow")},m(t,w){o(document.head,e),k(t,a,w),k(t,n,w),o(n,i),o(i,u),D(r,u,null),o(n,h),o(n,v),o(v,p),k(t,c,w),k(t,f,w),o(f,E),k(t,$,w),k(t,z,w),o(z,ue),k(t,ee,w),k(t,N,w),o(N,Q),o(Q,fe),o(N,he),o(N,R),o(R,de),k(t,te,w),k(t,T,w),o(T,pe),o(T,G),o(G,ge),o(T,_e),o(T,j),o(j,ve),o(T,we),o(T,Z),o(Z,ye),o(T,be),o(T,J),o(J,ke),o(T,Te),o(T,C),o(C,Ie),o(T,Pe),o(T,A),o(A,Ue),o(T,Ee),k(t,ae,w),k(t,M,w),o(M,Ne),k(t,se,w),D(x,t,w),k(t,re,w),k(t,H,w),o(H,je),k(t,ne,w),D(O,t,w),ie=!0},p:F,i(t){ie||(B(r.$$.fragment,t),B(x.$$.fragment,t),B(O.$$.fragment,t),ie=!0)},o(t){S(r.$$.fragment,t),S(x.$$.fragment,t),S(O.$$.fragment,t),ie=!1},d(t){s(e),t&&s(a),t&&s(n),q(r),t&&s(c),t&&s(f),t&&s($),t&&s(z),t&&s(ee),t&&s(N),t&&s(te),t&&s(T),t&&s(ae),t&&s(M),t&&s(se),q(x,t),t&&s(re),t&&s(H),t&&s(ne),q(O,t)}}}const ft={local:"quickstart",title:"Quickstart"};function ht(l){return We(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class gt extends K{constructor(e){super();W(this,e,ht,ut,X,{})}}export{gt as default,ft as metadata};
